"use strict";(self.webpackChunk_react_sigma_website=self.webpackChunk_react_sigma_website||[]).push([[5823],{5532:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(1085),r=n(1184),s=n(5694);const c='import { FC, useEffect, useState, CSSProperties } from "react";\nimport Sigma from "sigma";\n\nimport { SigmaContainer } from "@react-sigma/core";\n\nimport "@react-sigma/core/lib/react-sigma.min.css";\n\ntype NodeType = { x: number; y: number; label: string; size: number };\ntype EdgeType = { label: string };\n\nexport const External: FC<{ style?: CSSProperties }> = ({ style }) => {\n  // Storing the sigma ref provided by react-sigma\n  const [sigma, setSigma] = useState<Sigma<NodeType, EdgeType> | null>(null);\n\n  // When the sigma ref is populated\n  // => load a graph\n  useEffect(() => {\n    if (sigma) {\n      const graph = sigma.getGraph();\n      graph.addNode("A", { x: 0, y: 0, label: "Node A", size: 10 });\n      graph.addNode("B", { x: 1, y: 1, label: "Node B", size: 10 });\n      graph.addEdgeWithKey("rel1", "A", "B", { label: "REL_1" });\n    }\n  }, [sigma]);\n\n  return (\n    <SigmaContainer ref={setSigma} settings={{ allowInvalidContainer: true, renderLabels: false }} style={style} />\n  );\n};\n',l={},o="External State",i={id:"example/external_state",title:"External State",description:"If you want to control the sigma instance outside the SigmaContainer component,",source:"@site/docs/example/06_external_state.mdx",sourceDirName:"example",slug:"/example/external_state",permalink:"/react-sigma/docs/example/external_state",draft:!1,unlisted:!1,editUrl:"https://github.com/sim51/react-sigma/tree/main/packages/website/docs/example/06_external_state.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"docs",previous:{title:"Controls",permalink:"/react-sigma/docs/example/controls"},next:{title:"FAQ",permalink:"/react-sigma/docs/faq"}},d={},u=[];function m(e){const t={code:"code",h1:"h1",p:"p",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"external-state",children:"External State"}),"\n",(0,a.jsxs)(t.p,{children:["If you want to control the sigma instance outside the ",(0,a.jsx)(t.code,{children:"SigmaContainer"})," component,\nyou can use the forward reference feature on it."]}),"\n",(0,a.jsxs)(t.p,{children:["The reference is the instance of ",(0,a.jsx)(t.code,{children:"sigma"})," used in the component,\nand so with it, you can what ever you want, but MUST know the API of sigma."]}),"\n",(0,a.jsx)(t.p,{children:"Here is an example that load a graph"}),"\n",(0,a.jsx)(s.O,{code:c,title:"External state",component:()=>{const{External:e}=n(5015);return(0,a.jsx)(e,{style:{height:"400px"}})}})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},5015:(e,t,n)=>{n.r(t),n.d(t,{External:()=>c});var a=n(4041),r=n(5556),s=n(1085);const c=e=>{let{style:t}=e;const[n,c]=(0,a.useState)(null);return(0,a.useEffect)((()=>{if(n){const e=n.getGraph();e.addNode("A",{x:0,y:0,label:"Node A",size:10}),e.addNode("B",{x:1,y:1,label:"Node B",size:10}),e.addEdgeWithKey("rel1","A","B",{label:"REL_1"})}}),[n]),(0,s.jsx)(r.hF,{ref:c,settings:{allowInvalidContainer:!0,renderLabels:!1},style:t})}},5694:(e,t,n)=>{n.d(t,{A:()=>o,O:()=>l});var a=n(4041),r=n(4506),s=n(6704),c=n(1085);const l=e=>{let{code:t,title:n,component:l,mode:o="code"}=e;const[i,d]=(0,a.useState)(o);return(0,c.jsx)(s.A,{fallback:(0,c.jsx)("div",{children:"Loading..."}),children:()=>(0,c.jsxs)("div",{className:"code-preview",children:[(0,c.jsxs)("div",{className:"header",children:[(0,c.jsx)("div",{children:n&&(0,c.jsx)("h5",{children:n})}),(0,c.jsxs)("div",{className:"switch",children:[(0,c.jsx)("button",{className:"button",onClick:()=>d("code"),disabled:"code"===i,children:"Code"}),(0,c.jsx)("button",{className:"button",onClick:()=>d("preview"),disabled:"preview"===i,children:"Preview"})]})]}),(0,c.jsxs)("div",{className:"content",children:["preview"===i&&l(),"code"===i&&(0,c.jsx)(r.A,{language:"jsx",children:t})]})]})})},o=l},1184:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>l});var a=n(4041);const r={},s=a.createContext(r);function c(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(s.Provider,{value:t},e.children)}},5556:(e,t,n)=>{n.d(t,{Bx:()=>i,Qp:()=>p,Su:()=>v,_d:()=>E,dW:()=>d,hF:()=>w,n4:()=>b,pj:()=>P,qz:()=>T,t_:()=>I});var a=n(4041),r=n(2437),s=n(4160);const c=(0,a.createContext)(null),l=c.Provider;function o(){const e=(0,a.useContext)(c);if(null==e)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return e}function i(){return o().sigma}function d(){const{sigma:e}=o();return(0,a.useCallback)((t=>{e&&Object.keys(t).forEach((n=>{e.setSetting(n,t[n])}))}),[e])}function u(e){return new Set(Object.keys(e))}const m=u({clickNode:!0,rightClickNode:!0,downNode:!0,enterNode:!0,leaveNode:!0,doubleClickNode:!0,wheelNode:!0,clickEdge:!0,rightClickEdge:!0,downEdge:!0,enterEdge:!0,leaveEdge:!0,doubleClickEdge:!0,wheelEdge:!0,clickStage:!0,rightClickStage:!0,downStage:!0,doubleClickStage:!0,wheelStage:!0,beforeRender:!0,afterRender:!0,kill:!0,upStage:!0,upEdge:!0,upNode:!0,enterStage:!0,leaveStage:!0,resize:!0,afterClear:!0,afterProcess:!0,beforeClear:!0,beforeProcess:!0}),g=u({click:!0,rightClick:!0,doubleClick:!0,mouseup:!0,mousedown:!0,mousemove:!0,mousemovebody:!0,mouseleave:!0,mouseenter:!0,wheel:!0}),h=u({touchup:!0,touchdown:!0,touchmove:!0}),f=u({updated:!0});function p(){const e=i(),t=d(),[n,r]=(0,a.useState)({});return(0,a.useEffect)((()=>{if(!e||!n)return;const t=n,a=Object.keys(t);return a.forEach((n=>{const a=t[n];m.has(n)&&e.on(n,a),g.has(n)&&e.getMouseCaptor().on(n,a),h.has(n)&&e.getTouchCaptor().on(n,a),f.has(n)&&e.getCamera().on(n,a)})),()=>{e&&a.forEach((n=>{const a=t[n];m.has(n)&&e.off(n,a),g.has(n)&&e.getMouseCaptor().off(n,a),h.has(n)&&e.getTouchCaptor().off(n,a),f.has(n)&&e.getCamera().off(n,a)}))}}),[e,n,t]),r}function v(){const e=i();return(0,a.useCallback)((function(t,n){void 0===n&&(n=!0),e&&t&&(n&&e.getGraph().order>0&&e.getGraph().clear(),e.getGraph().import(t),e.refresh())}),[e])}function b(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(const n in e){if(!Object.hasOwn(t,n))return!1;if(!b(e[n],t[n]))return!1}return!0}return!1}function x(e){const t=i(),[n,r]=(0,a.useState)(e||{});(0,a.useEffect)((()=>{b(n,e||{})||r(e||{})}),[e]);const s=(0,a.useCallback)((e=>{t.getCamera().animatedZoom(Object.assign(Object.assign({},n),e))}),[t,n]),c=(0,a.useCallback)((e=>{t.getCamera().animatedUnzoom(Object.assign(Object.assign({},n),e))}),[t,n]),l=(0,a.useCallback)((e=>{t.getCamera().animatedReset(Object.assign(Object.assign({},n),e))}),[t,n]),o=(0,a.useCallback)(((e,a)=>{t.getCamera().animate(e,Object.assign(Object.assign({},n),a))}),[t,n]),d=(0,a.useCallback)(((e,a)=>{const r=t.getNodeDisplayData(e);r?t.getCamera().animate(r,Object.assign(Object.assign({},n),a)):console.log(`Node ${e} not found`)}),[t,n]);return{zoomIn:s,zoomOut:c,reset:l,goto:o,gotoNode:d}}const w=(0,a.forwardRef)(((e,t)=>{let{graph:n,id:c,className:o,style:i,settings:d={},children:u}=e;const m=(0,a.useRef)(null),g=(0,a.useRef)(null),h={className:`react-sigma ${o||""}`,id:c,style:i},[f,p]=(0,a.useState)(null),[v,x]=(0,a.useState)(d);(0,a.useEffect)((()=>{b(v,d)||x(d)}),[d]),(0,a.useEffect)((()=>{let e=null;if(null!==g.current){let t=new r;n&&(t="function"==typeof n?new n:n),e=new s.UT(t,g.current,v),f&&e.getCamera().setState(f.getCamera().getState())}return p(e),()=>{e&&e.kill(),p(null)}}),[g,n,v]),(0,a.useImperativeHandle)(t,(()=>f),[f]);const w=(0,a.useMemo)((()=>f&&m.current?{sigma:f,container:m.current}:null),[f,m.current]),E=null!==w?a.createElement(l,{value:w},u):null;return a.createElement("div",Object.assign({},h,{ref:m}),a.createElement("div",{className:"sigma-container",ref:g}),E)})),E=e=>{let{id:t,className:n,style:r,children:s,position:c="bottom-left"}=e;const l={className:`react-sigma-controls ${n||""} ${c}`,id:t,style:r};return a.createElement("div",Object.assign({},l),s)};var y;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},C.apply(this,arguments)}var j,_=function(e){return a.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"plus-solid_svg__svg-inline--fa plus-solid_svg__fa-plus plus-solid_svg__fa-w-14","data-icon":"plus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),y||(y=a.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S.apply(this,arguments)}var O,N=function(e){return a.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"minus-solid_svg__svg-inline--fa minus-solid_svg__fa-minus minus-solid_svg__fa-w-14","data-icon":"minus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),j||(j=a.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k.apply(this,arguments)}var M=function(e){return a.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"dot-circle-regular_svg__svg-inline--fa dot-circle-regular_svg__fa-dot-circle dot-circle-regular_svg__fa-w-16","data-icon":"dot-circle","data-prefix":"far",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),O||(O=a.createElement("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80"})))};const P=e=>{let{className:t,style:n,animationDuration:r=200,children:s,labels:c={}}=e;const{zoomIn:l,zoomOut:o,reset:i}=x({duration:r,factor:1.5}),d={style:n,className:`react-sigma-control ${t||""}`};return a.createElement(a.Fragment,null,a.createElement("div",Object.assign({},d),a.createElement("button",{onClick:()=>l(),title:c.zoomIn||"Zoom In"},s?s[0]:a.createElement(_,{style:{width:"1em"}}))),a.createElement("div",Object.assign({},d),a.createElement("button",{onClick:()=>o(),title:c.zoomOut||"Zoom Out"},s?s[1]:a.createElement(N,{style:{width:"1em"}}))),a.createElement("div",Object.assign({},d),a.createElement("button",{onClick:()=>i(),title:c.reset||"See whole graph"},s?s[2]:a.createElement(M,{style:{width:"1em"}}))))};var z;function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},H.apply(this,arguments)}var A,F=function(e){return a.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"expand-solid_svg__svg-inline--fa expand-solid_svg__fa-expand expand-solid_svg__fa-w-14","data-icon":"expand","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),z||(z=a.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12M288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12m148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12M160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12"})))};function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},B.apply(this,arguments)}var R=function(e){return a.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"compress-solid_svg__svg-inline--fa compress-solid_svg__fa-compress compress-solid_svg__fa-w-14","data-icon":"compress","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},e),A||(A=a.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12m-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24m0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12m192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12"})))};const I=e=>{let{id:t,className:n,style:r,container:s,children:c,labels:l={}}=e;const{isFullScreen:i,toggle:d}=function(e){const t=o(),[n,r]=(0,a.useState)(!1),[s,c]=(0,a.useState)(e||t.container),l=()=>r((e=>!e));return(0,a.useEffect)((()=>(document.addEventListener("fullscreenchange",l),()=>document.removeEventListener("fullscreenchange",l))),[l]),(0,a.useEffect)((()=>{c(e||t.container)}),[e,t.container]),{toggle:(0,a.useCallback)((()=>{var e;e=s,document.fullscreenElement!==e?e.requestFullscreen():document.exitFullscreen&&document.exitFullscreen()}),[s]),isFullScreen:n}}(null==s?void 0:s.current),u={className:`react-sigma-control ${n||""}`,id:t,style:r};return document.fullscreenEnabled?a.createElement("div",Object.assign({},u),a.createElement("button",{onClick:d,title:i?l.exit||"Exit fullscreen":l.enter||"Enter fullscreen"},c&&!i&&c[0],c&&i&&c[1],!c&&!i&&a.createElement(F,{style:{width:"1em"}}),!c&&i&&a.createElement(R,{style:{width:"1em"}}))):null},T=e=>{let{id:t,className:n,style:r,labels:s={}}=e;const c=i(),l=p(),{gotoNode:o}=x(),[d,u]=(0,a.useState)(""),[m,g]=(0,a.useState)([]),[h,f]=(0,a.useState)(null),[v,b]=(0,a.useState)("");(0,a.useEffect)((()=>{b(`search-${Math.random().toString(36).slice(2)}`)}),[]),(0,a.useEffect)((()=>{const e=[];!h&&d.length>1&&c.getGraph().forEachNode(((t,n)=>{n.label&&n.label.toLowerCase().includes(d.toLowerCase())&&e.push({id:t,label:n.label})})),g(e)}),[d]),(0,a.useEffect)((()=>{l({clickStage:()=>{f(null),u("")}})}),[l]),(0,a.useEffect)((()=>{if(h)return c.getGraph().setNodeAttribute(h,"highlighted",!0),o(h),()=>{c.getGraph().setNodeAttribute(h,"highlighted",!1)}}),[h]);const w={className:`react-sigma-search ${n||""}`,id:t,style:r};return a.createElement("div",Object.assign({},w),a.createElement("label",{htmlFor:v,style:{display:"none"}},s.text||"Search a node"),a.createElement("input",{id:v,type:"text",placeholder:s.placeholder||"Search...",list:`${v}-datalist`,value:d,onChange:e=>{const t=e.target.value,n=m.find((e=>e.label===t));n?(u(n.label),g([]),f(n.id)):(f(null),u(t))}}),a.createElement("datalist",{id:`${v}-datalist`},m.map((e=>a.createElement("option",{key:e.id,value:e.label},e.label)))))}}}]);