import{r as X,c as rr,g as fi,R as pe}from"./index-Dl6G-zuu.js";var Rh={exports:{}},li={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=X,dy=Symbol.for("react.element"),gy=Symbol.for("react.fragment"),py=Object.prototype.hasOwnProperty,vy=cy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,my={key:!0,ref:!0,__self:!0,__source:!0};function Th(s,r,n){var i,a={},u=null,f=null;n!==void 0&&(u=""+n),r.key!==void 0&&(u=""+r.key),r.ref!==void 0&&(f=r.ref);for(i in r)py.call(r,i)&&!my.hasOwnProperty(i)&&(a[i]=r[i]);if(s&&s.defaultProps)for(i in r=s.defaultProps,r)a[i]===void 0&&(a[i]=r[i]);return{$$typeof:dy,type:s,key:u,ref:f,props:a,_owner:vy.current}}li.Fragment=gy;li.jsx=Th;li.jsxs=Th;Rh.exports=li;var m_=Rh.exports,ui={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ui.exports;(function(s,r){(function(){var n,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",v=500,w="__lodash_placeholder__",y=1,x=2,S=4,D=1,N=2,I=1,$=2,P=4,B=8,W=16,he=32,$e=64,de=128,wt=256,ke=512,ut=30,ht="...",Gn=800,Fn=16,Bt=1,qe=2,_t=3,Ve=1/0,_e=9007199254740991,In=17976931348623157e292,ft=NaN,bt=4294967295,Af=bt-1,Sf=bt>>>1,Cf=[["ary",de],["bind",I],["bindKey",$],["curry",B],["curryRight",W],["flip",ke],["partial",he],["partialRight",$e],["rearg",wt]],hn="[object Arguments]",ur="[object Array]",Rf="[object AsyncFunction]",kn="[object Boolean]",On="[object Date]",Tf="[object DOMException]",hr="[object Error]",fr="[object Function]",fo="[object GeneratorFunction]",lt="[object Map]",Pn="[object Number]",Lf="[object Null]",Ct="[object Object]",lo="[object Promise]",Df="[object Proxy]",Mn="[object RegExp]",ct="[object Set]",Un="[object String]",lr="[object Symbol]",Nf="[object Undefined]",$n="[object WeakMap]",Gf="[object WeakSet]",Bn="[object ArrayBuffer]",fn="[object DataView]",vi="[object Float32Array]",mi="[object Float64Array]",yi="[object Int8Array]",wi="[object Int16Array]",_i="[object Int32Array]",bi="[object Uint8Array]",Ei="[object Uint8ClampedArray]",xi="[object Uint16Array]",Ai="[object Uint32Array]",Ff=/\b__p \+= '';/g,If=/\b(__p \+=) '' \+/g,kf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,co=/&(?:amp|lt|gt|quot|#39);/g,go=/[&<>"']/g,Of=RegExp(co.source),Pf=RegExp(go.source),Mf=/<%-([\s\S]+?)%>/g,Uf=/<%([\s\S]+?)%>/g,po=/<%=([\s\S]+?)%>/g,$f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bf=/^\w*$/,zf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Si=/[\\^$.*+?()[\]{}|]/g,Wf=RegExp(Si.source),Ci=/^\s+/,Hf=/\s/,Kf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yf=/\{\n\/\* \[wrapped with (.+)\] \*/,qf=/,? & /,Vf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zf=/[()=,{}\[\]\/\s]/,Xf=/\\(\\)?/g,jf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vo=/\w*$/,Jf=/^[-+]0x[0-9a-f]+$/i,Qf=/^0b[01]+$/i,el=/^\[object .+?Constructor\]$/,tl=/^0o[0-7]+$/i,nl=/^(?:0|[1-9]\d*)$/,rl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cr=/($^)/,il=/['\n\r\u2028\u2029\\]/g,dr="\\ud800-\\udfff",al="\\u0300-\\u036f",ol="\\ufe20-\\ufe2f",sl="\\u20d0-\\u20ff",mo=al+ol+sl,yo="\\u2700-\\u27bf",wo="a-z\\xdf-\\xf6\\xf8-\\xff",ul="\\xac\\xb1\\xd7\\xf7",hl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fl="\\u2000-\\u206f",ll=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_o="A-Z\\xc0-\\xd6\\xd8-\\xde",bo="\\ufe0e\\ufe0f",Eo=ul+hl+fl+ll,Ri="['’]",cl="["+dr+"]",xo="["+Eo+"]",gr="["+mo+"]",Ao="\\d+",dl="["+yo+"]",So="["+wo+"]",Co="[^"+dr+Eo+Ao+yo+wo+_o+"]",Ti="\\ud83c[\\udffb-\\udfff]",gl="(?:"+gr+"|"+Ti+")",Ro="[^"+dr+"]",Li="(?:\\ud83c[\\udde6-\\uddff]){2}",Di="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="["+_o+"]",To="\\u200d",Lo="(?:"+So+"|"+Co+")",pl="(?:"+ln+"|"+Co+")",Do="(?:"+Ri+"(?:d|ll|m|re|s|t|ve))?",No="(?:"+Ri+"(?:D|LL|M|RE|S|T|VE))?",Go=gl+"?",Fo="["+bo+"]?",vl="(?:"+To+"(?:"+[Ro,Li,Di].join("|")+")"+Fo+Go+")*",ml="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Io=Fo+Go+vl,wl="(?:"+[dl,Li,Di].join("|")+")"+Io,_l="(?:"+[Ro+gr+"?",gr,Li,Di,cl].join("|")+")",bl=RegExp(Ri,"g"),El=RegExp(gr,"g"),Ni=RegExp(Ti+"(?="+Ti+")|"+_l+Io,"g"),xl=RegExp([ln+"?"+So+"+"+Do+"(?="+[xo,ln,"$"].join("|")+")",pl+"+"+No+"(?="+[xo,ln+Lo,"$"].join("|")+")",ln+"?"+Lo+"+"+Do,ln+"+"+No,yl,ml,Ao,wl].join("|"),"g"),Al=RegExp("["+To+dr+mo+bo+"]"),Sl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Cl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rl=-1,ce={};ce[vi]=ce[mi]=ce[yi]=ce[wi]=ce[_i]=ce[bi]=ce[Ei]=ce[xi]=ce[Ai]=!0,ce[hn]=ce[ur]=ce[Bn]=ce[kn]=ce[fn]=ce[On]=ce[hr]=ce[fr]=ce[lt]=ce[Pn]=ce[Ct]=ce[Mn]=ce[ct]=ce[Un]=ce[$n]=!1;var le={};le[hn]=le[ur]=le[Bn]=le[fn]=le[kn]=le[On]=le[vi]=le[mi]=le[yi]=le[wi]=le[_i]=le[lt]=le[Pn]=le[Ct]=le[Mn]=le[ct]=le[Un]=le[lr]=le[bi]=le[Ei]=le[xi]=le[Ai]=!0,le[hr]=le[fr]=le[$n]=!1;var Tl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ll={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Nl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gl=parseFloat,Fl=parseInt,ko=typeof rr=="object"&&rr&&rr.Object===Object&&rr,Il=typeof self=="object"&&self&&self.Object===Object&&self,Se=ko||Il||Function("return this")(),Gi=r&&!r.nodeType&&r,Jt=Gi&&!0&&s&&!s.nodeType&&s,Oo=Jt&&Jt.exports===Gi,Fi=Oo&&ko.process,Ze=function(){try{var b=Jt&&Jt.require&&Jt.require("util").types;return b||Fi&&Fi.binding&&Fi.binding("util")}catch{}}(),Po=Ze&&Ze.isArrayBuffer,Mo=Ze&&Ze.isDate,Uo=Ze&&Ze.isMap,$o=Ze&&Ze.isRegExp,Bo=Ze&&Ze.isSet,zo=Ze&&Ze.isTypedArray;function Be(b,C,A){switch(A.length){case 0:return b.call(C);case 1:return b.call(C,A[0]);case 2:return b.call(C,A[0],A[1]);case 3:return b.call(C,A[0],A[1],A[2])}return b.apply(C,A)}function kl(b,C,A,U){for(var Z=-1,ie=b==null?0:b.length;++Z<ie;){var be=b[Z];C(U,be,A(be),b)}return U}function Xe(b,C){for(var A=-1,U=b==null?0:b.length;++A<U&&C(b[A],A,b)!==!1;);return b}function Ol(b,C){for(var A=b==null?0:b.length;A--&&C(b[A],A,b)!==!1;);return b}function Wo(b,C){for(var A=-1,U=b==null?0:b.length;++A<U;)if(!C(b[A],A,b))return!1;return!0}function zt(b,C){for(var A=-1,U=b==null?0:b.length,Z=0,ie=[];++A<U;){var be=b[A];C(be,A,b)&&(ie[Z++]=be)}return ie}function pr(b,C){var A=b==null?0:b.length;return!!A&&cn(b,C,0)>-1}function Ii(b,C,A){for(var U=-1,Z=b==null?0:b.length;++U<Z;)if(A(C,b[U]))return!0;return!1}function ge(b,C){for(var A=-1,U=b==null?0:b.length,Z=Array(U);++A<U;)Z[A]=C(b[A],A,b);return Z}function Wt(b,C){for(var A=-1,U=C.length,Z=b.length;++A<U;)b[Z+A]=C[A];return b}function ki(b,C,A,U){var Z=-1,ie=b==null?0:b.length;for(U&&ie&&(A=b[++Z]);++Z<ie;)A=C(A,b[Z],Z,b);return A}function Pl(b,C,A,U){var Z=b==null?0:b.length;for(U&&Z&&(A=b[--Z]);Z--;)A=C(A,b[Z],Z,b);return A}function Oi(b,C){for(var A=-1,U=b==null?0:b.length;++A<U;)if(C(b[A],A,b))return!0;return!1}var Ml=Pi("length");function Ul(b){return b.split("")}function $l(b){return b.match(Vf)||[]}function Ho(b,C,A){var U;return A(b,function(Z,ie,be){if(C(Z,ie,be))return U=ie,!1}),U}function vr(b,C,A,U){for(var Z=b.length,ie=A+(U?1:-1);U?ie--:++ie<Z;)if(C(b[ie],ie,b))return ie;return-1}function cn(b,C,A){return C===C?Jl(b,C,A):vr(b,Ko,A)}function Bl(b,C,A,U){for(var Z=A-1,ie=b.length;++Z<ie;)if(U(b[Z],C))return Z;return-1}function Ko(b){return b!==b}function Yo(b,C){var A=b==null?0:b.length;return A?Ui(b,C)/A:ft}function Pi(b){return function(C){return C==null?n:C[b]}}function Mi(b){return function(C){return b==null?n:b[C]}}function qo(b,C,A,U,Z){return Z(b,function(ie,be,fe){A=U?(U=!1,ie):C(A,ie,be,fe)}),A}function zl(b,C){var A=b.length;for(b.sort(C);A--;)b[A]=b[A].value;return b}function Ui(b,C){for(var A,U=-1,Z=b.length;++U<Z;){var ie=C(b[U]);ie!==n&&(A=A===n?ie:A+ie)}return A}function $i(b,C){for(var A=-1,U=Array(b);++A<b;)U[A]=C(A);return U}function Wl(b,C){return ge(C,function(A){return[A,b[A]]})}function Vo(b){return b&&b.slice(0,Jo(b)+1).replace(Ci,"")}function ze(b){return function(C){return b(C)}}function Bi(b,C){return ge(C,function(A){return b[A]})}function zn(b,C){return b.has(C)}function Zo(b,C){for(var A=-1,U=b.length;++A<U&&cn(C,b[A],0)>-1;);return A}function Xo(b,C){for(var A=b.length;A--&&cn(C,b[A],0)>-1;);return A}function Hl(b,C){for(var A=b.length,U=0;A--;)b[A]===C&&++U;return U}var Kl=Mi(Tl),Yl=Mi(Ll);function ql(b){return"\\"+Nl[b]}function Vl(b,C){return b==null?n:b[C]}function dn(b){return Al.test(b)}function Zl(b){return Sl.test(b)}function Xl(b){for(var C,A=[];!(C=b.next()).done;)A.push(C.value);return A}function zi(b){var C=-1,A=Array(b.size);return b.forEach(function(U,Z){A[++C]=[Z,U]}),A}function jo(b,C){return function(A){return b(C(A))}}function Ht(b,C){for(var A=-1,U=b.length,Z=0,ie=[];++A<U;){var be=b[A];(be===C||be===w)&&(b[A]=w,ie[Z++]=A)}return ie}function mr(b){var C=-1,A=Array(b.size);return b.forEach(function(U){A[++C]=U}),A}function jl(b){var C=-1,A=Array(b.size);return b.forEach(function(U){A[++C]=[U,U]}),A}function Jl(b,C,A){for(var U=A-1,Z=b.length;++U<Z;)if(b[U]===C)return U;return-1}function Ql(b,C,A){for(var U=A+1;U--;)if(b[U]===C)return U;return U}function gn(b){return dn(b)?tc(b):Ml(b)}function dt(b){return dn(b)?nc(b):Ul(b)}function Jo(b){for(var C=b.length;C--&&Hf.test(b.charAt(C)););return C}var ec=Mi(Dl);function tc(b){for(var C=Ni.lastIndex=0;Ni.test(b);)++C;return C}function nc(b){return b.match(Ni)||[]}function rc(b){return b.match(xl)||[]}var ic=function b(C){C=C==null?Se:pn.defaults(Se.Object(),C,pn.pick(Se,Cl));var A=C.Array,U=C.Date,Z=C.Error,ie=C.Function,be=C.Math,fe=C.Object,Wi=C.RegExp,ac=C.String,je=C.TypeError,yr=A.prototype,oc=ie.prototype,vn=fe.prototype,wr=C["__core-js_shared__"],_r=oc.toString,oe=vn.hasOwnProperty,sc=0,Qo=function(){var e=/[^.]+$/.exec(wr&&wr.keys&&wr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),br=vn.toString,uc=_r.call(fe),hc=Se._,fc=Wi("^"+_r.call(oe).replace(Si,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Er=Oo?C.Buffer:n,Kt=C.Symbol,xr=C.Uint8Array,es=Er?Er.allocUnsafe:n,Ar=jo(fe.getPrototypeOf,fe),ts=fe.create,ns=vn.propertyIsEnumerable,Sr=yr.splice,rs=Kt?Kt.isConcatSpreadable:n,Wn=Kt?Kt.iterator:n,Qt=Kt?Kt.toStringTag:n,Cr=function(){try{var e=an(fe,"defineProperty");return e({},"",{}),e}catch{}}(),lc=C.clearTimeout!==Se.clearTimeout&&C.clearTimeout,cc=U&&U.now!==Se.Date.now&&U.now,dc=C.setTimeout!==Se.setTimeout&&C.setTimeout,Rr=be.ceil,Tr=be.floor,Hi=fe.getOwnPropertySymbols,gc=Er?Er.isBuffer:n,is=C.isFinite,pc=yr.join,vc=jo(fe.keys,fe),Ee=be.max,Te=be.min,mc=U.now,yc=C.parseInt,as=be.random,wc=yr.reverse,Ki=an(C,"DataView"),Hn=an(C,"Map"),Yi=an(C,"Promise"),mn=an(C,"Set"),Kn=an(C,"WeakMap"),Yn=an(fe,"create"),Lr=Kn&&new Kn,yn={},_c=on(Ki),bc=on(Hn),Ec=on(Yi),xc=on(mn),Ac=on(Kn),Dr=Kt?Kt.prototype:n,qn=Dr?Dr.valueOf:n,os=Dr?Dr.toString:n;function g(e){if(me(e)&&!j(e)&&!(e instanceof ne)){if(e instanceof Je)return e;if(oe.call(e,"__wrapped__"))return su(e)}return new Je(e)}var wn=function(){function e(){}return function(t){if(!ve(t))return{};if(ts)return ts(t);e.prototype=t;var o=new e;return e.prototype=n,o}}();function Nr(){}function Je(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}g.templateSettings={escape:Mf,evaluate:Uf,interpolate:po,variable:"",imports:{_:g}},g.prototype=Nr.prototype,g.prototype.constructor=g,Je.prototype=wn(Nr.prototype),Je.prototype.constructor=Je;function ne(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bt,this.__views__=[]}function Sc(){var e=new ne(this.__wrapped__);return e.__actions__=Oe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oe(this.__views__),e}function Cc(){if(this.__filtered__){var e=new ne(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Rc(){var e=this.__wrapped__.value(),t=this.__dir__,o=j(e),h=t<0,c=o?e.length:0,p=Ud(0,c,this.__views__),m=p.start,_=p.end,E=_-m,R=h?_:m-1,T=this.__iteratees__,L=T.length,O=0,z=Te(E,this.__takeCount__);if(!o||!h&&c==E&&z==E)return Ds(e,this.__actions__);var Y=[];e:for(;E--&&O<z;){R+=t;for(var Q=-1,q=e[R];++Q<L;){var te=T[Q],re=te.iteratee,Ke=te.type,Ie=re(q);if(Ke==qe)q=Ie;else if(!Ie){if(Ke==Bt)continue e;break e}}Y[O++]=q}return Y}ne.prototype=wn(Nr.prototype),ne.prototype.constructor=ne;function en(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var h=e[t];this.set(h[0],h[1])}}function Tc(){this.__data__=Yn?Yn(null):{},this.size=0}function Lc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Dc(e){var t=this.__data__;if(Yn){var o=t[e];return o===d?n:o}return oe.call(t,e)?t[e]:n}function Nc(e){var t=this.__data__;return Yn?t[e]!==n:oe.call(t,e)}function Gc(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Yn&&t===n?d:t,this}en.prototype.clear=Tc,en.prototype.delete=Lc,en.prototype.get=Dc,en.prototype.has=Nc,en.prototype.set=Gc;function Rt(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var h=e[t];this.set(h[0],h[1])}}function Fc(){this.__data__=[],this.size=0}function Ic(e){var t=this.__data__,o=Gr(t,e);if(o<0)return!1;var h=t.length-1;return o==h?t.pop():Sr.call(t,o,1),--this.size,!0}function kc(e){var t=this.__data__,o=Gr(t,e);return o<0?n:t[o][1]}function Oc(e){return Gr(this.__data__,e)>-1}function Pc(e,t){var o=this.__data__,h=Gr(o,e);return h<0?(++this.size,o.push([e,t])):o[h][1]=t,this}Rt.prototype.clear=Fc,Rt.prototype.delete=Ic,Rt.prototype.get=kc,Rt.prototype.has=Oc,Rt.prototype.set=Pc;function Tt(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var h=e[t];this.set(h[0],h[1])}}function Mc(){this.size=0,this.__data__={hash:new en,map:new(Hn||Rt),string:new en}}function Uc(e){var t=Hr(this,e).delete(e);return this.size-=t?1:0,t}function $c(e){return Hr(this,e).get(e)}function Bc(e){return Hr(this,e).has(e)}function zc(e,t){var o=Hr(this,e),h=o.size;return o.set(e,t),this.size+=o.size==h?0:1,this}Tt.prototype.clear=Mc,Tt.prototype.delete=Uc,Tt.prototype.get=$c,Tt.prototype.has=Bc,Tt.prototype.set=zc;function tn(e){var t=-1,o=e==null?0:e.length;for(this.__data__=new Tt;++t<o;)this.add(e[t])}function Wc(e){return this.__data__.set(e,d),this}function Hc(e){return this.__data__.has(e)}tn.prototype.add=tn.prototype.push=Wc,tn.prototype.has=Hc;function gt(e){var t=this.__data__=new Rt(e);this.size=t.size}function Kc(){this.__data__=new Rt,this.size=0}function Yc(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}function qc(e){return this.__data__.get(e)}function Vc(e){return this.__data__.has(e)}function Zc(e,t){var o=this.__data__;if(o instanceof Rt){var h=o.__data__;if(!Hn||h.length<a-1)return h.push([e,t]),this.size=++o.size,this;o=this.__data__=new Tt(h)}return o.set(e,t),this.size=o.size,this}gt.prototype.clear=Kc,gt.prototype.delete=Yc,gt.prototype.get=qc,gt.prototype.has=Vc,gt.prototype.set=Zc;function ss(e,t){var o=j(e),h=!o&&sn(e),c=!o&&!h&&Xt(e),p=!o&&!h&&!c&&xn(e),m=o||h||c||p,_=m?$i(e.length,ac):[],E=_.length;for(var R in e)(t||oe.call(e,R))&&!(m&&(R=="length"||c&&(R=="offset"||R=="parent")||p&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Gt(R,E)))&&_.push(R);return _}function us(e){var t=e.length;return t?e[ra(0,t-1)]:n}function Xc(e,t){return Kr(Oe(e),nn(t,0,e.length))}function jc(e){return Kr(Oe(e))}function qi(e,t,o){(o!==n&&!pt(e[t],o)||o===n&&!(t in e))&&Lt(e,t,o)}function Vn(e,t,o){var h=e[t];(!(oe.call(e,t)&&pt(h,o))||o===n&&!(t in e))&&Lt(e,t,o)}function Gr(e,t){for(var o=e.length;o--;)if(pt(e[o][0],t))return o;return-1}function Jc(e,t,o,h){return Yt(e,function(c,p,m){t(h,c,o(c),m)}),h}function hs(e,t){return e&&xt(t,Ae(t),e)}function Qc(e,t){return e&&xt(t,Me(t),e)}function Lt(e,t,o){t=="__proto__"&&Cr?Cr(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}function Vi(e,t){for(var o=-1,h=t.length,c=A(h),p=e==null;++o<h;)c[o]=p?n:Ta(e,t[o]);return c}function nn(e,t,o){return e===e&&(o!==n&&(e=e<=o?e:o),t!==n&&(e=e>=t?e:t)),e}function Qe(e,t,o,h,c,p){var m,_=t&y,E=t&x,R=t&S;if(o&&(m=c?o(e,h,c,p):o(e)),m!==n)return m;if(!ve(e))return e;var T=j(e);if(T){if(m=Bd(e),!_)return Oe(e,m)}else{var L=Le(e),O=L==fr||L==fo;if(Xt(e))return Fs(e,_);if(L==Ct||L==hn||O&&!c){if(m=E||O?{}:Js(e),!_)return E?Dd(e,Qc(m,e)):Ld(e,hs(m,e))}else{if(!le[L])return c?e:{};m=zd(e,L,_)}}p||(p=new gt);var z=p.get(e);if(z)return z;p.set(e,m),Ru(e)?e.forEach(function(q){m.add(Qe(q,t,o,q,e,p))}):Su(e)&&e.forEach(function(q,te){m.set(te,Qe(q,t,o,te,e,p))});var Y=R?E?ga:da:E?Me:Ae,Q=T?n:Y(e);return Xe(Q||e,function(q,te){Q&&(te=q,q=e[te]),Vn(m,te,Qe(q,t,o,te,e,p))}),m}function ed(e){var t=Ae(e);return function(o){return fs(o,e,t)}}function fs(e,t,o){var h=o.length;if(e==null)return!h;for(e=fe(e);h--;){var c=o[h],p=t[c],m=e[c];if(m===n&&!(c in e)||!p(m))return!1}return!0}function ls(e,t,o){if(typeof e!="function")throw new je(f);return tr(function(){e.apply(n,o)},t)}function Zn(e,t,o,h){var c=-1,p=pr,m=!0,_=e.length,E=[],R=t.length;if(!_)return E;o&&(t=ge(t,ze(o))),h?(p=Ii,m=!1):t.length>=a&&(p=zn,m=!1,t=new tn(t));e:for(;++c<_;){var T=e[c],L=o==null?T:o(T);if(T=h||T!==0?T:0,m&&L===L){for(var O=R;O--;)if(t[O]===L)continue e;E.push(T)}else p(t,L,h)||E.push(T)}return E}var Yt=Ms(Et),cs=Ms(Xi,!0);function td(e,t){var o=!0;return Yt(e,function(h,c,p){return o=!!t(h,c,p),o}),o}function Fr(e,t,o){for(var h=-1,c=e.length;++h<c;){var p=e[h],m=t(p);if(m!=null&&(_===n?m===m&&!He(m):o(m,_)))var _=m,E=p}return E}function nd(e,t,o,h){var c=e.length;for(o=J(o),o<0&&(o=-o>c?0:c+o),h=h===n||h>c?c:J(h),h<0&&(h+=c),h=o>h?0:Lu(h);o<h;)e[o++]=t;return e}function ds(e,t){var o=[];return Yt(e,function(h,c,p){t(h,c,p)&&o.push(h)}),o}function Ce(e,t,o,h,c){var p=-1,m=e.length;for(o||(o=Hd),c||(c=[]);++p<m;){var _=e[p];t>0&&o(_)?t>1?Ce(_,t-1,o,h,c):Wt(c,_):h||(c[c.length]=_)}return c}var Zi=Us(),gs=Us(!0);function Et(e,t){return e&&Zi(e,t,Ae)}function Xi(e,t){return e&&gs(e,t,Ae)}function Ir(e,t){return zt(t,function(o){return Ft(e[o])})}function rn(e,t){t=Vt(t,e);for(var o=0,h=t.length;e!=null&&o<h;)e=e[At(t[o++])];return o&&o==h?e:n}function ps(e,t,o){var h=t(e);return j(e)?h:Wt(h,o(e))}function Ge(e){return e==null?e===n?Nf:Lf:Qt&&Qt in fe(e)?Md(e):jd(e)}function ji(e,t){return e>t}function rd(e,t){return e!=null&&oe.call(e,t)}function id(e,t){return e!=null&&t in fe(e)}function ad(e,t,o){return e>=Te(t,o)&&e<Ee(t,o)}function Ji(e,t,o){for(var h=o?Ii:pr,c=e[0].length,p=e.length,m=p,_=A(p),E=1/0,R=[];m--;){var T=e[m];m&&t&&(T=ge(T,ze(t))),E=Te(T.length,E),_[m]=!o&&(t||c>=120&&T.length>=120)?new tn(m&&T):n}T=e[0];var L=-1,O=_[0];e:for(;++L<c&&R.length<E;){var z=T[L],Y=t?t(z):z;if(z=o||z!==0?z:0,!(O?zn(O,Y):h(R,Y,o))){for(m=p;--m;){var Q=_[m];if(!(Q?zn(Q,Y):h(e[m],Y,o)))continue e}O&&O.push(Y),R.push(z)}}return R}function od(e,t,o,h){return Et(e,function(c,p,m){t(h,o(c),p,m)}),h}function Xn(e,t,o){t=Vt(t,e),e=nu(e,t);var h=e==null?e:e[At(tt(t))];return h==null?n:Be(h,e,o)}function vs(e){return me(e)&&Ge(e)==hn}function sd(e){return me(e)&&Ge(e)==Bn}function ud(e){return me(e)&&Ge(e)==On}function jn(e,t,o,h,c){return e===t?!0:e==null||t==null||!me(e)&&!me(t)?e!==e&&t!==t:hd(e,t,o,h,jn,c)}function hd(e,t,o,h,c,p){var m=j(e),_=j(t),E=m?ur:Le(e),R=_?ur:Le(t);E=E==hn?Ct:E,R=R==hn?Ct:R;var T=E==Ct,L=R==Ct,O=E==R;if(O&&Xt(e)){if(!Xt(t))return!1;m=!0,T=!1}if(O&&!T)return p||(p=new gt),m||xn(e)?Zs(e,t,o,h,c,p):Od(e,t,E,o,h,c,p);if(!(o&D)){var z=T&&oe.call(e,"__wrapped__"),Y=L&&oe.call(t,"__wrapped__");if(z||Y){var Q=z?e.value():e,q=Y?t.value():t;return p||(p=new gt),c(Q,q,o,h,p)}}return O?(p||(p=new gt),Pd(e,t,o,h,c,p)):!1}function fd(e){return me(e)&&Le(e)==lt}function Qi(e,t,o,h){var c=o.length,p=c,m=!h;if(e==null)return!p;for(e=fe(e);c--;){var _=o[c];if(m&&_[2]?_[1]!==e[_[0]]:!(_[0]in e))return!1}for(;++c<p;){_=o[c];var E=_[0],R=e[E],T=_[1];if(m&&_[2]){if(R===n&&!(E in e))return!1}else{var L=new gt;if(h)var O=h(R,T,E,e,t,L);if(!(O===n?jn(T,R,D|N,h,L):O))return!1}}return!0}function ms(e){if(!ve(e)||Yd(e))return!1;var t=Ft(e)?fc:el;return t.test(on(e))}function ld(e){return me(e)&&Ge(e)==Mn}function cd(e){return me(e)&&Le(e)==ct}function dd(e){return me(e)&&jr(e.length)&&!!ce[Ge(e)]}function ys(e){return typeof e=="function"?e:e==null?Ue:typeof e=="object"?j(e)?bs(e[0],e[1]):_s(e):$u(e)}function ea(e){if(!er(e))return vc(e);var t=[];for(var o in fe(e))oe.call(e,o)&&o!="constructor"&&t.push(o);return t}function gd(e){if(!ve(e))return Xd(e);var t=er(e),o=[];for(var h in e)h=="constructor"&&(t||!oe.call(e,h))||o.push(h);return o}function ta(e,t){return e<t}function ws(e,t){var o=-1,h=Pe(e)?A(e.length):[];return Yt(e,function(c,p,m){h[++o]=t(c,p,m)}),h}function _s(e){var t=va(e);return t.length==1&&t[0][2]?eu(t[0][0],t[0][1]):function(o){return o===e||Qi(o,e,t)}}function bs(e,t){return ya(e)&&Qs(t)?eu(At(e),t):function(o){var h=Ta(o,e);return h===n&&h===t?La(o,e):jn(t,h,D|N)}}function kr(e,t,o,h,c){e!==t&&Zi(t,function(p,m){if(c||(c=new gt),ve(p))pd(e,t,m,o,kr,h,c);else{var _=h?h(_a(e,m),p,m+"",e,t,c):n;_===n&&(_=p),qi(e,m,_)}},Me)}function pd(e,t,o,h,c,p,m){var _=_a(e,o),E=_a(t,o),R=m.get(E);if(R){qi(e,o,R);return}var T=p?p(_,E,o+"",e,t,m):n,L=T===n;if(L){var O=j(E),z=!O&&Xt(E),Y=!O&&!z&&xn(E);T=E,O||z||Y?j(_)?T=_:ye(_)?T=Oe(_):z?(L=!1,T=Fs(E,!0)):Y?(L=!1,T=Is(E,!0)):T=[]:nr(E)||sn(E)?(T=_,sn(_)?T=Du(_):(!ve(_)||Ft(_))&&(T=Js(E))):L=!1}L&&(m.set(E,T),c(T,E,h,p,m),m.delete(E)),qi(e,o,T)}function Es(e,t){var o=e.length;if(o)return t+=t<0?o:0,Gt(t,o)?e[t]:n}function xs(e,t,o){t.length?t=ge(t,function(p){return j(p)?function(m){return rn(m,p.length===1?p[0]:p)}:p}):t=[Ue];var h=-1;t=ge(t,ze(H()));var c=ws(e,function(p,m,_){var E=ge(t,function(R){return R(p)});return{criteria:E,index:++h,value:p}});return zl(c,function(p,m){return Td(p,m,o)})}function vd(e,t){return As(e,t,function(o,h){return La(e,h)})}function As(e,t,o){for(var h=-1,c=t.length,p={};++h<c;){var m=t[h],_=rn(e,m);o(_,m)&&Jn(p,Vt(m,e),_)}return p}function md(e){return function(t){return rn(t,e)}}function na(e,t,o,h){var c=h?Bl:cn,p=-1,m=t.length,_=e;for(e===t&&(t=Oe(t)),o&&(_=ge(e,ze(o)));++p<m;)for(var E=0,R=t[p],T=o?o(R):R;(E=c(_,T,E,h))>-1;)_!==e&&Sr.call(_,E,1),Sr.call(e,E,1);return e}function Ss(e,t){for(var o=e?t.length:0,h=o-1;o--;){var c=t[o];if(o==h||c!==p){var p=c;Gt(c)?Sr.call(e,c,1):oa(e,c)}}return e}function ra(e,t){return e+Tr(as()*(t-e+1))}function yd(e,t,o,h){for(var c=-1,p=Ee(Rr((t-e)/(o||1)),0),m=A(p);p--;)m[h?p:++c]=e,e+=o;return m}function ia(e,t){var o="";if(!e||t<1||t>_e)return o;do t%2&&(o+=e),t=Tr(t/2),t&&(e+=e);while(t);return o}function ee(e,t){return ba(tu(e,t,Ue),e+"")}function wd(e){return us(An(e))}function _d(e,t){var o=An(e);return Kr(o,nn(t,0,o.length))}function Jn(e,t,o,h){if(!ve(e))return e;t=Vt(t,e);for(var c=-1,p=t.length,m=p-1,_=e;_!=null&&++c<p;){var E=At(t[c]),R=o;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(c!=m){var T=_[E];R=h?h(T,E,_):n,R===n&&(R=ve(T)?T:Gt(t[c+1])?[]:{})}Vn(_,E,R),_=_[E]}return e}var Cs=Lr?function(e,t){return Lr.set(e,t),e}:Ue,bd=Cr?function(e,t){return Cr(e,"toString",{configurable:!0,enumerable:!1,value:Na(t),writable:!0})}:Ue;function Ed(e){return Kr(An(e))}function et(e,t,o){var h=-1,c=e.length;t<0&&(t=-t>c?0:c+t),o=o>c?c:o,o<0&&(o+=c),c=t>o?0:o-t>>>0,t>>>=0;for(var p=A(c);++h<c;)p[h]=e[h+t];return p}function xd(e,t){var o;return Yt(e,function(h,c,p){return o=t(h,c,p),!o}),!!o}function Or(e,t,o){var h=0,c=e==null?h:e.length;if(typeof t=="number"&&t===t&&c<=Sf){for(;h<c;){var p=h+c>>>1,m=e[p];m!==null&&!He(m)&&(o?m<=t:m<t)?h=p+1:c=p}return c}return aa(e,t,Ue,o)}function aa(e,t,o,h){var c=0,p=e==null?0:e.length;if(p===0)return 0;t=o(t);for(var m=t!==t,_=t===null,E=He(t),R=t===n;c<p;){var T=Tr((c+p)/2),L=o(e[T]),O=L!==n,z=L===null,Y=L===L,Q=He(L);if(m)var q=h||Y;else R?q=Y&&(h||O):_?q=Y&&O&&(h||!z):E?q=Y&&O&&!z&&(h||!Q):z||Q?q=!1:q=h?L<=t:L<t;q?c=T+1:p=T}return Te(p,Af)}function Rs(e,t){for(var o=-1,h=e.length,c=0,p=[];++o<h;){var m=e[o],_=t?t(m):m;if(!o||!pt(_,E)){var E=_;p[c++]=m===0?0:m}}return p}function Ts(e){return typeof e=="number"?e:He(e)?ft:+e}function We(e){if(typeof e=="string")return e;if(j(e))return ge(e,We)+"";if(He(e))return os?os.call(e):"";var t=e+"";return t=="0"&&1/e==-Ve?"-0":t}function qt(e,t,o){var h=-1,c=pr,p=e.length,m=!0,_=[],E=_;if(o)m=!1,c=Ii;else if(p>=a){var R=t?null:Id(e);if(R)return mr(R);m=!1,c=zn,E=new tn}else E=t?[]:_;e:for(;++h<p;){var T=e[h],L=t?t(T):T;if(T=o||T!==0?T:0,m&&L===L){for(var O=E.length;O--;)if(E[O]===L)continue e;t&&E.push(L),_.push(T)}else c(E,L,o)||(E!==_&&E.push(L),_.push(T))}return _}function oa(e,t){return t=Vt(t,e),e=nu(e,t),e==null||delete e[At(tt(t))]}function Ls(e,t,o,h){return Jn(e,t,o(rn(e,t)),h)}function Pr(e,t,o,h){for(var c=e.length,p=h?c:-1;(h?p--:++p<c)&&t(e[p],p,e););return o?et(e,h?0:p,h?p+1:c):et(e,h?p+1:0,h?c:p)}function Ds(e,t){var o=e;return o instanceof ne&&(o=o.value()),ki(t,function(h,c){return c.func.apply(c.thisArg,Wt([h],c.args))},o)}function sa(e,t,o){var h=e.length;if(h<2)return h?qt(e[0]):[];for(var c=-1,p=A(h);++c<h;)for(var m=e[c],_=-1;++_<h;)_!=c&&(p[c]=Zn(p[c]||m,e[_],t,o));return qt(Ce(p,1),t,o)}function Ns(e,t,o){for(var h=-1,c=e.length,p=t.length,m={};++h<c;){var _=h<p?t[h]:n;o(m,e[h],_)}return m}function ua(e){return ye(e)?e:[]}function ha(e){return typeof e=="function"?e:Ue}function Vt(e,t){return j(e)?e:ya(e,t)?[e]:ou(ae(e))}var Ad=ee;function Zt(e,t,o){var h=e.length;return o=o===n?h:o,!t&&o>=h?e:et(e,t,o)}var Gs=lc||function(e){return Se.clearTimeout(e)};function Fs(e,t){if(t)return e.slice();var o=e.length,h=es?es(o):new e.constructor(o);return e.copy(h),h}function fa(e){var t=new e.constructor(e.byteLength);return new xr(t).set(new xr(e)),t}function Sd(e,t){var o=t?fa(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function Cd(e){var t=new e.constructor(e.source,vo.exec(e));return t.lastIndex=e.lastIndex,t}function Rd(e){return qn?fe(qn.call(e)):{}}function Is(e,t){var o=t?fa(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function ks(e,t){if(e!==t){var o=e!==n,h=e===null,c=e===e,p=He(e),m=t!==n,_=t===null,E=t===t,R=He(t);if(!_&&!R&&!p&&e>t||p&&m&&E&&!_&&!R||h&&m&&E||!o&&E||!c)return 1;if(!h&&!p&&!R&&e<t||R&&o&&c&&!h&&!p||_&&o&&c||!m&&c||!E)return-1}return 0}function Td(e,t,o){for(var h=-1,c=e.criteria,p=t.criteria,m=c.length,_=o.length;++h<m;){var E=ks(c[h],p[h]);if(E){if(h>=_)return E;var R=o[h];return E*(R=="desc"?-1:1)}}return e.index-t.index}function Os(e,t,o,h){for(var c=-1,p=e.length,m=o.length,_=-1,E=t.length,R=Ee(p-m,0),T=A(E+R),L=!h;++_<E;)T[_]=t[_];for(;++c<m;)(L||c<p)&&(T[o[c]]=e[c]);for(;R--;)T[_++]=e[c++];return T}function Ps(e,t,o,h){for(var c=-1,p=e.length,m=-1,_=o.length,E=-1,R=t.length,T=Ee(p-_,0),L=A(T+R),O=!h;++c<T;)L[c]=e[c];for(var z=c;++E<R;)L[z+E]=t[E];for(;++m<_;)(O||c<p)&&(L[z+o[m]]=e[c++]);return L}function Oe(e,t){var o=-1,h=e.length;for(t||(t=A(h));++o<h;)t[o]=e[o];return t}function xt(e,t,o,h){var c=!o;o||(o={});for(var p=-1,m=t.length;++p<m;){var _=t[p],E=h?h(o[_],e[_],_,o,e):n;E===n&&(E=e[_]),c?Lt(o,_,E):Vn(o,_,E)}return o}function Ld(e,t){return xt(e,ma(e),t)}function Dd(e,t){return xt(e,Xs(e),t)}function Mr(e,t){return function(o,h){var c=j(o)?kl:Jc,p=t?t():{};return c(o,e,H(h,2),p)}}function _n(e){return ee(function(t,o){var h=-1,c=o.length,p=c>1?o[c-1]:n,m=c>2?o[2]:n;for(p=e.length>3&&typeof p=="function"?(c--,p):n,m&&Fe(o[0],o[1],m)&&(p=c<3?n:p,c=1),t=fe(t);++h<c;){var _=o[h];_&&e(t,_,h,p)}return t})}function Ms(e,t){return function(o,h){if(o==null)return o;if(!Pe(o))return e(o,h);for(var c=o.length,p=t?c:-1,m=fe(o);(t?p--:++p<c)&&h(m[p],p,m)!==!1;);return o}}function Us(e){return function(t,o,h){for(var c=-1,p=fe(t),m=h(t),_=m.length;_--;){var E=m[e?_:++c];if(o(p[E],E,p)===!1)break}return t}}function Nd(e,t,o){var h=t&I,c=Qn(e);function p(){var m=this&&this!==Se&&this instanceof p?c:e;return m.apply(h?o:this,arguments)}return p}function $s(e){return function(t){t=ae(t);var o=dn(t)?dt(t):n,h=o?o[0]:t.charAt(0),c=o?Zt(o,1).join(""):t.slice(1);return h[e]()+c}}function bn(e){return function(t){return ki(Mu(Pu(t).replace(bl,"")),e,"")}}function Qn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var o=wn(e.prototype),h=e.apply(o,t);return ve(h)?h:o}}function Gd(e,t,o){var h=Qn(e);function c(){for(var p=arguments.length,m=A(p),_=p,E=En(c);_--;)m[_]=arguments[_];var R=p<3&&m[0]!==E&&m[p-1]!==E?[]:Ht(m,E);if(p-=R.length,p<o)return Ks(e,t,Ur,c.placeholder,n,m,R,n,n,o-p);var T=this&&this!==Se&&this instanceof c?h:e;return Be(T,this,m)}return c}function Bs(e){return function(t,o,h){var c=fe(t);if(!Pe(t)){var p=H(o,3);t=Ae(t),o=function(_){return p(c[_],_,c)}}var m=e(t,o,h);return m>-1?c[p?t[m]:m]:n}}function zs(e){return Nt(function(t){var o=t.length,h=o,c=Je.prototype.thru;for(e&&t.reverse();h--;){var p=t[h];if(typeof p!="function")throw new je(f);if(c&&!m&&Wr(p)=="wrapper")var m=new Je([],!0)}for(h=m?h:o;++h<o;){p=t[h];var _=Wr(p),E=_=="wrapper"?pa(p):n;E&&wa(E[0])&&E[1]==(de|B|he|wt)&&!E[4].length&&E[9]==1?m=m[Wr(E[0])].apply(m,E[3]):m=p.length==1&&wa(p)?m[_]():m.thru(p)}return function(){var R=arguments,T=R[0];if(m&&R.length==1&&j(T))return m.plant(T).value();for(var L=0,O=o?t[L].apply(this,R):T;++L<o;)O=t[L].call(this,O);return O}})}function Ur(e,t,o,h,c,p,m,_,E,R){var T=t&de,L=t&I,O=t&$,z=t&(B|W),Y=t&ke,Q=O?n:Qn(e);function q(){for(var te=arguments.length,re=A(te),Ke=te;Ke--;)re[Ke]=arguments[Ke];if(z)var Ie=En(q),Ye=Hl(re,Ie);if(h&&(re=Os(re,h,c,z)),p&&(re=Ps(re,p,m,z)),te-=Ye,z&&te<R){var we=Ht(re,Ie);return Ks(e,t,Ur,q.placeholder,o,re,we,_,E,R-te)}var vt=L?o:this,kt=O?vt[e]:e;return te=re.length,_?re=Jd(re,_):Y&&te>1&&re.reverse(),T&&E<te&&(re.length=E),this&&this!==Se&&this instanceof q&&(kt=Q||Qn(kt)),kt.apply(vt,re)}return q}function Ws(e,t){return function(o,h){return od(o,e,t(h),{})}}function $r(e,t){return function(o,h){var c;if(o===n&&h===n)return t;if(o!==n&&(c=o),h!==n){if(c===n)return h;typeof o=="string"||typeof h=="string"?(o=We(o),h=We(h)):(o=Ts(o),h=Ts(h)),c=e(o,h)}return c}}function la(e){return Nt(function(t){return t=ge(t,ze(H())),ee(function(o){var h=this;return e(t,function(c){return Be(c,h,o)})})})}function Br(e,t){t=t===n?" ":We(t);var o=t.length;if(o<2)return o?ia(t,e):t;var h=ia(t,Rr(e/gn(t)));return dn(t)?Zt(dt(h),0,e).join(""):h.slice(0,e)}function Fd(e,t,o,h){var c=t&I,p=Qn(e);function m(){for(var _=-1,E=arguments.length,R=-1,T=h.length,L=A(T+E),O=this&&this!==Se&&this instanceof m?p:e;++R<T;)L[R]=h[R];for(;E--;)L[R++]=arguments[++_];return Be(O,c?o:this,L)}return m}function Hs(e){return function(t,o,h){return h&&typeof h!="number"&&Fe(t,o,h)&&(o=h=n),t=It(t),o===n?(o=t,t=0):o=It(o),h=h===n?t<o?1:-1:It(h),yd(t,o,h,e)}}function zr(e){return function(t,o){return typeof t=="string"&&typeof o=="string"||(t=nt(t),o=nt(o)),e(t,o)}}function Ks(e,t,o,h,c,p,m,_,E,R){var T=t&B,L=T?m:n,O=T?n:m,z=T?p:n,Y=T?n:p;t|=T?he:$e,t&=~(T?$e:he),t&P||(t&=~(I|$));var Q=[e,t,c,z,L,Y,O,_,E,R],q=o.apply(n,Q);return wa(e)&&ru(q,Q),q.placeholder=h,iu(q,e,t)}function ca(e){var t=be[e];return function(o,h){if(o=nt(o),h=h==null?0:Te(J(h),292),h&&is(o)){var c=(ae(o)+"e").split("e"),p=t(c[0]+"e"+(+c[1]+h));return c=(ae(p)+"e").split("e"),+(c[0]+"e"+(+c[1]-h))}return t(o)}}var Id=mn&&1/mr(new mn([,-0]))[1]==Ve?function(e){return new mn(e)}:Ia;function Ys(e){return function(t){var o=Le(t);return o==lt?zi(t):o==ct?jl(t):Wl(t,e(t))}}function Dt(e,t,o,h,c,p,m,_){var E=t&$;if(!E&&typeof e!="function")throw new je(f);var R=h?h.length:0;if(R||(t&=~(he|$e),h=c=n),m=m===n?m:Ee(J(m),0),_=_===n?_:J(_),R-=c?c.length:0,t&$e){var T=h,L=c;h=c=n}var O=E?n:pa(e),z=[e,t,o,h,c,T,L,p,m,_];if(O&&Zd(z,O),e=z[0],t=z[1],o=z[2],h=z[3],c=z[4],_=z[9]=z[9]===n?E?0:e.length:Ee(z[9]-R,0),!_&&t&(B|W)&&(t&=~(B|W)),!t||t==I)var Y=Nd(e,t,o);else t==B||t==W?Y=Gd(e,t,_):(t==he||t==(I|he))&&!c.length?Y=Fd(e,t,o,h):Y=Ur.apply(n,z);var Q=O?Cs:ru;return iu(Q(Y,z),e,t)}function qs(e,t,o,h){return e===n||pt(e,vn[o])&&!oe.call(h,o)?t:e}function Vs(e,t,o,h,c,p){return ve(e)&&ve(t)&&(p.set(t,e),kr(e,t,n,Vs,p),p.delete(t)),e}function kd(e){return nr(e)?n:e}function Zs(e,t,o,h,c,p){var m=o&D,_=e.length,E=t.length;if(_!=E&&!(m&&E>_))return!1;var R=p.get(e),T=p.get(t);if(R&&T)return R==t&&T==e;var L=-1,O=!0,z=o&N?new tn:n;for(p.set(e,t),p.set(t,e);++L<_;){var Y=e[L],Q=t[L];if(h)var q=m?h(Q,Y,L,t,e,p):h(Y,Q,L,e,t,p);if(q!==n){if(q)continue;O=!1;break}if(z){if(!Oi(t,function(te,re){if(!zn(z,re)&&(Y===te||c(Y,te,o,h,p)))return z.push(re)})){O=!1;break}}else if(!(Y===Q||c(Y,Q,o,h,p))){O=!1;break}}return p.delete(e),p.delete(t),O}function Od(e,t,o,h,c,p,m){switch(o){case fn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Bn:return!(e.byteLength!=t.byteLength||!p(new xr(e),new xr(t)));case kn:case On:case Pn:return pt(+e,+t);case hr:return e.name==t.name&&e.message==t.message;case Mn:case Un:return e==t+"";case lt:var _=zi;case ct:var E=h&D;if(_||(_=mr),e.size!=t.size&&!E)return!1;var R=m.get(e);if(R)return R==t;h|=N,m.set(e,t);var T=Zs(_(e),_(t),h,c,p,m);return m.delete(e),T;case lr:if(qn)return qn.call(e)==qn.call(t)}return!1}function Pd(e,t,o,h,c,p){var m=o&D,_=da(e),E=_.length,R=da(t),T=R.length;if(E!=T&&!m)return!1;for(var L=E;L--;){var O=_[L];if(!(m?O in t:oe.call(t,O)))return!1}var z=p.get(e),Y=p.get(t);if(z&&Y)return z==t&&Y==e;var Q=!0;p.set(e,t),p.set(t,e);for(var q=m;++L<E;){O=_[L];var te=e[O],re=t[O];if(h)var Ke=m?h(re,te,O,t,e,p):h(te,re,O,e,t,p);if(!(Ke===n?te===re||c(te,re,o,h,p):Ke)){Q=!1;break}q||(q=O=="constructor")}if(Q&&!q){var Ie=e.constructor,Ye=t.constructor;Ie!=Ye&&"constructor"in e&&"constructor"in t&&!(typeof Ie=="function"&&Ie instanceof Ie&&typeof Ye=="function"&&Ye instanceof Ye)&&(Q=!1)}return p.delete(e),p.delete(t),Q}function Nt(e){return ba(tu(e,n,fu),e+"")}function da(e){return ps(e,Ae,ma)}function ga(e){return ps(e,Me,Xs)}var pa=Lr?function(e){return Lr.get(e)}:Ia;function Wr(e){for(var t=e.name+"",o=yn[t],h=oe.call(yn,t)?o.length:0;h--;){var c=o[h],p=c.func;if(p==null||p==e)return c.name}return t}function En(e){var t=oe.call(g,"placeholder")?g:e;return t.placeholder}function H(){var e=g.iteratee||Ga;return e=e===Ga?ys:e,arguments.length?e(arguments[0],arguments[1]):e}function Hr(e,t){var o=e.__data__;return Kd(t)?o[typeof t=="string"?"string":"hash"]:o.map}function va(e){for(var t=Ae(e),o=t.length;o--;){var h=t[o],c=e[h];t[o]=[h,c,Qs(c)]}return t}function an(e,t){var o=Vl(e,t);return ms(o)?o:n}function Md(e){var t=oe.call(e,Qt),o=e[Qt];try{e[Qt]=n;var h=!0}catch{}var c=br.call(e);return h&&(t?e[Qt]=o:delete e[Qt]),c}var ma=Hi?function(e){return e==null?[]:(e=fe(e),zt(Hi(e),function(t){return ns.call(e,t)}))}:ka,Xs=Hi?function(e){for(var t=[];e;)Wt(t,ma(e)),e=Ar(e);return t}:ka,Le=Ge;(Ki&&Le(new Ki(new ArrayBuffer(1)))!=fn||Hn&&Le(new Hn)!=lt||Yi&&Le(Yi.resolve())!=lo||mn&&Le(new mn)!=ct||Kn&&Le(new Kn)!=$n)&&(Le=function(e){var t=Ge(e),o=t==Ct?e.constructor:n,h=o?on(o):"";if(h)switch(h){case _c:return fn;case bc:return lt;case Ec:return lo;case xc:return ct;case Ac:return $n}return t});function Ud(e,t,o){for(var h=-1,c=o.length;++h<c;){var p=o[h],m=p.size;switch(p.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Te(t,e+m);break;case"takeRight":e=Ee(e,t-m);break}}return{start:e,end:t}}function $d(e){var t=e.match(Yf);return t?t[1].split(qf):[]}function js(e,t,o){t=Vt(t,e);for(var h=-1,c=t.length,p=!1;++h<c;){var m=At(t[h]);if(!(p=e!=null&&o(e,m)))break;e=e[m]}return p||++h!=c?p:(c=e==null?0:e.length,!!c&&jr(c)&&Gt(m,c)&&(j(e)||sn(e)))}function Bd(e){var t=e.length,o=new e.constructor(t);return t&&typeof e[0]=="string"&&oe.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function Js(e){return typeof e.constructor=="function"&&!er(e)?wn(Ar(e)):{}}function zd(e,t,o){var h=e.constructor;switch(t){case Bn:return fa(e);case kn:case On:return new h(+e);case fn:return Sd(e,o);case vi:case mi:case yi:case wi:case _i:case bi:case Ei:case xi:case Ai:return Is(e,o);case lt:return new h;case Pn:case Un:return new h(e);case Mn:return Cd(e);case ct:return new h;case lr:return Rd(e)}}function Wd(e,t){var o=t.length;if(!o)return e;var h=o-1;return t[h]=(o>1?"& ":"")+t[h],t=t.join(o>2?", ":" "),e.replace(Kf,`{
/* [wrapped with `+t+`] */
`)}function Hd(e){return j(e)||sn(e)||!!(rs&&e&&e[rs])}function Gt(e,t){var o=typeof e;return t=t??_e,!!t&&(o=="number"||o!="symbol"&&nl.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e,t,o){if(!ve(o))return!1;var h=typeof t;return(h=="number"?Pe(o)&&Gt(t,o.length):h=="string"&&t in o)?pt(o[t],e):!1}function ya(e,t){if(j(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||He(e)?!0:Bf.test(e)||!$f.test(e)||t!=null&&e in fe(t)}function Kd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function wa(e){var t=Wr(e),o=g[t];if(typeof o!="function"||!(t in ne.prototype))return!1;if(e===o)return!0;var h=pa(o);return!!h&&e===h[0]}function Yd(e){return!!Qo&&Qo in e}var qd=wr?Ft:Oa;function er(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||vn;return e===o}function Qs(e){return e===e&&!ve(e)}function eu(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==n||e in fe(o))}}function Vd(e){var t=Zr(e,function(h){return o.size===v&&o.clear(),h}),o=t.cache;return t}function Zd(e,t){var o=e[1],h=t[1],c=o|h,p=c<(I|$|de),m=h==de&&o==B||h==de&&o==wt&&e[7].length<=t[8]||h==(de|wt)&&t[7].length<=t[8]&&o==B;if(!(p||m))return e;h&I&&(e[2]=t[2],c|=o&I?0:P);var _=t[3];if(_){var E=e[3];e[3]=E?Os(E,_,t[4]):_,e[4]=E?Ht(e[3],w):t[4]}return _=t[5],_&&(E=e[5],e[5]=E?Ps(E,_,t[6]):_,e[6]=E?Ht(e[5],w):t[6]),_=t[7],_&&(e[7]=_),h&de&&(e[8]=e[8]==null?t[8]:Te(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=c,e}function Xd(e){var t=[];if(e!=null)for(var o in fe(e))t.push(o);return t}function jd(e){return br.call(e)}function tu(e,t,o){return t=Ee(t===n?e.length-1:t,0),function(){for(var h=arguments,c=-1,p=Ee(h.length-t,0),m=A(p);++c<p;)m[c]=h[t+c];c=-1;for(var _=A(t+1);++c<t;)_[c]=h[c];return _[t]=o(m),Be(e,this,_)}}function nu(e,t){return t.length<2?e:rn(e,et(t,0,-1))}function Jd(e,t){for(var o=e.length,h=Te(t.length,o),c=Oe(e);h--;){var p=t[h];e[h]=Gt(p,o)?c[p]:n}return e}function _a(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ru=au(Cs),tr=dc||function(e,t){return Se.setTimeout(e,t)},ba=au(bd);function iu(e,t,o){var h=t+"";return ba(e,Wd(h,Qd($d(h),o)))}function au(e){var t=0,o=0;return function(){var h=mc(),c=Fn-(h-o);if(o=h,c>0){if(++t>=Gn)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Kr(e,t){var o=-1,h=e.length,c=h-1;for(t=t===n?h:t;++o<t;){var p=ra(o,c),m=e[p];e[p]=e[o],e[o]=m}return e.length=t,e}var ou=Vd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(zf,function(o,h,c,p){t.push(c?p.replace(Xf,"$1"):h||o)}),t});function At(e){if(typeof e=="string"||He(e))return e;var t=e+"";return t=="0"&&1/e==-Ve?"-0":t}function on(e){if(e!=null){try{return _r.call(e)}catch{}try{return e+""}catch{}}return""}function Qd(e,t){return Xe(Cf,function(o){var h="_."+o[0];t&o[1]&&!pr(e,h)&&e.push(h)}),e.sort()}function su(e){if(e instanceof ne)return e.clone();var t=new Je(e.__wrapped__,e.__chain__);return t.__actions__=Oe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function eg(e,t,o){(o?Fe(e,t,o):t===n)?t=1:t=Ee(J(t),0);var h=e==null?0:e.length;if(!h||t<1)return[];for(var c=0,p=0,m=A(Rr(h/t));c<h;)m[p++]=et(e,c,c+=t);return m}function tg(e){for(var t=-1,o=e==null?0:e.length,h=0,c=[];++t<o;){var p=e[t];p&&(c[h++]=p)}return c}function ng(){var e=arguments.length;if(!e)return[];for(var t=A(e-1),o=arguments[0],h=e;h--;)t[h-1]=arguments[h];return Wt(j(o)?Oe(o):[o],Ce(t,1))}var rg=ee(function(e,t){return ye(e)?Zn(e,Ce(t,1,ye,!0)):[]}),ig=ee(function(e,t){var o=tt(t);return ye(o)&&(o=n),ye(e)?Zn(e,Ce(t,1,ye,!0),H(o,2)):[]}),ag=ee(function(e,t){var o=tt(t);return ye(o)&&(o=n),ye(e)?Zn(e,Ce(t,1,ye,!0),n,o):[]});function og(e,t,o){var h=e==null?0:e.length;return h?(t=o||t===n?1:J(t),et(e,t<0?0:t,h)):[]}function sg(e,t,o){var h=e==null?0:e.length;return h?(t=o||t===n?1:J(t),t=h-t,et(e,0,t<0?0:t)):[]}function ug(e,t){return e&&e.length?Pr(e,H(t,3),!0,!0):[]}function hg(e,t){return e&&e.length?Pr(e,H(t,3),!0):[]}function fg(e,t,o,h){var c=e==null?0:e.length;return c?(o&&typeof o!="number"&&Fe(e,t,o)&&(o=0,h=c),nd(e,t,o,h)):[]}function uu(e,t,o){var h=e==null?0:e.length;if(!h)return-1;var c=o==null?0:J(o);return c<0&&(c=Ee(h+c,0)),vr(e,H(t,3),c)}function hu(e,t,o){var h=e==null?0:e.length;if(!h)return-1;var c=h-1;return o!==n&&(c=J(o),c=o<0?Ee(h+c,0):Te(c,h-1)),vr(e,H(t,3),c,!0)}function fu(e){var t=e==null?0:e.length;return t?Ce(e,1):[]}function lg(e){var t=e==null?0:e.length;return t?Ce(e,Ve):[]}function cg(e,t){var o=e==null?0:e.length;return o?(t=t===n?1:J(t),Ce(e,t)):[]}function dg(e){for(var t=-1,o=e==null?0:e.length,h={};++t<o;){var c=e[t];h[c[0]]=c[1]}return h}function lu(e){return e&&e.length?e[0]:n}function gg(e,t,o){var h=e==null?0:e.length;if(!h)return-1;var c=o==null?0:J(o);return c<0&&(c=Ee(h+c,0)),cn(e,t,c)}function pg(e){var t=e==null?0:e.length;return t?et(e,0,-1):[]}var vg=ee(function(e){var t=ge(e,ua);return t.length&&t[0]===e[0]?Ji(t):[]}),mg=ee(function(e){var t=tt(e),o=ge(e,ua);return t===tt(o)?t=n:o.pop(),o.length&&o[0]===e[0]?Ji(o,H(t,2)):[]}),yg=ee(function(e){var t=tt(e),o=ge(e,ua);return t=typeof t=="function"?t:n,t&&o.pop(),o.length&&o[0]===e[0]?Ji(o,n,t):[]});function wg(e,t){return e==null?"":pc.call(e,t)}function tt(e){var t=e==null?0:e.length;return t?e[t-1]:n}function _g(e,t,o){var h=e==null?0:e.length;if(!h)return-1;var c=h;return o!==n&&(c=J(o),c=c<0?Ee(h+c,0):Te(c,h-1)),t===t?Ql(e,t,c):vr(e,Ko,c,!0)}function bg(e,t){return e&&e.length?Es(e,J(t)):n}var Eg=ee(cu);function cu(e,t){return e&&e.length&&t&&t.length?na(e,t):e}function xg(e,t,o){return e&&e.length&&t&&t.length?na(e,t,H(o,2)):e}function Ag(e,t,o){return e&&e.length&&t&&t.length?na(e,t,n,o):e}var Sg=Nt(function(e,t){var o=e==null?0:e.length,h=Vi(e,t);return Ss(e,ge(t,function(c){return Gt(c,o)?+c:c}).sort(ks)),h});function Cg(e,t){var o=[];if(!(e&&e.length))return o;var h=-1,c=[],p=e.length;for(t=H(t,3);++h<p;){var m=e[h];t(m,h,e)&&(o.push(m),c.push(h))}return Ss(e,c),o}function Ea(e){return e==null?e:wc.call(e)}function Rg(e,t,o){var h=e==null?0:e.length;return h?(o&&typeof o!="number"&&Fe(e,t,o)?(t=0,o=h):(t=t==null?0:J(t),o=o===n?h:J(o)),et(e,t,o)):[]}function Tg(e,t){return Or(e,t)}function Lg(e,t,o){return aa(e,t,H(o,2))}function Dg(e,t){var o=e==null?0:e.length;if(o){var h=Or(e,t);if(h<o&&pt(e[h],t))return h}return-1}function Ng(e,t){return Or(e,t,!0)}function Gg(e,t,o){return aa(e,t,H(o,2),!0)}function Fg(e,t){var o=e==null?0:e.length;if(o){var h=Or(e,t,!0)-1;if(pt(e[h],t))return h}return-1}function Ig(e){return e&&e.length?Rs(e):[]}function kg(e,t){return e&&e.length?Rs(e,H(t,2)):[]}function Og(e){var t=e==null?0:e.length;return t?et(e,1,t):[]}function Pg(e,t,o){return e&&e.length?(t=o||t===n?1:J(t),et(e,0,t<0?0:t)):[]}function Mg(e,t,o){var h=e==null?0:e.length;return h?(t=o||t===n?1:J(t),t=h-t,et(e,t<0?0:t,h)):[]}function Ug(e,t){return e&&e.length?Pr(e,H(t,3),!1,!0):[]}function $g(e,t){return e&&e.length?Pr(e,H(t,3)):[]}var Bg=ee(function(e){return qt(Ce(e,1,ye,!0))}),zg=ee(function(e){var t=tt(e);return ye(t)&&(t=n),qt(Ce(e,1,ye,!0),H(t,2))}),Wg=ee(function(e){var t=tt(e);return t=typeof t=="function"?t:n,qt(Ce(e,1,ye,!0),n,t)});function Hg(e){return e&&e.length?qt(e):[]}function Kg(e,t){return e&&e.length?qt(e,H(t,2)):[]}function Yg(e,t){return t=typeof t=="function"?t:n,e&&e.length?qt(e,n,t):[]}function xa(e){if(!(e&&e.length))return[];var t=0;return e=zt(e,function(o){if(ye(o))return t=Ee(o.length,t),!0}),$i(t,function(o){return ge(e,Pi(o))})}function du(e,t){if(!(e&&e.length))return[];var o=xa(e);return t==null?o:ge(o,function(h){return Be(t,n,h)})}var qg=ee(function(e,t){return ye(e)?Zn(e,t):[]}),Vg=ee(function(e){return sa(zt(e,ye))}),Zg=ee(function(e){var t=tt(e);return ye(t)&&(t=n),sa(zt(e,ye),H(t,2))}),Xg=ee(function(e){var t=tt(e);return t=typeof t=="function"?t:n,sa(zt(e,ye),n,t)}),jg=ee(xa);function Jg(e,t){return Ns(e||[],t||[],Vn)}function Qg(e,t){return Ns(e||[],t||[],Jn)}var ep=ee(function(e){var t=e.length,o=t>1?e[t-1]:n;return o=typeof o=="function"?(e.pop(),o):n,du(e,o)});function gu(e){var t=g(e);return t.__chain__=!0,t}function tp(e,t){return t(e),e}function Yr(e,t){return t(e)}var np=Nt(function(e){var t=e.length,o=t?e[0]:0,h=this.__wrapped__,c=function(p){return Vi(p,e)};return t>1||this.__actions__.length||!(h instanceof ne)||!Gt(o)?this.thru(c):(h=h.slice(o,+o+(t?1:0)),h.__actions__.push({func:Yr,args:[c],thisArg:n}),new Je(h,this.__chain__).thru(function(p){return t&&!p.length&&p.push(n),p}))});function rp(){return gu(this)}function ip(){return new Je(this.value(),this.__chain__)}function ap(){this.__values__===n&&(this.__values__=Tu(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function op(){return this}function sp(e){for(var t,o=this;o instanceof Nr;){var h=su(o);h.__index__=0,h.__values__=n,t?c.__wrapped__=h:t=h;var c=h;o=o.__wrapped__}return c.__wrapped__=e,t}function up(){var e=this.__wrapped__;if(e instanceof ne){var t=e;return this.__actions__.length&&(t=new ne(this)),t=t.reverse(),t.__actions__.push({func:Yr,args:[Ea],thisArg:n}),new Je(t,this.__chain__)}return this.thru(Ea)}function hp(){return Ds(this.__wrapped__,this.__actions__)}var fp=Mr(function(e,t,o){oe.call(e,o)?++e[o]:Lt(e,o,1)});function lp(e,t,o){var h=j(e)?Wo:td;return o&&Fe(e,t,o)&&(t=n),h(e,H(t,3))}function cp(e,t){var o=j(e)?zt:ds;return o(e,H(t,3))}var dp=Bs(uu),gp=Bs(hu);function pp(e,t){return Ce(qr(e,t),1)}function vp(e,t){return Ce(qr(e,t),Ve)}function mp(e,t,o){return o=o===n?1:J(o),Ce(qr(e,t),o)}function pu(e,t){var o=j(e)?Xe:Yt;return o(e,H(t,3))}function vu(e,t){var o=j(e)?Ol:cs;return o(e,H(t,3))}var yp=Mr(function(e,t,o){oe.call(e,o)?e[o].push(t):Lt(e,o,[t])});function wp(e,t,o,h){e=Pe(e)?e:An(e),o=o&&!h?J(o):0;var c=e.length;return o<0&&(o=Ee(c+o,0)),Jr(e)?o<=c&&e.indexOf(t,o)>-1:!!c&&cn(e,t,o)>-1}var _p=ee(function(e,t,o){var h=-1,c=typeof t=="function",p=Pe(e)?A(e.length):[];return Yt(e,function(m){p[++h]=c?Be(t,m,o):Xn(m,t,o)}),p}),bp=Mr(function(e,t,o){Lt(e,o,t)});function qr(e,t){var o=j(e)?ge:ws;return o(e,H(t,3))}function Ep(e,t,o,h){return e==null?[]:(j(t)||(t=t==null?[]:[t]),o=h?n:o,j(o)||(o=o==null?[]:[o]),xs(e,t,o))}var xp=Mr(function(e,t,o){e[o?0:1].push(t)},function(){return[[],[]]});function Ap(e,t,o){var h=j(e)?ki:qo,c=arguments.length<3;return h(e,H(t,4),o,c,Yt)}function Sp(e,t,o){var h=j(e)?Pl:qo,c=arguments.length<3;return h(e,H(t,4),o,c,cs)}function Cp(e,t){var o=j(e)?zt:ds;return o(e,Xr(H(t,3)))}function Rp(e){var t=j(e)?us:wd;return t(e)}function Tp(e,t,o){(o?Fe(e,t,o):t===n)?t=1:t=J(t);var h=j(e)?Xc:_d;return h(e,t)}function Lp(e){var t=j(e)?jc:Ed;return t(e)}function Dp(e){if(e==null)return 0;if(Pe(e))return Jr(e)?gn(e):e.length;var t=Le(e);return t==lt||t==ct?e.size:ea(e).length}function Np(e,t,o){var h=j(e)?Oi:xd;return o&&Fe(e,t,o)&&(t=n),h(e,H(t,3))}var Gp=ee(function(e,t){if(e==null)return[];var o=t.length;return o>1&&Fe(e,t[0],t[1])?t=[]:o>2&&Fe(t[0],t[1],t[2])&&(t=[t[0]]),xs(e,Ce(t,1),[])}),Vr=cc||function(){return Se.Date.now()};function Fp(e,t){if(typeof t!="function")throw new je(f);return e=J(e),function(){if(--e<1)return t.apply(this,arguments)}}function mu(e,t,o){return t=o?n:t,t=e&&t==null?e.length:t,Dt(e,de,n,n,n,n,t)}function yu(e,t){var o;if(typeof t!="function")throw new je(f);return e=J(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=n),o}}var Aa=ee(function(e,t,o){var h=I;if(o.length){var c=Ht(o,En(Aa));h|=he}return Dt(e,h,t,o,c)}),wu=ee(function(e,t,o){var h=I|$;if(o.length){var c=Ht(o,En(wu));h|=he}return Dt(t,h,e,o,c)});function _u(e,t,o){t=o?n:t;var h=Dt(e,B,n,n,n,n,n,t);return h.placeholder=_u.placeholder,h}function bu(e,t,o){t=o?n:t;var h=Dt(e,W,n,n,n,n,n,t);return h.placeholder=bu.placeholder,h}function Eu(e,t,o){var h,c,p,m,_,E,R=0,T=!1,L=!1,O=!0;if(typeof e!="function")throw new je(f);t=nt(t)||0,ve(o)&&(T=!!o.leading,L="maxWait"in o,p=L?Ee(nt(o.maxWait)||0,t):p,O="trailing"in o?!!o.trailing:O);function z(we){var vt=h,kt=c;return h=c=n,R=we,m=e.apply(kt,vt),m}function Y(we){return R=we,_=tr(te,t),T?z(we):m}function Q(we){var vt=we-E,kt=we-R,Bu=t-vt;return L?Te(Bu,p-kt):Bu}function q(we){var vt=we-E,kt=we-R;return E===n||vt>=t||vt<0||L&&kt>=p}function te(){var we=Vr();if(q(we))return re(we);_=tr(te,Q(we))}function re(we){return _=n,O&&h?z(we):(h=c=n,m)}function Ke(){_!==n&&Gs(_),R=0,h=E=c=_=n}function Ie(){return _===n?m:re(Vr())}function Ye(){var we=Vr(),vt=q(we);if(h=arguments,c=this,E=we,vt){if(_===n)return Y(E);if(L)return Gs(_),_=tr(te,t),z(E)}return _===n&&(_=tr(te,t)),m}return Ye.cancel=Ke,Ye.flush=Ie,Ye}var Ip=ee(function(e,t){return ls(e,1,t)}),kp=ee(function(e,t,o){return ls(e,nt(t)||0,o)});function Op(e){return Dt(e,ke)}function Zr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new je(f);var o=function(){var h=arguments,c=t?t.apply(this,h):h[0],p=o.cache;if(p.has(c))return p.get(c);var m=e.apply(this,h);return o.cache=p.set(c,m)||p,m};return o.cache=new(Zr.Cache||Tt),o}Zr.Cache=Tt;function Xr(e){if(typeof e!="function")throw new je(f);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Pp(e){return yu(2,e)}var Mp=Ad(function(e,t){t=t.length==1&&j(t[0])?ge(t[0],ze(H())):ge(Ce(t,1),ze(H()));var o=t.length;return ee(function(h){for(var c=-1,p=Te(h.length,o);++c<p;)h[c]=t[c].call(this,h[c]);return Be(e,this,h)})}),Sa=ee(function(e,t){var o=Ht(t,En(Sa));return Dt(e,he,n,t,o)}),xu=ee(function(e,t){var o=Ht(t,En(xu));return Dt(e,$e,n,t,o)}),Up=Nt(function(e,t){return Dt(e,wt,n,n,n,t)});function $p(e,t){if(typeof e!="function")throw new je(f);return t=t===n?t:J(t),ee(e,t)}function Bp(e,t){if(typeof e!="function")throw new je(f);return t=t==null?0:Ee(J(t),0),ee(function(o){var h=o[t],c=Zt(o,0,t);return h&&Wt(c,h),Be(e,this,c)})}function zp(e,t,o){var h=!0,c=!0;if(typeof e!="function")throw new je(f);return ve(o)&&(h="leading"in o?!!o.leading:h,c="trailing"in o?!!o.trailing:c),Eu(e,t,{leading:h,maxWait:t,trailing:c})}function Wp(e){return mu(e,1)}function Hp(e,t){return Sa(ha(t),e)}function Kp(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]}function Yp(e){return Qe(e,S)}function qp(e,t){return t=typeof t=="function"?t:n,Qe(e,S,t)}function Vp(e){return Qe(e,y|S)}function Zp(e,t){return t=typeof t=="function"?t:n,Qe(e,y|S,t)}function Xp(e,t){return t==null||fs(e,t,Ae(t))}function pt(e,t){return e===t||e!==e&&t!==t}var jp=zr(ji),Jp=zr(function(e,t){return e>=t}),sn=vs(function(){return arguments}())?vs:function(e){return me(e)&&oe.call(e,"callee")&&!ns.call(e,"callee")},j=A.isArray,Qp=Po?ze(Po):sd;function Pe(e){return e!=null&&jr(e.length)&&!Ft(e)}function ye(e){return me(e)&&Pe(e)}function ev(e){return e===!0||e===!1||me(e)&&Ge(e)==kn}var Xt=gc||Oa,tv=Mo?ze(Mo):ud;function nv(e){return me(e)&&e.nodeType===1&&!nr(e)}function rv(e){if(e==null)return!0;if(Pe(e)&&(j(e)||typeof e=="string"||typeof e.splice=="function"||Xt(e)||xn(e)||sn(e)))return!e.length;var t=Le(e);if(t==lt||t==ct)return!e.size;if(er(e))return!ea(e).length;for(var o in e)if(oe.call(e,o))return!1;return!0}function iv(e,t){return jn(e,t)}function av(e,t,o){o=typeof o=="function"?o:n;var h=o?o(e,t):n;return h===n?jn(e,t,n,o):!!h}function Ca(e){if(!me(e))return!1;var t=Ge(e);return t==hr||t==Tf||typeof e.message=="string"&&typeof e.name=="string"&&!nr(e)}function ov(e){return typeof e=="number"&&is(e)}function Ft(e){if(!ve(e))return!1;var t=Ge(e);return t==fr||t==fo||t==Rf||t==Df}function Au(e){return typeof e=="number"&&e==J(e)}function jr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_e}function ve(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function me(e){return e!=null&&typeof e=="object"}var Su=Uo?ze(Uo):fd;function sv(e,t){return e===t||Qi(e,t,va(t))}function uv(e,t,o){return o=typeof o=="function"?o:n,Qi(e,t,va(t),o)}function hv(e){return Cu(e)&&e!=+e}function fv(e){if(qd(e))throw new Z(u);return ms(e)}function lv(e){return e===null}function cv(e){return e==null}function Cu(e){return typeof e=="number"||me(e)&&Ge(e)==Pn}function nr(e){if(!me(e)||Ge(e)!=Ct)return!1;var t=Ar(e);if(t===null)return!0;var o=oe.call(t,"constructor")&&t.constructor;return typeof o=="function"&&o instanceof o&&_r.call(o)==uc}var Ra=$o?ze($o):ld;function dv(e){return Au(e)&&e>=-_e&&e<=_e}var Ru=Bo?ze(Bo):cd;function Jr(e){return typeof e=="string"||!j(e)&&me(e)&&Ge(e)==Un}function He(e){return typeof e=="symbol"||me(e)&&Ge(e)==lr}var xn=zo?ze(zo):dd;function gv(e){return e===n}function pv(e){return me(e)&&Le(e)==$n}function vv(e){return me(e)&&Ge(e)==Gf}var mv=zr(ta),yv=zr(function(e,t){return e<=t});function Tu(e){if(!e)return[];if(Pe(e))return Jr(e)?dt(e):Oe(e);if(Wn&&e[Wn])return Xl(e[Wn]());var t=Le(e),o=t==lt?zi:t==ct?mr:An;return o(e)}function It(e){if(!e)return e===0?e:0;if(e=nt(e),e===Ve||e===-Ve){var t=e<0?-1:1;return t*In}return e===e?e:0}function J(e){var t=It(e),o=t%1;return t===t?o?t-o:t:0}function Lu(e){return e?nn(J(e),0,bt):0}function nt(e){if(typeof e=="number")return e;if(He(e))return ft;if(ve(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ve(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Vo(e);var o=Qf.test(e);return o||tl.test(e)?Fl(e.slice(2),o?2:8):Jf.test(e)?ft:+e}function Du(e){return xt(e,Me(e))}function wv(e){return e?nn(J(e),-_e,_e):e===0?e:0}function ae(e){return e==null?"":We(e)}var _v=_n(function(e,t){if(er(t)||Pe(t)){xt(t,Ae(t),e);return}for(var o in t)oe.call(t,o)&&Vn(e,o,t[o])}),Nu=_n(function(e,t){xt(t,Me(t),e)}),Qr=_n(function(e,t,o,h){xt(t,Me(t),e,h)}),bv=_n(function(e,t,o,h){xt(t,Ae(t),e,h)}),Ev=Nt(Vi);function xv(e,t){var o=wn(e);return t==null?o:hs(o,t)}var Av=ee(function(e,t){e=fe(e);var o=-1,h=t.length,c=h>2?t[2]:n;for(c&&Fe(t[0],t[1],c)&&(h=1);++o<h;)for(var p=t[o],m=Me(p),_=-1,E=m.length;++_<E;){var R=m[_],T=e[R];(T===n||pt(T,vn[R])&&!oe.call(e,R))&&(e[R]=p[R])}return e}),Sv=ee(function(e){return e.push(n,Vs),Be(Gu,n,e)});function Cv(e,t){return Ho(e,H(t,3),Et)}function Rv(e,t){return Ho(e,H(t,3),Xi)}function Tv(e,t){return e==null?e:Zi(e,H(t,3),Me)}function Lv(e,t){return e==null?e:gs(e,H(t,3),Me)}function Dv(e,t){return e&&Et(e,H(t,3))}function Nv(e,t){return e&&Xi(e,H(t,3))}function Gv(e){return e==null?[]:Ir(e,Ae(e))}function Fv(e){return e==null?[]:Ir(e,Me(e))}function Ta(e,t,o){var h=e==null?n:rn(e,t);return h===n?o:h}function Iv(e,t){return e!=null&&js(e,t,rd)}function La(e,t){return e!=null&&js(e,t,id)}var kv=Ws(function(e,t,o){t!=null&&typeof t.toString!="function"&&(t=br.call(t)),e[t]=o},Na(Ue)),Ov=Ws(function(e,t,o){t!=null&&typeof t.toString!="function"&&(t=br.call(t)),oe.call(e,t)?e[t].push(o):e[t]=[o]},H),Pv=ee(Xn);function Ae(e){return Pe(e)?ss(e):ea(e)}function Me(e){return Pe(e)?ss(e,!0):gd(e)}function Mv(e,t){var o={};return t=H(t,3),Et(e,function(h,c,p){Lt(o,t(h,c,p),h)}),o}function Uv(e,t){var o={};return t=H(t,3),Et(e,function(h,c,p){Lt(o,c,t(h,c,p))}),o}var $v=_n(function(e,t,o){kr(e,t,o)}),Gu=_n(function(e,t,o,h){kr(e,t,o,h)}),Bv=Nt(function(e,t){var o={};if(e==null)return o;var h=!1;t=ge(t,function(p){return p=Vt(p,e),h||(h=p.length>1),p}),xt(e,ga(e),o),h&&(o=Qe(o,y|x|S,kd));for(var c=t.length;c--;)oa(o,t[c]);return o});function zv(e,t){return Fu(e,Xr(H(t)))}var Wv=Nt(function(e,t){return e==null?{}:vd(e,t)});function Fu(e,t){if(e==null)return{};var o=ge(ga(e),function(h){return[h]});return t=H(t),As(e,o,function(h,c){return t(h,c[0])})}function Hv(e,t,o){t=Vt(t,e);var h=-1,c=t.length;for(c||(c=1,e=n);++h<c;){var p=e==null?n:e[At(t[h])];p===n&&(h=c,p=o),e=Ft(p)?p.call(e):p}return e}function Kv(e,t,o){return e==null?e:Jn(e,t,o)}function Yv(e,t,o,h){return h=typeof h=="function"?h:n,e==null?e:Jn(e,t,o,h)}var Iu=Ys(Ae),ku=Ys(Me);function qv(e,t,o){var h=j(e),c=h||Xt(e)||xn(e);if(t=H(t,4),o==null){var p=e&&e.constructor;c?o=h?new p:[]:ve(e)?o=Ft(p)?wn(Ar(e)):{}:o={}}return(c?Xe:Et)(e,function(m,_,E){return t(o,m,_,E)}),o}function Vv(e,t){return e==null?!0:oa(e,t)}function Zv(e,t,o){return e==null?e:Ls(e,t,ha(o))}function Xv(e,t,o,h){return h=typeof h=="function"?h:n,e==null?e:Ls(e,t,ha(o),h)}function An(e){return e==null?[]:Bi(e,Ae(e))}function jv(e){return e==null?[]:Bi(e,Me(e))}function Jv(e,t,o){return o===n&&(o=t,t=n),o!==n&&(o=nt(o),o=o===o?o:0),t!==n&&(t=nt(t),t=t===t?t:0),nn(nt(e),t,o)}function Qv(e,t,o){return t=It(t),o===n?(o=t,t=0):o=It(o),e=nt(e),ad(e,t,o)}function em(e,t,o){if(o&&typeof o!="boolean"&&Fe(e,t,o)&&(t=o=n),o===n&&(typeof t=="boolean"?(o=t,t=n):typeof e=="boolean"&&(o=e,e=n)),e===n&&t===n?(e=0,t=1):(e=It(e),t===n?(t=e,e=0):t=It(t)),e>t){var h=e;e=t,t=h}if(o||e%1||t%1){var c=as();return Te(e+c*(t-e+Gl("1e-"+((c+"").length-1))),t)}return ra(e,t)}var tm=bn(function(e,t,o){return t=t.toLowerCase(),e+(o?Ou(t):t)});function Ou(e){return Da(ae(e).toLowerCase())}function Pu(e){return e=ae(e),e&&e.replace(rl,Kl).replace(El,"")}function nm(e,t,o){e=ae(e),t=We(t);var h=e.length;o=o===n?h:nn(J(o),0,h);var c=o;return o-=t.length,o>=0&&e.slice(o,c)==t}function rm(e){return e=ae(e),e&&Pf.test(e)?e.replace(go,Yl):e}function im(e){return e=ae(e),e&&Wf.test(e)?e.replace(Si,"\\$&"):e}var am=bn(function(e,t,o){return e+(o?"-":"")+t.toLowerCase()}),om=bn(function(e,t,o){return e+(o?" ":"")+t.toLowerCase()}),sm=$s("toLowerCase");function um(e,t,o){e=ae(e),t=J(t);var h=t?gn(e):0;if(!t||h>=t)return e;var c=(t-h)/2;return Br(Tr(c),o)+e+Br(Rr(c),o)}function hm(e,t,o){e=ae(e),t=J(t);var h=t?gn(e):0;return t&&h<t?e+Br(t-h,o):e}function fm(e,t,o){e=ae(e),t=J(t);var h=t?gn(e):0;return t&&h<t?Br(t-h,o)+e:e}function lm(e,t,o){return o||t==null?t=0:t&&(t=+t),yc(ae(e).replace(Ci,""),t||0)}function cm(e,t,o){return(o?Fe(e,t,o):t===n)?t=1:t=J(t),ia(ae(e),t)}function dm(){var e=arguments,t=ae(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var gm=bn(function(e,t,o){return e+(o?"_":"")+t.toLowerCase()});function pm(e,t,o){return o&&typeof o!="number"&&Fe(e,t,o)&&(t=o=n),o=o===n?bt:o>>>0,o?(e=ae(e),e&&(typeof t=="string"||t!=null&&!Ra(t))&&(t=We(t),!t&&dn(e))?Zt(dt(e),0,o):e.split(t,o)):[]}var vm=bn(function(e,t,o){return e+(o?" ":"")+Da(t)});function mm(e,t,o){return e=ae(e),o=o==null?0:nn(J(o),0,e.length),t=We(t),e.slice(o,o+t.length)==t}function ym(e,t,o){var h=g.templateSettings;o&&Fe(e,t,o)&&(t=n),e=ae(e),t=Qr({},t,h,qs);var c=Qr({},t.imports,h.imports,qs),p=Ae(c),m=Bi(c,p),_,E,R=0,T=t.interpolate||cr,L="__p += '",O=Wi((t.escape||cr).source+"|"+T.source+"|"+(T===po?jf:cr).source+"|"+(t.evaluate||cr).source+"|$","g"),z="//# sourceURL="+(oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rl+"]")+`
`;e.replace(O,function(q,te,re,Ke,Ie,Ye){return re||(re=Ke),L+=e.slice(R,Ye).replace(il,ql),te&&(_=!0,L+=`' +
__e(`+te+`) +
'`),Ie&&(E=!0,L+=`';
`+Ie+`;
__p += '`),re&&(L+=`' +
((__t = (`+re+`)) == null ? '' : __t) +
'`),R=Ye+q.length,q}),L+=`';
`;var Y=oe.call(t,"variable")&&t.variable;if(!Y)L=`with (obj) {
`+L+`
}
`;else if(Zf.test(Y))throw new Z(l);L=(E?L.replace(Ff,""):L).replace(If,"$1").replace(kf,"$1;"),L="function("+(Y||"obj")+`) {
`+(Y?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(E?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var Q=Uu(function(){return ie(p,z+"return "+L).apply(n,m)});if(Q.source=L,Ca(Q))throw Q;return Q}function wm(e){return ae(e).toLowerCase()}function _m(e){return ae(e).toUpperCase()}function bm(e,t,o){if(e=ae(e),e&&(o||t===n))return Vo(e);if(!e||!(t=We(t)))return e;var h=dt(e),c=dt(t),p=Zo(h,c),m=Xo(h,c)+1;return Zt(h,p,m).join("")}function Em(e,t,o){if(e=ae(e),e&&(o||t===n))return e.slice(0,Jo(e)+1);if(!e||!(t=We(t)))return e;var h=dt(e),c=Xo(h,dt(t))+1;return Zt(h,0,c).join("")}function xm(e,t,o){if(e=ae(e),e&&(o||t===n))return e.replace(Ci,"");if(!e||!(t=We(t)))return e;var h=dt(e),c=Zo(h,dt(t));return Zt(h,c).join("")}function Am(e,t){var o=ut,h=ht;if(ve(t)){var c="separator"in t?t.separator:c;o="length"in t?J(t.length):o,h="omission"in t?We(t.omission):h}e=ae(e);var p=e.length;if(dn(e)){var m=dt(e);p=m.length}if(o>=p)return e;var _=o-gn(h);if(_<1)return h;var E=m?Zt(m,0,_).join(""):e.slice(0,_);if(c===n)return E+h;if(m&&(_+=E.length-_),Ra(c)){if(e.slice(_).search(c)){var R,T=E;for(c.global||(c=Wi(c.source,ae(vo.exec(c))+"g")),c.lastIndex=0;R=c.exec(T);)var L=R.index;E=E.slice(0,L===n?_:L)}}else if(e.indexOf(We(c),_)!=_){var O=E.lastIndexOf(c);O>-1&&(E=E.slice(0,O))}return E+h}function Sm(e){return e=ae(e),e&&Of.test(e)?e.replace(co,ec):e}var Cm=bn(function(e,t,o){return e+(o?" ":"")+t.toUpperCase()}),Da=$s("toUpperCase");function Mu(e,t,o){return e=ae(e),t=o?n:t,t===n?Zl(e)?rc(e):$l(e):e.match(t)||[]}var Uu=ee(function(e,t){try{return Be(e,n,t)}catch(o){return Ca(o)?o:new Z(o)}}),Rm=Nt(function(e,t){return Xe(t,function(o){o=At(o),Lt(e,o,Aa(e[o],e))}),e});function Tm(e){var t=e==null?0:e.length,o=H();return e=t?ge(e,function(h){if(typeof h[1]!="function")throw new je(f);return[o(h[0]),h[1]]}):[],ee(function(h){for(var c=-1;++c<t;){var p=e[c];if(Be(p[0],this,h))return Be(p[1],this,h)}})}function Lm(e){return ed(Qe(e,y))}function Na(e){return function(){return e}}function Dm(e,t){return e==null||e!==e?t:e}var Nm=zs(),Gm=zs(!0);function Ue(e){return e}function Ga(e){return ys(typeof e=="function"?e:Qe(e,y))}function Fm(e){return _s(Qe(e,y))}function Im(e,t){return bs(e,Qe(t,y))}var km=ee(function(e,t){return function(o){return Xn(o,e,t)}}),Om=ee(function(e,t){return function(o){return Xn(e,o,t)}});function Fa(e,t,o){var h=Ae(t),c=Ir(t,h);o==null&&!(ve(t)&&(c.length||!h.length))&&(o=t,t=e,e=this,c=Ir(t,Ae(t)));var p=!(ve(o)&&"chain"in o)||!!o.chain,m=Ft(e);return Xe(c,function(_){var E=t[_];e[_]=E,m&&(e.prototype[_]=function(){var R=this.__chain__;if(p||R){var T=e(this.__wrapped__),L=T.__actions__=Oe(this.__actions__);return L.push({func:E,args:arguments,thisArg:e}),T.__chain__=R,T}return E.apply(e,Wt([this.value()],arguments))})}),e}function Pm(){return Se._===this&&(Se._=hc),this}function Ia(){}function Mm(e){return e=J(e),ee(function(t){return Es(t,e)})}var Um=la(ge),$m=la(Wo),Bm=la(Oi);function $u(e){return ya(e)?Pi(At(e)):md(e)}function zm(e){return function(t){return e==null?n:rn(e,t)}}var Wm=Hs(),Hm=Hs(!0);function ka(){return[]}function Oa(){return!1}function Km(){return{}}function Ym(){return""}function qm(){return!0}function Vm(e,t){if(e=J(e),e<1||e>_e)return[];var o=bt,h=Te(e,bt);t=H(t),e-=bt;for(var c=$i(h,t);++o<e;)t(o);return c}function Zm(e){return j(e)?ge(e,At):He(e)?[e]:Oe(ou(ae(e)))}function Xm(e){var t=++sc;return ae(e)+t}var jm=$r(function(e,t){return e+t},0),Jm=ca("ceil"),Qm=$r(function(e,t){return e/t},1),ey=ca("floor");function ty(e){return e&&e.length?Fr(e,Ue,ji):n}function ny(e,t){return e&&e.length?Fr(e,H(t,2),ji):n}function ry(e){return Yo(e,Ue)}function iy(e,t){return Yo(e,H(t,2))}function ay(e){return e&&e.length?Fr(e,Ue,ta):n}function oy(e,t){return e&&e.length?Fr(e,H(t,2),ta):n}var sy=$r(function(e,t){return e*t},1),uy=ca("round"),hy=$r(function(e,t){return e-t},0);function fy(e){return e&&e.length?Ui(e,Ue):0}function ly(e,t){return e&&e.length?Ui(e,H(t,2)):0}return g.after=Fp,g.ary=mu,g.assign=_v,g.assignIn=Nu,g.assignInWith=Qr,g.assignWith=bv,g.at=Ev,g.before=yu,g.bind=Aa,g.bindAll=Rm,g.bindKey=wu,g.castArray=Kp,g.chain=gu,g.chunk=eg,g.compact=tg,g.concat=ng,g.cond=Tm,g.conforms=Lm,g.constant=Na,g.countBy=fp,g.create=xv,g.curry=_u,g.curryRight=bu,g.debounce=Eu,g.defaults=Av,g.defaultsDeep=Sv,g.defer=Ip,g.delay=kp,g.difference=rg,g.differenceBy=ig,g.differenceWith=ag,g.drop=og,g.dropRight=sg,g.dropRightWhile=ug,g.dropWhile=hg,g.fill=fg,g.filter=cp,g.flatMap=pp,g.flatMapDeep=vp,g.flatMapDepth=mp,g.flatten=fu,g.flattenDeep=lg,g.flattenDepth=cg,g.flip=Op,g.flow=Nm,g.flowRight=Gm,g.fromPairs=dg,g.functions=Gv,g.functionsIn=Fv,g.groupBy=yp,g.initial=pg,g.intersection=vg,g.intersectionBy=mg,g.intersectionWith=yg,g.invert=kv,g.invertBy=Ov,g.invokeMap=_p,g.iteratee=Ga,g.keyBy=bp,g.keys=Ae,g.keysIn=Me,g.map=qr,g.mapKeys=Mv,g.mapValues=Uv,g.matches=Fm,g.matchesProperty=Im,g.memoize=Zr,g.merge=$v,g.mergeWith=Gu,g.method=km,g.methodOf=Om,g.mixin=Fa,g.negate=Xr,g.nthArg=Mm,g.omit=Bv,g.omitBy=zv,g.once=Pp,g.orderBy=Ep,g.over=Um,g.overArgs=Mp,g.overEvery=$m,g.overSome=Bm,g.partial=Sa,g.partialRight=xu,g.partition=xp,g.pick=Wv,g.pickBy=Fu,g.property=$u,g.propertyOf=zm,g.pull=Eg,g.pullAll=cu,g.pullAllBy=xg,g.pullAllWith=Ag,g.pullAt=Sg,g.range=Wm,g.rangeRight=Hm,g.rearg=Up,g.reject=Cp,g.remove=Cg,g.rest=$p,g.reverse=Ea,g.sampleSize=Tp,g.set=Kv,g.setWith=Yv,g.shuffle=Lp,g.slice=Rg,g.sortBy=Gp,g.sortedUniq=Ig,g.sortedUniqBy=kg,g.split=pm,g.spread=Bp,g.tail=Og,g.take=Pg,g.takeRight=Mg,g.takeRightWhile=Ug,g.takeWhile=$g,g.tap=tp,g.throttle=zp,g.thru=Yr,g.toArray=Tu,g.toPairs=Iu,g.toPairsIn=ku,g.toPath=Zm,g.toPlainObject=Du,g.transform=qv,g.unary=Wp,g.union=Bg,g.unionBy=zg,g.unionWith=Wg,g.uniq=Hg,g.uniqBy=Kg,g.uniqWith=Yg,g.unset=Vv,g.unzip=xa,g.unzipWith=du,g.update=Zv,g.updateWith=Xv,g.values=An,g.valuesIn=jv,g.without=qg,g.words=Mu,g.wrap=Hp,g.xor=Vg,g.xorBy=Zg,g.xorWith=Xg,g.zip=jg,g.zipObject=Jg,g.zipObjectDeep=Qg,g.zipWith=ep,g.entries=Iu,g.entriesIn=ku,g.extend=Nu,g.extendWith=Qr,Fa(g,g),g.add=jm,g.attempt=Uu,g.camelCase=tm,g.capitalize=Ou,g.ceil=Jm,g.clamp=Jv,g.clone=Yp,g.cloneDeep=Vp,g.cloneDeepWith=Zp,g.cloneWith=qp,g.conformsTo=Xp,g.deburr=Pu,g.defaultTo=Dm,g.divide=Qm,g.endsWith=nm,g.eq=pt,g.escape=rm,g.escapeRegExp=im,g.every=lp,g.find=dp,g.findIndex=uu,g.findKey=Cv,g.findLast=gp,g.findLastIndex=hu,g.findLastKey=Rv,g.floor=ey,g.forEach=pu,g.forEachRight=vu,g.forIn=Tv,g.forInRight=Lv,g.forOwn=Dv,g.forOwnRight=Nv,g.get=Ta,g.gt=jp,g.gte=Jp,g.has=Iv,g.hasIn=La,g.head=lu,g.identity=Ue,g.includes=wp,g.indexOf=gg,g.inRange=Qv,g.invoke=Pv,g.isArguments=sn,g.isArray=j,g.isArrayBuffer=Qp,g.isArrayLike=Pe,g.isArrayLikeObject=ye,g.isBoolean=ev,g.isBuffer=Xt,g.isDate=tv,g.isElement=nv,g.isEmpty=rv,g.isEqual=iv,g.isEqualWith=av,g.isError=Ca,g.isFinite=ov,g.isFunction=Ft,g.isInteger=Au,g.isLength=jr,g.isMap=Su,g.isMatch=sv,g.isMatchWith=uv,g.isNaN=hv,g.isNative=fv,g.isNil=cv,g.isNull=lv,g.isNumber=Cu,g.isObject=ve,g.isObjectLike=me,g.isPlainObject=nr,g.isRegExp=Ra,g.isSafeInteger=dv,g.isSet=Ru,g.isString=Jr,g.isSymbol=He,g.isTypedArray=xn,g.isUndefined=gv,g.isWeakMap=pv,g.isWeakSet=vv,g.join=wg,g.kebabCase=am,g.last=tt,g.lastIndexOf=_g,g.lowerCase=om,g.lowerFirst=sm,g.lt=mv,g.lte=yv,g.max=ty,g.maxBy=ny,g.mean=ry,g.meanBy=iy,g.min=ay,g.minBy=oy,g.stubArray=ka,g.stubFalse=Oa,g.stubObject=Km,g.stubString=Ym,g.stubTrue=qm,g.multiply=sy,g.nth=bg,g.noConflict=Pm,g.noop=Ia,g.now=Vr,g.pad=um,g.padEnd=hm,g.padStart=fm,g.parseInt=lm,g.random=em,g.reduce=Ap,g.reduceRight=Sp,g.repeat=cm,g.replace=dm,g.result=Hv,g.round=uy,g.runInContext=b,g.sample=Rp,g.size=Dp,g.snakeCase=gm,g.some=Np,g.sortedIndex=Tg,g.sortedIndexBy=Lg,g.sortedIndexOf=Dg,g.sortedLastIndex=Ng,g.sortedLastIndexBy=Gg,g.sortedLastIndexOf=Fg,g.startCase=vm,g.startsWith=mm,g.subtract=hy,g.sum=fy,g.sumBy=ly,g.template=ym,g.times=Vm,g.toFinite=It,g.toInteger=J,g.toLength=Lu,g.toLower=wm,g.toNumber=nt,g.toSafeInteger=wv,g.toString=ae,g.toUpper=_m,g.trim=bm,g.trimEnd=Em,g.trimStart=xm,g.truncate=Am,g.unescape=Sm,g.uniqueId=Xm,g.upperCase=Cm,g.upperFirst=Da,g.each=pu,g.eachRight=vu,g.first=lu,Fa(g,function(){var e={};return Et(g,function(t,o){oe.call(g.prototype,o)||(e[o]=t)}),e}(),{chain:!1}),g.VERSION=i,Xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){g[e].placeholder=g}),Xe(["drop","take"],function(e,t){ne.prototype[e]=function(o){o=o===n?1:Ee(J(o),0);var h=this.__filtered__&&!t?new ne(this):this.clone();return h.__filtered__?h.__takeCount__=Te(o,h.__takeCount__):h.__views__.push({size:Te(o,bt),type:e+(h.__dir__<0?"Right":"")}),h},ne.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),Xe(["filter","map","takeWhile"],function(e,t){var o=t+1,h=o==Bt||o==_t;ne.prototype[e]=function(c){var p=this.clone();return p.__iteratees__.push({iteratee:H(c,3),type:o}),p.__filtered__=p.__filtered__||h,p}}),Xe(["head","last"],function(e,t){var o="take"+(t?"Right":"");ne.prototype[e]=function(){return this[o](1).value()[0]}}),Xe(["initial","tail"],function(e,t){var o="drop"+(t?"":"Right");ne.prototype[e]=function(){return this.__filtered__?new ne(this):this[o](1)}}),ne.prototype.compact=function(){return this.filter(Ue)},ne.prototype.find=function(e){return this.filter(e).head()},ne.prototype.findLast=function(e){return this.reverse().find(e)},ne.prototype.invokeMap=ee(function(e,t){return typeof e=="function"?new ne(this):this.map(function(o){return Xn(o,e,t)})}),ne.prototype.reject=function(e){return this.filter(Xr(H(e)))},ne.prototype.slice=function(e,t){e=J(e);var o=this;return o.__filtered__&&(e>0||t<0)?new ne(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),t!==n&&(t=J(t),o=t<0?o.dropRight(-t):o.take(t-e)),o)},ne.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ne.prototype.toArray=function(){return this.take(bt)},Et(ne.prototype,function(e,t){var o=/^(?:filter|find|map|reject)|While$/.test(t),h=/^(?:head|last)$/.test(t),c=g[h?"take"+(t=="last"?"Right":""):t],p=h||/^find/.test(t);c&&(g.prototype[t]=function(){var m=this.__wrapped__,_=h?[1]:arguments,E=m instanceof ne,R=_[0],T=E||j(m),L=function(te){var re=c.apply(g,Wt([te],_));return h&&O?re[0]:re};T&&o&&typeof R=="function"&&R.length!=1&&(E=T=!1);var O=this.__chain__,z=!!this.__actions__.length,Y=p&&!O,Q=E&&!z;if(!p&&T){m=Q?m:new ne(this);var q=e.apply(m,_);return q.__actions__.push({func:Yr,args:[L],thisArg:n}),new Je(q,O)}return Y&&Q?e.apply(this,_):(q=this.thru(L),Y?h?q.value()[0]:q.value():q)})}),Xe(["pop","push","shift","sort","splice","unshift"],function(e){var t=yr[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);g.prototype[e]=function(){var c=arguments;if(h&&!this.__chain__){var p=this.value();return t.apply(j(p)?p:[],c)}return this[o](function(m){return t.apply(j(m)?m:[],c)})}}),Et(ne.prototype,function(e,t){var o=g[t];if(o){var h=o.name+"";oe.call(yn,h)||(yn[h]=[]),yn[h].push({name:t,func:o})}}),yn[Ur(n,$).name]=[{name:"wrapper",func:n}],ne.prototype.clone=Sc,ne.prototype.reverse=Cc,ne.prototype.value=Rc,g.prototype.at=np,g.prototype.chain=rp,g.prototype.commit=ip,g.prototype.next=ap,g.prototype.plant=sp,g.prototype.reverse=up,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=hp,g.prototype.first=g.prototype.head,Wn&&(g.prototype[Wn]=op),g},pn=ic();Jt?((Jt.exports=pn)._=pn,Gi._=pn):Se._=pn}).call(rr)})(ui,ui.exports);var yy=ui.exports,to={exports:{}},Cn=typeof Reflect=="object"?Reflect:null,zu=Cn&&typeof Cn.apply=="function"?Cn.apply:function(r,n,i){return Function.prototype.apply.call(r,n,i)},ai;Cn&&typeof Cn.ownKeys=="function"?ai=Cn.ownKeys:Object.getOwnPropertySymbols?ai=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:ai=function(r){return Object.getOwnPropertyNames(r)};function wy(s){console&&console.warn&&console.warn(s)}var Lh=Number.isNaN||function(r){return r!==r};function se(){se.init.call(this)}to.exports=se;to.exports.once=xy;se.EventEmitter=se;se.prototype._events=void 0;se.prototype._eventsCount=0;se.prototype._maxListeners=void 0;var Wu=10;function ci(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(se,"defaultMaxListeners",{enumerable:!0,get:function(){return Wu},set:function(s){if(typeof s!="number"||s<0||Lh(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");Wu=s}});se.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};se.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Lh(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function Dh(s){return s._maxListeners===void 0?se.defaultMaxListeners:s._maxListeners}se.prototype.getMaxListeners=function(){return Dh(this)};se.prototype.emit=function(r){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var a=r==="error",u=this._events;if(u!==void 0)a=a&&u.error===void 0;else if(!a)return!1;if(a){var f;if(n.length>0&&(f=n[0]),f instanceof Error)throw f;var l=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw l.context=f,l}var d=u[r];if(d===void 0)return!1;if(typeof d=="function")zu(d,this,n);else for(var v=d.length,w=kh(d,v),i=0;i<v;++i)zu(w[i],this,n);return!0};function Nh(s,r,n,i){var a,u,f;if(ci(n),u=s._events,u===void 0?(u=s._events=Object.create(null),s._eventsCount=0):(u.newListener!==void 0&&(s.emit("newListener",r,n.listener?n.listener:n),u=s._events),f=u[r]),f===void 0)f=u[r]=n,++s._eventsCount;else if(typeof f=="function"?f=u[r]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),a=Dh(s),a>0&&f.length>a&&!f.warned){f.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=s,l.type=r,l.count=f.length,wy(l)}return s}se.prototype.addListener=function(r,n){return Nh(this,r,n,!1)};se.prototype.on=se.prototype.addListener;se.prototype.prependListener=function(r,n){return Nh(this,r,n,!0)};function _y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Gh(s,r,n){var i={fired:!1,wrapFn:void 0,target:s,type:r,listener:n},a=_y.bind(i);return a.listener=n,i.wrapFn=a,a}se.prototype.once=function(r,n){return ci(n),this.on(r,Gh(this,r,n)),this};se.prototype.prependOnceListener=function(r,n){return ci(n),this.prependListener(r,Gh(this,r,n)),this};se.prototype.removeListener=function(r,n){var i,a,u,f,l;if(ci(n),a=this._events,a===void 0)return this;if(i=a[r],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[r],a.removeListener&&this.emit("removeListener",r,i.listener||n));else if(typeof i!="function"){for(u=-1,f=i.length-1;f>=0;f--)if(i[f]===n||i[f].listener===n){l=i[f].listener,u=f;break}if(u<0)return this;u===0?i.shift():by(i,u),i.length===1&&(a[r]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",r,l||n)}return this};se.prototype.off=se.prototype.removeListener;se.prototype.removeAllListeners=function(r){var n,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[r]),this;if(arguments.length===0){var u=Object.keys(i),f;for(a=0;a<u.length;++a)f=u[a],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[r],typeof n=="function")this.removeListener(r,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(r,n[a]);return this};function Fh(s,r,n){var i=s._events;if(i===void 0)return[];var a=i[r];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?Ey(a):kh(a,a.length)}se.prototype.listeners=function(r){return Fh(this,r,!0)};se.prototype.rawListeners=function(r){return Fh(this,r,!1)};se.listenerCount=function(s,r){return typeof s.listenerCount=="function"?s.listenerCount(r):Ih.call(s,r)};se.prototype.listenerCount=Ih;function Ih(s){var r=this._events;if(r!==void 0){var n=r[s];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}se.prototype.eventNames=function(){return this._eventsCount>0?ai(this._events):[]};function kh(s,r){for(var n=new Array(r),i=0;i<r;++i)n[i]=s[i];return n}function by(s,r){for(;r+1<s.length;r++)s[r]=s[r+1];s.pop()}function Ey(s){for(var r=new Array(s.length),n=0;n<r.length;++n)r[n]=s[n].listener||s[n];return r}function xy(s,r){return new Promise(function(n,i){function a(f){s.removeListener(r,u),i(f)}function u(){typeof s.removeListener=="function"&&s.removeListener("error",a),n([].slice.call(arguments))}Oh(s,r,u,{once:!0}),r!=="error"&&Ay(s,a,{once:!0})})}function Ay(s,r,n){typeof s.on=="function"&&Oh(s,"error",r,n)}function Oh(s,r,n,i){if(typeof s.on=="function")i.once?s.once(r,n):s.on(r,n);else if(typeof s.addEventListener=="function")s.addEventListener(r,function a(u){i.once&&s.removeEventListener(r,a),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}var Ph=to.exports;function St(s){if(typeof s!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=s}typeof Symbol<"u"&&(St.prototype[Symbol.iterator]=function(){return this});St.of=function(){var s=arguments,r=s.length,n=0;return new St(function(){return n>=r?{done:!0}:{done:!1,value:s[n++]}})};St.empty=function(){var s=new St(function(){return{done:!0}});return s};St.fromSequence=function(s){var r=0,n=s.length;return new St(function(){return r>=n?{done:!0}:{done:!1,value:s[r++]}})};St.is=function(s){return s instanceof St?!0:typeof s=="object"&&s!==null&&typeof s.next=="function"};var no=St;const at=fi(no);var ro={};ro.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";ro.SYMBOL_SUPPORT=typeof Symbol<"u";var Sy=no,Mh=ro,Cy=Mh.ARRAY_BUFFER_SUPPORT,Ry=Mh.SYMBOL_SUPPORT;function Ty(s){return typeof s=="string"||Array.isArray(s)||Cy&&ArrayBuffer.isView(s)?Sy.fromSequence(s):typeof s!="object"||s===null?null:Ry&&typeof s[Symbol.iterator]=="function"?s[Symbol.iterator]():typeof s.next=="function"?s:null}var Uh=function(r){var n=Ty(r);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Ly=Uh,Dy=function(r,n){for(var i=arguments.length>1?n:1/0,a=i!==1/0?new Array(i):[],u,f=0,l=Ly(r);;){if(f===i)return a;if(u=l.next(),u.done)return f!==n&&(a.length=f),a;a[f++]=u.value}};const $h=fi(Dy);var Ny=no,Gy=Uh,Fy=function(){var r=arguments,n=null,i=-1;return new Ny(function(){var u=null;do{if(n===null){if(i++,i>=r.length)return{done:!0};n=Gy(r[i])}if(u=n.next(),u.done===!0){n=null;continue}break}while(!0);return u})};const Ut=fi(Fy);function Iy(){const s=arguments[0];for(let r=1,n=arguments.length;r<n;r++)if(arguments[r])for(const i in arguments[r])s[i]=arguments[r][i];return s}let xe=Iy;typeof Object.assign=="function"&&(xe=Object.assign);function it(s,r,n,i){const a=s._nodes.get(r);let u=null;return a&&(i==="mixed"?u=a.out&&a.out[n]||a.undirected&&a.undirected[n]:i==="directed"?u=a.out&&a.out[n]:u=a.undirected&&a.undirected[n]),u}function Re(s){return typeof s=="object"&&s!==null}function Bh(s){let r;for(r in s)return!1;return!0}function rt(s,r,n){Object.defineProperty(s,r,{enumerable:!1,configurable:!1,writable:!0,value:n})}function mt(s,r,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(s,r,i)}function Hu(s){return!(!Re(s)||s.attributes&&!Array.isArray(s.attributes))}function ky(){let s=Math.floor(Math.random()*256)&255;return()=>s++}class io extends Error{constructor(r){super(),this.name="GraphError",this.message=r}}class M extends io{constructor(r){super(r),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,M.prototype.constructor)}}class k extends io{constructor(r){super(r),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,k.prototype.constructor)}}class K extends io{constructor(r){super(r),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,K.prototype.constructor)}}function zh(s,r){this.key=s,this.attributes=r,this.clear()}zh.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Wh(s,r){this.key=s,this.attributes=r,this.clear()}Wh.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Hh(s,r){this.key=s,this.attributes=r,this.clear()}Hh.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ln(s,r,n,i,a){this.key=r,this.attributes=a,this.undirected=s,this.source=n,this.target=i}Ln.prototype.attach=function(){let s="out",r="in";this.undirected&&(s=r="undirected");const n=this.source.key,i=this.target.key;this.source[s][i]=this,!(this.undirected&&n===i)&&(this.target[r][n]=this)};Ln.prototype.attachMulti=function(){let s="out",r="in";const n=this.source.key,i=this.target.key;this.undirected&&(s=r="undirected");const a=this.source[s],u=a[i];if(typeof u>"u"){a[i]=this,this.undirected&&n===i||(this.target[r][n]=this);return}u.previous=this,this.next=u,a[i]=this,this.target[r][n]=this};Ln.prototype.detach=function(){const s=this.source.key,r=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][r],delete this.target[i][s]};Ln.prototype.detachMulti=function(){const s=this.source.key,r=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][r],delete this.target[i][s]):(this.next.previous=void 0,this.source[n][r]=this.next,this.target[i][s]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Kh=0,Yh=1,Oy=2,qh=3;function $t(s,r,n,i,a,u,f){let l,d,v,w;if(i=""+i,n===Kh){if(l=s._nodes.get(i),!l)throw new k(`Graph.${r}: could not find the "${i}" node in the graph.`);v=a,w=u}else if(n===qh){if(a=""+a,d=s._edges.get(a),!d)throw new k(`Graph.${r}: could not find the "${a}" edge in the graph.`);const y=d.source.key,x=d.target.key;if(i===y)l=d.target;else if(i===x)l=d.source;else throw new k(`Graph.${r}: the "${i}" node is not attached to the "${a}" edge (${y}, ${x}).`);v=u,w=f}else{if(d=s._edges.get(i),!d)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`);n===Yh?l=d.source:l=d.target,v=a,w=u}return[l,v,w]}function Py(s,r,n){s.prototype[r]=function(i,a,u){const[f,l]=$t(this,r,n,i,a,u);return f.attributes[l]}}function My(s,r,n){s.prototype[r]=function(i,a){const[u]=$t(this,r,n,i,a);return u.attributes}}function Uy(s,r,n){s.prototype[r]=function(i,a,u){const[f,l]=$t(this,r,n,i,a,u);return f.attributes.hasOwnProperty(l)}}function $y(s,r,n){s.prototype[r]=function(i,a,u,f){const[l,d,v]=$t(this,r,n,i,a,u,f);return l.attributes[d]=v,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:d}),this}}function By(s,r,n){s.prototype[r]=function(i,a,u,f){const[l,d,v]=$t(this,r,n,i,a,u,f);if(typeof v!="function")throw new M(`Graph.${r}: updater should be a function.`);const w=l.attributes,y=v(w[d]);return w[d]=y,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:d}),this}}function zy(s,r,n){s.prototype[r]=function(i,a,u){const[f,l]=$t(this,r,n,i,a,u);return delete f.attributes[l],this.emit("nodeAttributesUpdated",{key:f.key,type:"remove",attributes:f.attributes,name:l}),this}}function Wy(s,r,n){s.prototype[r]=function(i,a,u){const[f,l]=$t(this,r,n,i,a,u);if(!Re(l))throw new M(`Graph.${r}: provided attributes are not a plain object.`);return f.attributes=l,this.emit("nodeAttributesUpdated",{key:f.key,type:"replace",attributes:f.attributes}),this}}function Hy(s,r,n){s.prototype[r]=function(i,a,u){const[f,l]=$t(this,r,n,i,a,u);if(!Re(l))throw new M(`Graph.${r}: provided attributes are not a plain object.`);return xe(f.attributes,l),this.emit("nodeAttributesUpdated",{key:f.key,type:"merge",attributes:f.attributes,data:l}),this}}function Ky(s,r,n){s.prototype[r]=function(i,a,u){const[f,l]=$t(this,r,n,i,a,u);if(typeof l!="function")throw new M(`Graph.${r}: provided updater is not a function.`);return f.attributes=l(f.attributes),this.emit("nodeAttributesUpdated",{key:f.key,type:"update",attributes:f.attributes}),this}}const Yy=[{name:s=>`get${s}Attribute`,attacher:Py},{name:s=>`get${s}Attributes`,attacher:My},{name:s=>`has${s}Attribute`,attacher:Uy},{name:s=>`set${s}Attribute`,attacher:$y},{name:s=>`update${s}Attribute`,attacher:By},{name:s=>`remove${s}Attribute`,attacher:zy},{name:s=>`replace${s}Attributes`,attacher:Wy},{name:s=>`merge${s}Attributes`,attacher:Hy},{name:s=>`update${s}Attributes`,attacher:Ky}];function qy(s){Yy.forEach(function({name:r,attacher:n}){n(s,r("Node"),Kh),n(s,r("Source"),Yh),n(s,r("Target"),Oy),n(s,r("Opposite"),qh)})}function Vy(s,r,n){s.prototype[r]=function(i,a){let u;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+i,l=""+a;if(a=arguments[2],u=it(this,f,l,n),!u)throw new k(`Graph.${r}: could not find an edge for the given path ("${f}" - "${l}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}return u.attributes[a]}}function Zy(s,r,n){s.prototype[r]=function(i){let a;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,f=""+arguments[1];if(a=it(this,u,f,n),!a)throw new k(`Graph.${r}: could not find an edge for the given path ("${u}" - "${f}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}return a.attributes}}function Xy(s,r,n){s.prototype[r]=function(i,a){let u;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+i,l=""+a;if(a=arguments[2],u=it(this,f,l,n),!u)throw new k(`Graph.${r}: could not find an edge for the given path ("${f}" - "${l}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}return u.attributes.hasOwnProperty(a)}}function jy(s,r,n){s.prototype[r]=function(i,a,u){let f;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,d=""+a;if(a=arguments[2],u=arguments[3],f=it(this,l,d,n),!f)throw new k(`Graph.${r}: could not find an edge for the given path ("${l}" - "${d}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,f=this._edges.get(i),!f)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}return f.attributes[a]=u,this.emit("edgeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:a}),this}}function Jy(s,r,n){s.prototype[r]=function(i,a,u){let f;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,d=""+a;if(a=arguments[2],u=arguments[3],f=it(this,l,d,n),!f)throw new k(`Graph.${r}: could not find an edge for the given path ("${l}" - "${d}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,f=this._edges.get(i),!f)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}if(typeof u!="function")throw new M(`Graph.${r}: updater should be a function.`);return f.attributes[a]=u(f.attributes[a]),this.emit("edgeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:a}),this}}function Qy(s,r,n){s.prototype[r]=function(i,a){let u;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+i,l=""+a;if(a=arguments[2],u=it(this,f,l,n),!u)throw new k(`Graph.${r}: could not find an edge for the given path ("${f}" - "${l}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}return delete u.attributes[a],this.emit("edgeAttributesUpdated",{key:u.key,type:"remove",attributes:u.attributes,name:a}),this}}function e0(s,r,n){s.prototype[r]=function(i,a){let u;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+i,l=""+a;if(a=arguments[2],u=it(this,f,l,n),!u)throw new k(`Graph.${r}: could not find an edge for the given path ("${f}" - "${l}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}if(!Re(a))throw new M(`Graph.${r}: provided attributes are not a plain object.`);return u.attributes=a,this.emit("edgeAttributesUpdated",{key:u.key,type:"replace",attributes:u.attributes}),this}}function t0(s,r,n){s.prototype[r]=function(i,a){let u;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+i,l=""+a;if(a=arguments[2],u=it(this,f,l,n),!u)throw new k(`Graph.${r}: could not find an edge for the given path ("${f}" - "${l}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}if(!Re(a))throw new M(`Graph.${r}: provided attributes are not a plain object.`);return xe(u.attributes,a),this.emit("edgeAttributesUpdated",{key:u.key,type:"merge",attributes:u.attributes,data:a}),this}}function n0(s,r,n){s.prototype[r]=function(i,a){let u;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${r}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${r}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+i,l=""+a;if(a=arguments[2],u=it(this,f,l,n),!u)throw new k(`Graph.${r}: could not find an edge for the given path ("${f}" - "${l}").`)}else{if(n!=="mixed")throw new K(`Graph.${r}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new k(`Graph.${r}: could not find the "${i}" edge in the graph.`)}if(typeof a!="function")throw new M(`Graph.${r}: provided updater is not a function.`);return u.attributes=a(u.attributes),this.emit("edgeAttributesUpdated",{key:u.key,type:"update",attributes:u.attributes}),this}}const r0=[{name:s=>`get${s}Attribute`,attacher:Vy},{name:s=>`get${s}Attributes`,attacher:Zy},{name:s=>`has${s}Attribute`,attacher:Xy},{name:s=>`set${s}Attribute`,attacher:jy},{name:s=>`update${s}Attribute`,attacher:Jy},{name:s=>`remove${s}Attribute`,attacher:Qy},{name:s=>`replace${s}Attributes`,attacher:e0},{name:s=>`merge${s}Attributes`,attacher:t0},{name:s=>`update${s}Attributes`,attacher:n0}];function i0(s){r0.forEach(function({name:r,attacher:n}){n(s,r("Edge"),"mixed"),n(s,r("DirectedEdge"),"directed"),n(s,r("UndirectedEdge"),"undirected")})}const a0=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function o0(s,r,n,i){let a=!1;for(const u in r){if(u===i)continue;const f=r[u];if(a=n(f.key,f.attributes,f.source.key,f.target.key,f.source.attributes,f.target.attributes,f.undirected),s&&a)return f.key}}function s0(s,r,n,i){let a,u,f,l=!1;for(const d in r)if(d!==i){a=r[d];do{if(u=a.source,f=a.target,l=n(a.key,a.attributes,u.key,f.key,u.attributes,f.attributes,a.undirected),s&&l)return a.key;a=a.next}while(a!==void 0)}}function Pa(s,r){const n=Object.keys(s),i=n.length;let a,u=0;return new at(function(){do if(a)a=a.next;else{if(u>=i)return{done:!0};const l=n[u++];if(l===r){a=void 0;continue}a=s[l]}while(!a);return{done:!1,value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected}}})}function u0(s,r,n,i){const a=r[n];if(!a)return;const u=a.source,f=a.target;if(i(a.key,a.attributes,u.key,f.key,u.attributes,f.attributes,a.undirected)&&s)return a.key}function h0(s,r,n,i){let a=r[n];if(!a)return;let u=!1;do{if(u=i(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),s&&u)return a.key;a=a.next}while(a!==void 0)}function Ma(s,r){let n=s[r];return n.next!==void 0?new at(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):at.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function f0(s,r){if(s.size===0)return[];if(r==="mixed"||r===s.type)return typeof Array.from=="function"?Array.from(s._edges.keys()):$h(s._edges.keys(),s._edges.size);const n=r==="undirected"?s.undirectedSize:s.directedSize,i=new Array(n),a=r==="undirected",u=s._edges.values();let f=0,l,d;for(;l=u.next(),l.done!==!0;)d=l.value,d.undirected===a&&(i[f++]=d.key);return i}function Vh(s,r,n,i){if(r.size===0)return;const a=n!=="mixed"&&n!==r.type,u=n==="undirected";let f,l,d=!1;const v=r._edges.values();for(;f=v.next(),f.done!==!0;){if(l=f.value,a&&l.undirected!==u)continue;const{key:w,attributes:y,source:x,target:S}=l;if(d=i(w,y,x.key,S.key,x.attributes,S.attributes,l.undirected),s&&d)return w}}function l0(s,r){if(s.size===0)return at.empty();const n=r!=="mixed"&&r!==s.type,i=r==="undirected",a=s._edges.values();return new at(function(){let f,l;for(;;){if(f=a.next(),f.done)return f;if(l=f.value,!(n&&l.undirected!==i))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function ao(s,r,n,i,a,u){const f=r?s0:o0;let l;if(n!=="undirected"&&(i!=="out"&&(l=f(s,a.in,u),s&&l)||i!=="in"&&(l=f(s,a.out,u,i?void 0:a.key),s&&l))||n!=="directed"&&(l=f(s,a.undirected,u),s&&l))return l}function c0(s,r,n,i){const a=[];return ao(!1,s,r,n,i,function(u){a.push(u)}),a}function d0(s,r,n){let i=at.empty();return s!=="undirected"&&(r!=="out"&&typeof n.in<"u"&&(i=Ut(i,Pa(n.in))),r!=="in"&&typeof n.out<"u"&&(i=Ut(i,Pa(n.out,r?void 0:n.key)))),s!=="directed"&&typeof n.undirected<"u"&&(i=Ut(i,Pa(n.undirected))),i}function oo(s,r,n,i,a,u,f){const l=n?h0:u0;let d;if(r!=="undirected"&&(typeof a.in<"u"&&i!=="out"&&(d=l(s,a.in,u,f),s&&d)||typeof a.out<"u"&&i!=="in"&&(i||a.key!==u)&&(d=l(s,a.out,u,f),s&&d))||r!=="directed"&&typeof a.undirected<"u"&&(d=l(s,a.undirected,u,f),s&&d))return d}function g0(s,r,n,i,a){const u=[];return oo(!1,s,r,n,i,a,function(f){u.push(f)}),u}function p0(s,r,n,i){let a=at.empty();return s!=="undirected"&&(typeof n.in<"u"&&r!=="out"&&i in n.in&&(a=Ut(a,Ma(n.in,i))),typeof n.out<"u"&&r!=="in"&&i in n.out&&(r||n.key!==i)&&(a=Ut(a,Ma(n.out,i)))),s!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(a=Ut(a,Ma(n.undirected,i))),a}function v0(s,r){const{name:n,type:i,direction:a}=r;s.prototype[n]=function(u,f){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return f0(this,i);if(arguments.length===1){u=""+u;const l=this._nodes.get(u);if(typeof l>"u")throw new k(`Graph.${n}: could not find the "${u}" node in the graph.`);return c0(this.multi,i==="mixed"?this.type:i,a,l)}if(arguments.length===2){u=""+u,f=""+f;const l=this._nodes.get(u);if(!l)throw new k(`Graph.${n}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(f))throw new k(`Graph.${n}:  could not find the "${f}" target node in the graph.`);return g0(i,this.multi,a,l,f)}throw new M(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function m0(s,r){const{name:n,type:i,direction:a}=r,u="forEach"+n[0].toUpperCase()+n.slice(1,-1);s.prototype[u]=function(v,w,y){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return y=v,Vh(!1,this,i,y);if(arguments.length===2){v=""+v,y=w;const x=this._nodes.get(v);if(typeof x>"u")throw new k(`Graph.${u}: could not find the "${v}" node in the graph.`);return ao(!1,this.multi,i==="mixed"?this.type:i,a,x,y)}if(arguments.length===3){v=""+v,w=""+w;const x=this._nodes.get(v);if(!x)throw new k(`Graph.${u}:  could not find the "${v}" source node in the graph.`);if(!this._nodes.has(w))throw new k(`Graph.${u}:  could not find the "${w}" target node in the graph.`);return oo(!1,i,this.multi,a,x,w,y)}throw new M(`Graph.${u}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const f="map"+n[0].toUpperCase()+n.slice(1);s.prototype[f]=function(){const v=Array.prototype.slice.call(arguments),w=v.pop();let y;if(v.length===0){let x=0;i!=="directed"&&(x+=this.undirectedSize),i!=="undirected"&&(x+=this.directedSize),y=new Array(x);let S=0;v.push((D,N,I,$,P,B,W)=>{y[S++]=w(D,N,I,$,P,B,W)})}else y=[],v.push((x,S,D,N,I,$,P)=>{y.push(w(x,S,D,N,I,$,P))});return this[u].apply(this,v),y};const l="filter"+n[0].toUpperCase()+n.slice(1);s.prototype[l]=function(){const v=Array.prototype.slice.call(arguments),w=v.pop(),y=[];return v.push((x,S,D,N,I,$,P)=>{w(x,S,D,N,I,$,P)&&y.push(x)}),this[u].apply(this,v),y};const d="reduce"+n[0].toUpperCase()+n.slice(1);s.prototype[d]=function(){let v=Array.prototype.slice.call(arguments);if(v.length<2||v.length>4)throw new M(`Graph.${d}: invalid number of arguments (expecting 2, 3 or 4 and got ${v.length}).`);if(typeof v[v.length-1]=="function"&&typeof v[v.length-2]!="function")throw new M(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let w,y;v.length===2?(w=v[0],y=v[1],v=[]):v.length===3?(w=v[1],y=v[2],v=[v[0]]):v.length===4&&(w=v[2],y=v[3],v=[v[0],v[1]]);let x=y;return v.push((S,D,N,I,$,P,B)=>{x=w(x,S,D,N,I,$,P,B)}),this[u].apply(this,v),x}}function y0(s,r){const{name:n,type:i,direction:a}=r,u="find"+n[0].toUpperCase()+n.slice(1,-1);s.prototype[u]=function(d,v,w){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return w=d,Vh(!0,this,i,w);if(arguments.length===2){d=""+d,w=v;const y=this._nodes.get(d);if(typeof y>"u")throw new k(`Graph.${u}: could not find the "${d}" node in the graph.`);return ao(!0,this.multi,i==="mixed"?this.type:i,a,y,w)}if(arguments.length===3){d=""+d,v=""+v;const y=this._nodes.get(d);if(!y)throw new k(`Graph.${u}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(v))throw new k(`Graph.${u}:  could not find the "${v}" target node in the graph.`);return oo(!0,i,this.multi,a,y,v,w)}throw new M(`Graph.${u}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const f="some"+n[0].toUpperCase()+n.slice(1,-1);s.prototype[f]=function(){const d=Array.prototype.slice.call(arguments),v=d.pop();return d.push((y,x,S,D,N,I,$)=>v(y,x,S,D,N,I,$)),!!this[u].apply(this,d)};const l="every"+n[0].toUpperCase()+n.slice(1,-1);s.prototype[l]=function(){const d=Array.prototype.slice.call(arguments),v=d.pop();return d.push((y,x,S,D,N,I,$)=>!v(y,x,S,D,N,I,$)),!this[u].apply(this,d)}}function w0(s,r){const{name:n,type:i,direction:a}=r,u=n.slice(0,-1)+"Entries";s.prototype[u]=function(f,l){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return at.empty();if(!arguments.length)return l0(this,i);if(arguments.length===1){f=""+f;const d=this._nodes.get(f);if(!d)throw new k(`Graph.${u}: could not find the "${f}" node in the graph.`);return d0(i,a,d)}if(arguments.length===2){f=""+f,l=""+l;const d=this._nodes.get(f);if(!d)throw new k(`Graph.${u}:  could not find the "${f}" source node in the graph.`);if(!this._nodes.has(l))throw new k(`Graph.${u}:  could not find the "${l}" target node in the graph.`);return p0(i,a,d,l)}throw new M(`Graph.${u}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function _0(s){a0.forEach(r=>{v0(s,r),m0(s,r),y0(s,r),w0(s,r)})}const b0=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function di(){this.A=null,this.B=null}di.prototype.wrap=function(s){this.A===null?this.A=s:this.B===null&&(this.B=s)};di.prototype.has=function(s){return this.A!==null&&s in this.A||this.B!==null&&s in this.B};function ir(s,r,n,i,a){for(const u in i){const f=i[u],l=f.source,d=f.target,v=l===n?d:l;if(r&&r.has(v.key))continue;const w=a(v.key,v.attributes);if(s&&w)return v.key}}function so(s,r,n,i,a){if(r!=="mixed"){if(r==="undirected")return ir(s,null,i,i.undirected,a);if(typeof n=="string")return ir(s,null,i,i[n],a)}const u=new di;let f;if(r!=="undirected"){if(n!=="out"){if(f=ir(s,null,i,i.in,a),s&&f)return f;u.wrap(i.in)}if(n!=="in"){if(f=ir(s,u,i,i.out,a),s&&f)return f;u.wrap(i.out)}}if(r!=="directed"&&(f=ir(s,u,i,i.undirected,a),s&&f))return f}function E0(s,r,n){if(s!=="mixed"){if(s==="undirected")return Object.keys(n.undirected);if(typeof r=="string")return Object.keys(n[r])}const i=[];return so(!1,s,r,n,function(a){i.push(a)}),i}function ar(s,r,n){const i=Object.keys(n),a=i.length;let u=0;return new at(function(){let l=null;do{if(u>=a)return s&&s.wrap(n),{done:!0};const d=n[i[u++]],v=d.source,w=d.target;if(l=v===r?w:v,s&&s.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function x0(s,r,n){if(s!=="mixed"){if(s==="undirected")return ar(null,n,n.undirected);if(typeof r=="string")return ar(null,n,n[r])}let i=at.empty();const a=new di;return s!=="undirected"&&(r!=="out"&&(i=Ut(i,ar(a,n,n.in))),r!=="in"&&(i=Ut(i,ar(a,n,n.out)))),s!=="directed"&&(i=Ut(i,ar(a,n,n.undirected))),i}function A0(s,r){const{name:n,type:i,direction:a}=r;s.prototype[n]=function(u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];u=""+u;const f=this._nodes.get(u);if(typeof f>"u")throw new k(`Graph.${n}: could not find the "${u}" node in the graph.`);return E0(i==="mixed"?this.type:i,a,f)}}function S0(s,r){const{name:n,type:i,direction:a}=r,u="forEach"+n[0].toUpperCase()+n.slice(1,-1);s.prototype[u]=function(v,w){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;v=""+v;const y=this._nodes.get(v);if(typeof y>"u")throw new k(`Graph.${u}: could not find the "${v}" node in the graph.`);so(!1,i==="mixed"?this.type:i,a,y,w)};const f="map"+n[0].toUpperCase()+n.slice(1);s.prototype[f]=function(v,w){const y=[];return this[u](v,(x,S)=>{y.push(w(x,S))}),y};const l="filter"+n[0].toUpperCase()+n.slice(1);s.prototype[l]=function(v,w){const y=[];return this[u](v,(x,S)=>{w(x,S)&&y.push(x)}),y};const d="reduce"+n[0].toUpperCase()+n.slice(1);s.prototype[d]=function(v,w,y){if(arguments.length<3)throw new M(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let x=y;return this[u](v,(S,D)=>{x=w(x,S,D)}),x}}function C0(s,r){const{name:n,type:i,direction:a}=r,u=n[0].toUpperCase()+n.slice(1,-1),f="find"+u;s.prototype[f]=function(v,w){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;v=""+v;const y=this._nodes.get(v);if(typeof y>"u")throw new k(`Graph.${f}: could not find the "${v}" node in the graph.`);return so(!0,i==="mixed"?this.type:i,a,y,w)};const l="some"+u;s.prototype[l]=function(v,w){return!!this[f](v,w)};const d="every"+u;s.prototype[d]=function(v,w){return!this[f](v,(x,S)=>!w(x,S))}}function R0(s,r){const{name:n,type:i,direction:a}=r,u=n.slice(0,-1)+"Entries";s.prototype[u]=function(f){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return at.empty();f=""+f;const l=this._nodes.get(f);if(typeof l>"u")throw new k(`Graph.${u}: could not find the "${f}" node in the graph.`);return x0(i==="mixed"?this.type:i,a,l)}}function T0(s){b0.forEach(r=>{A0(s,r),S0(s,r),C0(s,r),R0(s,r)})}function ei(s,r,n,i,a){const u=i._nodes.values(),f=i.type;let l,d,v,w,y,x,S;for(;l=u.next(),l.done!==!0;){let D=!1;if(d=l.value,f!=="undirected"){w=d.out;for(v in w){y=w[v];do{if(x=y.target,D=!0,S=a(d.key,x.key,d.attributes,x.attributes,y.key,y.attributes,y.undirected),s&&S)return y;y=y.next}while(y)}}if(f!=="directed"){w=d.undirected;for(v in w)if(!(r&&d.key>v)){y=w[v];do{if(x=y.target,x.key!==v&&(x=y.source),D=!0,S=a(d.key,x.key,d.attributes,x.attributes,y.key,y.attributes,y.undirected),s&&S)return y;y=y.next}while(y)}}if(n&&!D&&(S=a(d.key,null,d.attributes,null,null,null,null),s&&S))return null}}function L0(s,r){const n={key:s};return Bh(r.attributes)||(n.attributes=xe({},r.attributes)),n}function D0(s,r,n){const i={key:r,source:n.source.key,target:n.target.key};return Bh(n.attributes)||(i.attributes=xe({},n.attributes)),s==="mixed"&&n.undirected&&(i.undirected=!0),i}function N0(s){if(!Re(s))throw new M('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in s))throw new M("Graph.import: serialized node is missing its key.");if("attributes"in s&&(!Re(s.attributes)||s.attributes===null))throw new M("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function G0(s){if(!Re(s))throw new M('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in s))throw new M("Graph.import: serialized edge is missing its source.");if(!("target"in s))throw new M("Graph.import: serialized edge is missing its target.");if("attributes"in s&&(!Re(s.attributes)||s.attributes===null))throw new M("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in s&&typeof s.undirected!="boolean")throw new M("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const F0=ky(),I0=new Set(["directed","undirected","mixed"]),Ku=new Set(["domain","_events","_eventsCount","_maxListeners"]),k0=[{name:s=>`${s}Edge`,generateKey:!0},{name:s=>`${s}DirectedEdge`,generateKey:!0,type:"directed"},{name:s=>`${s}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:s=>`${s}EdgeWithKey`},{name:s=>`${s}DirectedEdgeWithKey`,type:"directed"},{name:s=>`${s}UndirectedEdgeWithKey`,type:"undirected"}],O0={allowSelfLoops:!0,multi:!1,type:"mixed"};function P0(s,r,n){if(n&&!Re(n))throw new M(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(r=""+r,n=n||{},s._nodes.has(r))throw new K(`Graph.addNode: the "${r}" node already exist in the graph.`);const i=new s.NodeDataClass(r,n);return s._nodes.set(r,i),s.emit("nodeAdded",{key:r,attributes:n}),i}function Yu(s,r,n){const i=new s.NodeDataClass(r,n);return s._nodes.set(r,i),s.emit("nodeAdded",{key:r,attributes:n}),i}function Zh(s,r,n,i,a,u,f,l){if(!i&&s.type==="undirected")throw new K(`Graph.${r}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&s.type==="directed")throw new K(`Graph.${r}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Re(l))throw new M(`Graph.${r}: invalid attributes. Expecting an object but got "${l}"`);if(u=""+u,f=""+f,l=l||{},!s.allowSelfLoops&&u===f)throw new K(`Graph.${r}: source & target are the same ("${u}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const d=s._nodes.get(u),v=s._nodes.get(f);if(!d)throw new k(`Graph.${r}: source node "${u}" not found.`);if(!v)throw new k(`Graph.${r}: target node "${f}" not found.`);const w={key:null,undirected:i,source:u,target:f,attributes:l};if(n)a=s._edgeKeyGenerator();else if(a=""+a,s._edges.has(a))throw new K(`Graph.${r}: the "${a}" edge already exists in the graph.`);if(!s.multi&&(i?typeof d.undirected[f]<"u":typeof d.out[f]<"u"))throw new K(`Graph.${r}: an edge linking "${u}" to "${f}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const y=new Ln(i,a,d,v,l);s._edges.set(a,y);const x=u===f;return i?(d.undirectedDegree++,v.undirectedDegree++,x&&(d.undirectedLoops++,s._undirectedSelfLoopCount++)):(d.outDegree++,v.inDegree++,x&&(d.directedLoops++,s._directedSelfLoopCount++)),s.multi?y.attachMulti():y.attach(),i?s._undirectedSize++:s._directedSize++,w.key=a,s.emit("edgeAdded",w),a}function M0(s,r,n,i,a,u,f,l,d){if(!i&&s.type==="undirected")throw new K(`Graph.${r}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&s.type==="directed")throw new K(`Graph.${r}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(d){if(typeof l!="function")throw new M(`Graph.${r}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Re(l))throw new M(`Graph.${r}: invalid attributes. Expecting an object but got "${l}"`)}u=""+u,f=""+f;let v;if(d&&(v=l,l=void 0),!s.allowSelfLoops&&u===f)throw new K(`Graph.${r}: source & target are the same ("${u}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let w=s._nodes.get(u),y=s._nodes.get(f),x,S;if(!n&&(x=s._edges.get(a),x)){if((x.source.key!==u||x.target.key!==f)&&(!i||x.source.key!==f||x.target.key!==u))throw new K(`Graph.${r}: inconsistency detected when attempting to merge the "${a}" edge with "${u}" source & "${f}" target vs. ("${x.source.key}", "${x.target.key}").`);S=x}if(!S&&!s.multi&&w&&(S=i?w.undirected[f]:w.out[f]),S){const P=[S.key,!1,!1,!1];if(d?!v:!l)return P;if(d){const B=S.attributes;S.attributes=v(B),s.emit("edgeAttributesUpdated",{type:"replace",key:S.key,attributes:S.attributes})}else xe(S.attributes,l),s.emit("edgeAttributesUpdated",{type:"merge",key:S.key,attributes:S.attributes,data:l});return P}l=l||{},d&&v&&(l=v(l));const D={key:null,undirected:i,source:u,target:f,attributes:l};if(n)a=s._edgeKeyGenerator();else if(a=""+a,s._edges.has(a))throw new K(`Graph.${r}: the "${a}" edge already exists in the graph.`);let N=!1,I=!1;w||(w=Yu(s,u,{}),N=!0,u===f&&(y=w,I=!0)),y||(y=Yu(s,f,{}),I=!0),x=new Ln(i,a,w,y,l),s._edges.set(a,x);const $=u===f;return i?(w.undirectedDegree++,y.undirectedDegree++,$&&(w.undirectedLoops++,s._undirectedSelfLoopCount++)):(w.outDegree++,y.inDegree++,$&&(w.directedLoops++,s._directedSelfLoopCount++)),s.multi?x.attachMulti():x.attach(),i?s._undirectedSize++:s._directedSize++,D.key=a,s.emit("edgeAdded",D),[a,!0,N,I]}function Sn(s,r){s._edges.delete(r.key);const{source:n,target:i,attributes:a}=r,u=r.undirected,f=n===i;u?(n.undirectedDegree--,i.undirectedDegree--,f&&(n.undirectedLoops--,s._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,f&&(n.directedLoops--,s._directedSelfLoopCount--)),s.multi?r.detachMulti():r.detach(),u?s._undirectedSize--:s._directedSize--,s.emit("edgeDropped",{key:r.key,attributes:a,source:n.key,target:i.key,undirected:u})}class ue extends Ph.EventEmitter{constructor(r){if(super(),r=xe({},O0,r),typeof r.multi!="boolean")throw new M(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${r.multi}".`);if(!I0.has(r.type))throw new M(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${r.type}".`);if(typeof r.allowSelfLoops!="boolean")throw new M(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${r.allowSelfLoops}".`);const n=r.type==="mixed"?zh:r.type==="directed"?Wh:Hh;rt(this,"NodeDataClass",n);const i="geid_"+F0()+"_";let a=0;const u=()=>{let f;do f=i+a++;while(this._edges.has(f));return f};rt(this,"_attributes",{}),rt(this,"_nodes",new Map),rt(this,"_edges",new Map),rt(this,"_directedSize",0),rt(this,"_undirectedSize",0),rt(this,"_directedSelfLoopCount",0),rt(this,"_undirectedSelfLoopCount",0),rt(this,"_edgeKeyGenerator",u),rt(this,"_options",r),Ku.forEach(f=>rt(this,f,this[f])),mt(this,"order",()=>this._nodes.size),mt(this,"size",()=>this._edges.size),mt(this,"directedSize",()=>this._directedSize),mt(this,"undirectedSize",()=>this._undirectedSize),mt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),mt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),mt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),mt(this,"multi",this._options.multi),mt(this,"type",this._options.type),mt(this,"allowSelfLoops",this._options.allowSelfLoops),mt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(r){return this._nodes.has(""+r)}hasDirectedEdge(r,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+r,a=this._edges.get(i);return!!a&&!a.undirected}else if(arguments.length===2){r=""+r,n=""+n;const i=this._nodes.get(r);return i?i.out.hasOwnProperty(n):!1}throw new M(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(r,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+r,a=this._edges.get(i);return!!a&&a.undirected}else if(arguments.length===2){r=""+r,n=""+n;const i=this._nodes.get(r);return i?i.undirected.hasOwnProperty(n):!1}throw new M(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(r,n){if(arguments.length===1){const i=""+r;return this._edges.has(i)}else if(arguments.length===2){r=""+r,n=""+n;const i=this._nodes.get(r);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new M(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(r,n){if(this.type==="undirected")return;if(r=""+r,n=""+n,this.multi)throw new K("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(r);if(!i)throw new k(`Graph.directedEdge: could not find the "${r}" source node in the graph.`);if(!this._nodes.has(n))throw new k(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const a=i.out&&i.out[n]||void 0;if(a)return a.key}undirectedEdge(r,n){if(this.type==="directed")return;if(r=""+r,n=""+n,this.multi)throw new K("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(r);if(!i)throw new k(`Graph.undirectedEdge: could not find the "${r}" source node in the graph.`);if(!this._nodes.has(n))throw new k(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const a=i.undirected&&i.undirected[n]||void 0;if(a)return a.key}edge(r,n){if(this.multi)throw new K("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.edge: could not find the "${r}" source node in the graph.`);if(!this._nodes.has(n))throw new k(`Graph.edge: could not find the "${n}" target node in the graph.`);const a=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(a)return a.key}areDirectedNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areDirectedNeighbors: could not find the "${r}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areOutNeighbors: could not find the "${r}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areInNeighbors: could not find the "${r}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areUndirectedNeighbors: could not find the "${r}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areNeighbors: could not find the "${r}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areInboundNeighbors: could not find the "${r}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(r,n){r=""+r,n=""+n;const i=this._nodes.get(r);if(!i)throw new k(`Graph.areOutboundNeighbors: could not find the "${r}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.inDegree: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.outDegree: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.directedDegree: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.undirectedDegree: could not find the "${r}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.inboundDegree: could not find the "${r}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.outboundDegree: could not find the "${r}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.degree: could not find the "${r}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.inDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.outDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.directedDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=n.undirectedDegree,a+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,a+=n.directedLoops),i-a}outboundDegreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=n.undirectedDegree,a+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,a+=n.directedLoops),i-a}degreeWithoutSelfLoops(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.degreeWithoutSelfLoops: could not find the "${r}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=n.undirectedDegree,a+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,a+=n.directedLoops*2),i-a}source(r){r=""+r;const n=this._edges.get(r);if(!n)throw new k(`Graph.source: could not find the "${r}" edge in the graph.`);return n.source.key}target(r){r=""+r;const n=this._edges.get(r);if(!n)throw new k(`Graph.target: could not find the "${r}" edge in the graph.`);return n.target.key}extremities(r){r=""+r;const n=this._edges.get(r);if(!n)throw new k(`Graph.extremities: could not find the "${r}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(r,n){r=""+r,n=""+n;const i=this._edges.get(n);if(!i)throw new k(`Graph.opposite: could not find the "${n}" edge in the graph.`);const a=i.source.key,u=i.target.key;if(r===a)return u;if(r===u)return a;throw new k(`Graph.opposite: the "${r}" node is not attached to the "${n}" edge (${a}, ${u}).`)}hasExtremity(r,n){r=""+r,n=""+n;const i=this._edges.get(r);if(!i)throw new k(`Graph.hasExtremity: could not find the "${r}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(r){r=""+r;const n=this._edges.get(r);if(!n)throw new k(`Graph.isUndirected: could not find the "${r}" edge in the graph.`);return n.undirected}isDirected(r){r=""+r;const n=this._edges.get(r);if(!n)throw new k(`Graph.isDirected: could not find the "${r}" edge in the graph.`);return!n.undirected}isSelfLoop(r){r=""+r;const n=this._edges.get(r);if(!n)throw new k(`Graph.isSelfLoop: could not find the "${r}" edge in the graph.`);return n.source===n.target}addNode(r,n){return P0(this,r,n).key}mergeNode(r,n){if(n&&!Re(n))throw new M(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);r=""+r,n=n||{};let i=this._nodes.get(r);return i?(n&&(xe(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:r,attributes:i.attributes,data:n})),[r,!1]):(i=new this.NodeDataClass(r,n),this._nodes.set(r,i),this.emit("nodeAdded",{key:r,attributes:n}),[r,!0])}updateNode(r,n){if(n&&typeof n!="function")throw new M(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);r=""+r;let i=this._nodes.get(r);if(i){if(n){const u=i.attributes;i.attributes=n(u),this.emit("nodeAttributesUpdated",{type:"replace",key:r,attributes:i.attributes})}return[r,!1]}const a=n?n({}):{};return i=new this.NodeDataClass(r,a),this._nodes.set(r,i),this.emit("nodeAdded",{key:r,attributes:a}),[r,!0]}dropNode(r){r=""+r;const n=this._nodes.get(r);if(!n)throw new k(`Graph.dropNode: could not find the "${r}" node in the graph.`);let i;if(this.type!=="undirected"){for(const a in n.out){i=n.out[a];do Sn(this,i),i=i.next;while(i)}for(const a in n.in){i=n.in[a];do Sn(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const a in n.undirected){i=n.undirected[a];do Sn(this,i),i=i.next;while(i)}this._nodes.delete(r),this.emit("nodeDropped",{key:r,attributes:n.attributes})}dropEdge(r){let n;if(arguments.length>1){const i=""+arguments[0],a=""+arguments[1];if(n=it(this,i,a,this.type),!n)throw new k(`Graph.dropEdge: could not find the "${i}" -> "${a}" edge in the graph.`)}else if(r=""+r,n=this._edges.get(r),!n)throw new k(`Graph.dropEdge: could not find the "${r}" edge in the graph.`);return Sn(this,n),this}dropDirectedEdge(r,n){if(arguments.length<2)throw new K("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new K("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");r=""+r,n=""+n;const i=it(this,r,n,"directed");if(!i)throw new k(`Graph.dropDirectedEdge: could not find a "${r}" -> "${n}" edge in the graph.`);return Sn(this,i),this}dropUndirectedEdge(r,n){if(arguments.length<2)throw new K("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new K("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=it(this,r,n,"undirected");if(!i)throw new k(`Graph.dropUndirectedEdge: could not find a "${r}" -> "${n}" edge in the graph.`);return Sn(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const r=this._nodes.values();let n;for(;n=r.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(r){return this._attributes[r]}getAttributes(){return this._attributes}hasAttribute(r){return this._attributes.hasOwnProperty(r)}setAttribute(r,n){return this._attributes[r]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:r}),this}updateAttribute(r,n){if(typeof n!="function")throw new M("Graph.updateAttribute: updater should be a function.");const i=this._attributes[r];return this._attributes[r]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:r}),this}removeAttribute(r){return delete this._attributes[r],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:r}),this}replaceAttributes(r){if(!Re(r))throw new M("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=r,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(r){if(!Re(r))throw new M("Graph.mergeAttributes: provided attributes are not a plain object.");return xe(this._attributes,r),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:r}),this}updateAttributes(r){if(typeof r!="function")throw new M("Graph.updateAttributes: provided updater is not a function.");return this._attributes=r(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(r,n){if(typeof r!="function")throw new M("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Hu(n))throw new M("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let a,u;for(;a=i.next(),a.done!==!0;)u=a.value,u.attributes=r(u.key,u.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(r,n){if(typeof r!="function")throw new M("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Hu(n))throw new M("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let a,u,f,l;for(;a=i.next(),a.done!==!0;)u=a.value,f=u.source,l=u.target,u.attributes=r(u.key,u.attributes,f.key,l.key,f.attributes,l.attributes,u.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(r){if(typeof r!="function")throw new M("Graph.forEachAdjacencyEntry: expecting a callback.");ei(!1,!1,!1,this,r)}forEachAdjacencyEntryWithOrphans(r){if(typeof r!="function")throw new M("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ei(!1,!1,!0,this,r)}forEachAssymetricAdjacencyEntry(r){if(typeof r!="function")throw new M("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ei(!1,!0,!1,this,r)}forEachAssymetricAdjacencyEntryWithOrphans(r){if(typeof r!="function")throw new M("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ei(!1,!0,!0,this,r)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):$h(this._nodes.keys(),this._nodes.size)}forEachNode(r){if(typeof r!="function")throw new M("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,a;for(;i=n.next(),i.done!==!0;)a=i.value,r(a.key,a.attributes)}findNode(r){if(typeof r!="function")throw new M("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,a;for(;i=n.next(),i.done!==!0;)if(a=i.value,r(a.key,a.attributes))return a.key}mapNodes(r){if(typeof r!="function")throw new M("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,a;const u=new Array(this.order);let f=0;for(;i=n.next(),i.done!==!0;)a=i.value,u[f++]=r(a.key,a.attributes);return u}someNode(r){if(typeof r!="function")throw new M("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,a;for(;i=n.next(),i.done!==!0;)if(a=i.value,r(a.key,a.attributes))return!0;return!1}everyNode(r){if(typeof r!="function")throw new M("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,a;for(;i=n.next(),i.done!==!0;)if(a=i.value,!r(a.key,a.attributes))return!1;return!0}filterNodes(r){if(typeof r!="function")throw new M("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,a;const u=[];for(;i=n.next(),i.done!==!0;)a=i.value,r(a.key,a.attributes)&&u.push(a.key);return u}reduceNodes(r,n){if(typeof r!="function")throw new M("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new M("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const a=this._nodes.values();let u,f;for(;u=a.next(),u.done!==!0;)f=u.value,i=r(i,f.key,f.attributes);return i}nodeEntries(){const r=this._nodes.values();return new at(()=>{const n=r.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const r=new Array(this._nodes.size);let n=0;this._nodes.forEach((a,u)=>{r[n++]=L0(u,a)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((a,u)=>{i[n++]=D0(this.type,u,a)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:r,edges:i}}import(r,n=!1){if(r instanceof ue)return r.forEachNode((d,v)=>{n?this.mergeNode(d,v):this.addNode(d,v)}),r.forEachEdge((d,v,w,y,x,S,D)=>{n?D?this.mergeUndirectedEdgeWithKey(d,w,y,v):this.mergeDirectedEdgeWithKey(d,w,y,v):D?this.addUndirectedEdgeWithKey(d,w,y,v):this.addDirectedEdgeWithKey(d,w,y,v)}),this;if(!Re(r))throw new M("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(r.attributes){if(!Re(r.attributes))throw new M("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(r.attributes):this.replaceAttributes(r.attributes)}let i,a,u,f,l;if(r.nodes){if(u=r.nodes,!Array.isArray(u))throw new M("Graph.import: invalid nodes. Expecting an array.");for(i=0,a=u.length;i<a;i++){f=u[i],N0(f);const{key:d,attributes:v}=f;n?this.mergeNode(d,v):this.addNode(d,v)}}if(r.edges){let d=!1;if(this.type==="undirected"&&(d=!0),u=r.edges,!Array.isArray(u))throw new M("Graph.import: invalid edges. Expecting an array.");for(i=0,a=u.length;i<a;i++){l=u[i],G0(l);const{source:v,target:w,attributes:y,undirected:x=d}=l;let S;"key"in l?(S=n?x?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:x?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,S.call(this,l.key,v,w,y)):(S=n?x?this.mergeUndirectedEdge:this.mergeDirectedEdge:x?this.addUndirectedEdge:this.addDirectedEdge,S.call(this,v,w,y))}}return this}nullCopy(r){const n=new ue(xe({},this._options,r));return n.replaceAttributes(xe({},this.getAttributes())),n}emptyCopy(r){const n=this.nullCopy(r);return this._nodes.forEach((i,a)=>{const u=xe({},i.attributes);i=new n.NodeDataClass(a,u),n._nodes.set(a,i)}),n}copy(r){if(r=r||{},typeof r.type=="string"&&r.type!==this.type&&r.type!=="mixed")throw new K(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${r.type}" because this would mean losing information about the current graph.`);if(typeof r.multi=="boolean"&&r.multi!==this.multi&&r.multi!==!0)throw new K("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof r.allowSelfLoops=="boolean"&&r.allowSelfLoops!==this.allowSelfLoops&&r.allowSelfLoops!==!0)throw new K("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(r),i=this._edges.values();let a,u;for(;a=i.next(),a.done!==!0;)u=a.value,Zh(n,"copy",!1,u.undirected,u.key,u.source.key,u.target.key,xe({},u.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const r={};this._nodes.forEach((u,f)=>{r[f]=u.attributes});const n={},i={};this._edges.forEach((u,f)=>{const l=u.undirected?"--":"->";let d="",v=u.source.key,w=u.target.key,y;u.undirected&&v>w&&(y=v,v=w,w=y);const x=`(${v})${l}(${w})`;f.startsWith("geid_")?this.multi&&(typeof i[x]>"u"?i[x]=0:i[x]++,d+=`${i[x]}. `):d+=`[${f}]: `,d+=x,n[d]=u.attributes});const a={};for(const u in this)this.hasOwnProperty(u)&&!Ku.has(u)&&typeof this[u]!="function"&&typeof u!="symbol"&&(a[u]=this[u]);return a.attributes=this._attributes,a.nodes=r,a.edges=n,rt(a,"constructor",this.constructor),a}}typeof Symbol<"u"&&(ue.prototype[Symbol.for("nodejs.util.inspect.custom")]=ue.prototype.inspect);k0.forEach(s=>{["add","merge","update"].forEach(r=>{const n=s.name(r),i=r==="add"?Zh:M0;s.generateKey?ue.prototype[n]=function(a,u,f){return i(this,n,!0,(s.type||this.type)==="undirected",null,a,u,f,r==="update")}:ue.prototype[n]=function(a,u,f,l){return i(this,n,!1,(s.type||this.type)==="undirected",a,u,f,l,r==="update")}})});qy(ue);i0(ue);_0(ue);T0(ue);class Xh extends ue{constructor(r){const n=xe({type:"directed"},r);if("multi"in n&&n.multi!==!1)throw new M("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new M('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class jh extends ue{constructor(r){const n=xe({type:"undirected"},r);if("multi"in n&&n.multi!==!1)throw new M("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new M('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Jh extends ue{constructor(r){const n=xe({multi:!0},r);if("multi"in n&&n.multi!==!0)throw new M("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Qh extends ue{constructor(r){const n=xe({type:"directed",multi:!0},r);if("multi"in n&&n.multi!==!0)throw new M("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new M('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ef extends ue{constructor(r){const n=xe({type:"undirected",multi:!0},r);if("multi"in n&&n.multi!==!0)throw new M("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new M('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Dn(s){s.from=function(r,n){const i=xe({},r.options,n),a=new s(i);return a.import(r),a}}Dn(ue);Dn(Xh);Dn(jh);Dn(Jh);Dn(Qh);Dn(ef);ue.Graph=ue;ue.DirectedGraph=Xh;ue.UndirectedGraph=jh;ue.MultiGraph=Jh;ue.MultiDirectedGraph=Qh;ue.MultiUndirectedGraph=ef;ue.InvalidArgumentsGraphError=M;ue.NotFoundGraphError=k;ue.UsageGraphError=K;function De(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function U0(s,r){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,r||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(s)}function tf(s){var r=U0(s,"string");return typeof r=="symbol"?r:String(r)}function qu(s,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,tf(i.key),i)}}function Ne(s,r,n){return r&&qu(s.prototype,r),n&&qu(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function Tn(s){return Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tn(s)}function nf(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nf=function(){return!!s})()}function F(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function $0(s,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(s)}function ot(s,r,n){return r=Tn(r),$0(s,nf()?Reflect.construct(r,n||[],Tn(s).constructor):r.apply(s,n))}function Ya(s,r){return Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Ya(s,r)}function st(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&Ya(s,r)}function B0(s){if(Array.isArray(s))return s}function z0(s,r){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var i,a,u,f,l=[],d=!0,v=!1;try{if(u=(n=n.call(s)).next,r===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(i=u.call(n)).done)&&(l.push(i.value),l.length!==r);d=!0);}catch(w){v=!0,a=w}finally{try{if(!d&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(v)throw a}}return l}}function qa(s,r){(r==null||r>s.length)&&(r=s.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=s[n];return i}function rf(s,r){if(s){if(typeof s=="string")return qa(s,r);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qa(s,r)}}function W0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hi(s,r){return B0(s)||z0(s,r)||rf(s,r)||W0()}var Ua={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},af=new Int8Array(4),oi=new Int32Array(af.buffer,0,1),of=new Float32Array(af.buffer,0,1),H0=/^\s*rgba?\s*\(/,K0=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Y0(s){var r=0,n=0,i=0,a=1;if(s[0]==="#")s.length===4?(r=parseInt(s.charAt(1)+s.charAt(1),16),n=parseInt(s.charAt(2)+s.charAt(2),16),i=parseInt(s.charAt(3)+s.charAt(3),16)):(r=parseInt(s.charAt(1)+s.charAt(2),16),n=parseInt(s.charAt(3)+s.charAt(4),16),i=parseInt(s.charAt(5)+s.charAt(6),16)),s.length===9&&(a=parseInt(s.charAt(7)+s.charAt(8),16)/255);else if(H0.test(s)){var u=s.match(K0);u&&(r=+u[1],n=+u[2],i=+u[3],u[4]&&(a=+u[4]))}return{r,g:n,b:i,a}}var Rn={};for(var ti in Ua)Rn[ti]=Nn(Ua[ti]),Rn[Ua[ti]]=Rn[ti];function sf(s,r,n,i,a){return oi[0]=i<<24|n<<16|r<<8|s,a&&(oi[0]=oi[0]&4278190079),of[0]}function Nn(s){if(s=s.toLowerCase(),typeof Rn[s]<"u")return Rn[s];var r=Y0(s),n=r.r,i=r.g,a=r.b,u=r.a;u=u*255|0;var f=sf(n,i,a,u,!0);return Rn[s]=f,f}function y_(s,r){of[0]=Nn(s);var n=oi[0];r&&(n=n|16777216);var i=n&255,a=n>>8&255,u=n>>16&255,f=n>>24&255;return[i,a,u,f]}var $a={};function uf(s){if(typeof $a[s]<"u")return $a[s];var r=(s&16711680)>>>16,n=(s&65280)>>>8,i=s&255,a=255,u=sf(r,n,i,a,!0);return $a[s]=u,u}function Vu(s,r,n,i){return n+(r<<8)+(s<<16)}function Zu(s,r,n,i,a,u){var f=Math.floor(n/u*a),l=Math.floor(s.drawingBufferHeight/u-i/u*a),d=new Uint8Array(4);s.bindFramebuffer(s.FRAMEBUFFER,r),s.readPixels(f,l,1,1,s.RGBA,s.UNSIGNED_BYTE,d);var v=hi(d,4),w=v[0],y=v[1],x=v[2],S=v[3];return[w,y,x,S]}function G(s,r,n){return r=tf(r),r in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,s}function Xu(s,r){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);r&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),n.push.apply(n,i)}return n}function V(s){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Xu(Object(n),!0).forEach(function(i){G(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Xu(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}function hf(s,r,n){var i=s==="VERTEX"?r.VERTEX_SHADER:r.FRAGMENT_SHADER,a=r.createShader(i);if(a===null)throw new Error("loadShader: error while creating the shader");r.shaderSource(a,n),r.compileShader(a);var u=r.getShaderParameter(a,r.COMPILE_STATUS);if(!u){var f=r.getShaderInfoLog(a);throw r.deleteShader(a),new Error(`loadShader: error while compiling the shader:
`.concat(f,`
`).concat(n))}return a}function q0(s,r){return hf("VERTEX",s,r)}function V0(s,r){return hf("FRAGMENT",s,r)}function Z0(s,r){var n=s.createProgram();if(n===null)throw new Error("loadProgram: error while creating the program.");var i,a;for(i=0,a=r.length;i<a;i++)s.attachShader(n,r[i]);s.linkProgram(n);var u=s.getProgramParameter(n,s.LINK_STATUS);if(!u)throw s.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}var ju=`#define PICKING_MODE
`,X0=G(G(G(G(G(G(G(G({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4);function j0(s){return s.normalized?1:s.size}function Ba(s){var r=0;return s.forEach(function(n){return r+=j0(n)}),r}var ff=function(){function s(r,n,i){De(this,s),G(this,"array",new Float32Array),G(this,"constantArray",new Float32Array),G(this,"capacity",0),G(this,"verticesCount",0);var a=this.getDefinition();if(this.VERTICES=a.VERTICES,this.VERTEX_SHADER_SOURCE=a.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=a.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=a.UNIFORMS,this.ATTRIBUTES=a.ATTRIBUTES,this.METHOD=a.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in a?a.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in a?a.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in a,this.ATTRIBUTES_ITEMS_COUNT=Ba(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",r,a.VERTEX_SHADER_SOURCE,a.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",r,ju+a.VERTEX_SHADER_SOURCE,ju+a.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var u=Ba(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*u);for(var f=0;f<this.CONSTANT_DATA.length;f++){var l=this.CONSTANT_DATA[f];if(l.length!==u)throw new Error("Program: error while getting constant data (one vector has ".concat(l.length," items instead of ").concat(u,")"));for(var d=0;d<l.length;d++)this.constantArray[f*u+d]=l[d]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Ne(s,[{key:"getProgramInfo",value:function(n,i,a,u,f){var l=this.getDefinition(),d=i.createBuffer();if(d===null)throw new Error("Program: error while creating the WebGL buffer.");var v=q0(i,a),w=V0(i,u),y=Z0(i,[v,w]),x={};l.UNIFORMS.forEach(function(N){var I=i.getUniformLocation(y,N);I&&(x[N]=I)});var S={};l.ATTRIBUTES.forEach(function(N){S[N.name]=i.getAttribLocation(y,N.name)});var D;if("CONSTANT_ATTRIBUTES"in l&&(l.CONSTANT_ATTRIBUTES.forEach(function(N){S[N.name]=i.getAttribLocation(y,N.name)}),D=i.createBuffer(),D===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:y,gl:i,frameBuffer:f,buffer:d,constantBuffer:D||{},uniformLocations:x,attributeLocations:S,isPicking:n==="pick"}}},{key:"bindProgram",value:function(n){var i=this,a=0,u=n.gl,f=n.buffer;this.isInstanced?(u.bindBuffer(u.ARRAY_BUFFER,n.constantBuffer),a=0,this.CONSTANT_ATTRIBUTES.forEach(function(l){return a+=i.bindAttribute(l,n,a,!1)}),u.bufferData(u.ARRAY_BUFFER,this.constantArray,u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,n.buffer),a=0,this.ATTRIBUTES.forEach(function(l){return a+=i.bindAttribute(l,n,a,!0)}),u.bufferData(u.ARRAY_BUFFER,this.array,u.DYNAMIC_DRAW)):(u.bindBuffer(u.ARRAY_BUFFER,f),a=0,this.ATTRIBUTES.forEach(function(l){return a+=i.bindAttribute(l,n,a)}),u.bufferData(u.ARRAY_BUFFER,this.array,u.DYNAMIC_DRAW)),u.bindBuffer(u.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(a){return i.unbindAttribute(a,n,!1)}),this.ATTRIBUTES.forEach(function(a){return i.unbindAttribute(a,n,!0)})):this.ATTRIBUTES.forEach(function(a){return i.unbindAttribute(a,n)})}},{key:"bindAttribute",value:function(n,i,a,u){var f=X0[n.type];if(typeof f!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var l=i.attributeLocations[n.name],d=i.gl;if(l!==-1){d.enableVertexAttribArray(l);var v=this.isInstanced?(u?this.ATTRIBUTES_ITEMS_COUNT:Ba(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(d.vertexAttribPointer(l,n.size,n.type,n.normalized||!1,v,a),this.isInstanced&&u)if(d instanceof WebGL2RenderingContext)d.vertexAttribDivisor(l,1);else{var w=d.getExtension("ANGLE_instanced_arrays");w&&w.vertexAttribDivisorANGLE(l,1)}}return n.size*f}},{key:"unbindAttribute",value:function(n,i,a){var u=i.attributeLocations[n.name],f=i.gl;if(u!==-1&&(f.disableVertexAttribArray(u),this.isInstanced&&a))if(f instanceof WebGL2RenderingContext)f.vertexAttribDivisor(u,0);else{var l=f.getExtension("ANGLE_instanced_arrays");l&&l.vertexAttribDivisorANGLE(u,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(n,i){var a=i.gl,u=i.program;a.enable(a.BLEND),a.useProgram(u),this.setUniforms(n,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(V(V({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,i){var a=i.gl,u=i.frameBuffer;if(a.bindFramebuffer(a.FRAMEBUFFER,u),!this.isInstanced)a.drawArrays(n,0,this.verticesCount);else if(a instanceof WebGL2RenderingContext)a.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var f=a.getExtension("ANGLE_instanced_arrays");f&&f.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}}}]),s}(),J0=function(s){st(r,s);function r(){return De(this,r),ot(this,r,arguments)}return Ne(r,[{key:"kill",value:function(){}},{key:"process",value:function(i,a,u){var f=a*this.STRIDE;if(u.hidden){for(var l=f+this.STRIDE;f<l;f++)this.array[f]=0;return}return this.processVisibleItem(uf(i),f,u)}}]),r}(ff),lf=function(s){st(r,s);function r(){var n;De(this,r);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n=ot(this,r,[].concat(a)),G(F(n),"drawLabel",void 0),n}return Ne(r,[{key:"kill",value:function(){}},{key:"process",value:function(i,a,u,f,l){var d=a*this.STRIDE;if(l.hidden||u.hidden||f.hidden){for(var v=d+this.STRIDE;d<v;d++)this.array[d]=0;return}return this.processVisibleItem(uf(i),d,u,f,l)}}]),r}(ff);function Q0(s,r){return function(){function n(i,a,u){De(this,n),G(this,"drawLabel",r),this.programs=s.map(function(f){return new f(i,a,u)})}return Ne(n,[{key:"reallocate",value:function(a){this.programs.forEach(function(u){return u.reallocate(a)})}},{key:"process",value:function(a,u,f,l,d){this.programs.forEach(function(v){return v.process(a,u,f,l,d)})}},{key:"render",value:function(a){this.programs.forEach(function(u){return u.render(a)})}},{key:"kill",value:function(){this.programs.forEach(function(a){return a.kill()})}}]),n}()}function ew(s,r,n,i,a){var u=a.edgeLabelSize,f=a.edgeLabelFont,l=a.edgeLabelWeight,d=a.edgeLabelColor.attribute?r[a.edgeLabelColor.attribute]||a.edgeLabelColor.color||"#000":a.edgeLabelColor.color,v=r.label;if(v){s.fillStyle=d,s.font="".concat(l," ").concat(u,"px ").concat(f);var w=n.size,y=i.size,x=n.x,S=n.y,D=i.x,N=i.y,I=(x+D)/2,$=(S+N)/2,P=D-x,B=N-S,W=Math.sqrt(P*P+B*B);if(!(W<w+y)){x+=P*w/W,S+=B*w/W,D-=P*y/W,N-=B*y/W,I=(x+D)/2,$=(S+N)/2,P=D-x,B=N-S,W=Math.sqrt(P*P+B*B);var he=s.measureText(v).width;if(he>W){var $e="…";for(v=v+$e,he=s.measureText(v).width;he>W&&v.length>1;)v=v.slice(0,-2)+$e,he=s.measureText(v).width;if(v.length<4)return}var de;P>0?B>0?de=Math.acos(P/W):de=Math.asin(B/W):B>0?de=Math.acos(P/W)+Math.PI:de=Math.asin(P/W)+Math.PI/2,s.save(),s.translate(I,$),s.rotate(de),s.fillText(v,-he/2,r.size/2+u),s.restore()}}}function cf(s,r,n){if(r.label){var i=n.labelSize,a=n.labelFont,u=n.labelWeight,f=n.labelColor.attribute?r[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color;s.fillStyle=f,s.font="".concat(u," ").concat(i,"px ").concat(a),s.fillText(r.label,r.x+r.size+3,r.y+i/3)}}function tw(s,r,n){var i=n.labelSize,a=n.labelFont,u=n.labelWeight;s.font="".concat(u," ").concat(i,"px ").concat(a),s.fillStyle="#FFF",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=8,s.shadowColor="#000";var f=2;if(typeof r.label=="string"){var l=s.measureText(r.label).width,d=Math.round(l+5),v=Math.round(i+2*f),w=Math.max(r.size,i/2)+f,y=Math.asin(v/2/w),x=Math.sqrt(Math.abs(Math.pow(w,2)-Math.pow(v/2,2)));s.beginPath(),s.moveTo(r.x+x,r.y+v/2),s.lineTo(r.x+w+d,r.y+v/2),s.lineTo(r.x+w+d,r.y-v/2),s.lineTo(r.x+x,r.y-v/2),s.arc(r.x,r.y,w,y,-y),s.closePath(),s.fill()}else s.beginPath(),s.arc(r.x,r.y,r.size+f,0,Math.PI*2),s.closePath(),s.fill();s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,cf(s,r,n)}var nw=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,rw=nw,iw=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,aw=iw,df=WebGLRenderingContext,Ju=df.UNSIGNED_BYTE,za=df.FLOAT,ow=["u_sizeRatio","u_correctionRatio","u_matrix"],gi=function(s){st(r,s);function r(){return De(this,r),ot(this,r,arguments)}return Ne(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:aw,FRAGMENT_SHADER_SOURCE:rw,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:ow,ATTRIBUTES:[{name:"a_position",size:2,type:za},{name:"a_size",size:1,type:za},{name:"a_color",size:4,type:Ju,normalized:!0},{name:"a_id",size:4,type:Ju,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:za}],CONSTANT_DATA:[[r.ANGLE_1],[r.ANGLE_2],[r.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,a,u){var f=this.array,l=Nn(u.color);f[a++]=u.x,f[a++]=u.y,f[a++]=u.size,f[a++]=l,f[a++]=i}},{key:"setUniforms",value:function(i,a){var u=a.gl,f=a.uniformLocations,l=f.u_sizeRatio,d=f.u_correctionRatio,v=f.u_matrix;u.uniform1f(d,i.correctionRatio),u.uniform1f(l,i.sizeRatio),u.uniformMatrix3fv(v,!1,i.matrix)}}]),r}(J0);G(gi,"ANGLE_1",0);G(gi,"ANGLE_2",2*Math.PI/3);G(gi,"ANGLE_3",4*Math.PI/3);var sw=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,uw=sw,hw=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadWidthLengthRatio = 0.66;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;
  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,fw=hw,gf=WebGLRenderingContext,Qu=gf.UNSIGNED_BYTE,ni=gf.FLOAT,lw=["u_matrix","u_sizeRatio","u_correctionRatio"],cw=function(s){st(r,s);function r(){return De(this,r),ot(this,r,arguments)}return Ne(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:fw,FRAGMENT_SHADER_SOURCE:uw,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:lw,ATTRIBUTES:[{name:"a_position",size:2,type:ni},{name:"a_normal",size:2,type:ni},{name:"a_radius",size:1,type:ni},{name:"a_color",size:4,type:Qu,normalized:!0},{name:"a_id",size:4,type:Qu,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:ni}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(i,a,u,f,l){var d=l.size||1,v=f.size||1,w=u.x,y=u.y,x=f.x,S=f.y,D=Nn(l.color),N=x-w,I=S-y,$=N*N+I*I,P=0,B=0;$&&($=1/Math.sqrt($),P=-I*$*d,B=N*$*d);var W=this.array;W[a++]=x,W[a++]=S,W[a++]=-P,W[a++]=-B,W[a++]=v,W[a++]=D,W[a++]=i}},{key:"setUniforms",value:function(i,a){var u=a.gl,f=a.uniformLocations,l=f.u_matrix,d=f.u_sizeRatio,v=f.u_correctionRatio;u.uniformMatrix3fv(l,!1,i.matrix),u.uniform1f(d,i.sizeRatio),u.uniform1f(v,i.correctionRatio)}}]),r}(lf);function dw(s,r){for(;!Object.prototype.hasOwnProperty.call(s,r)&&(s=Tn(s),s!==null););return s}function si(){return typeof Reflect<"u"&&Reflect.get?si=Reflect.get.bind():si=function(r,n,i){var a=dw(r,n);if(a){var u=Object.getOwnPropertyDescriptor(a,n);return u.get?u.get.call(arguments.length<3?r:i):u.value}},si.apply(this,arguments)}var gw=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float feather = 0.001;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,pw=gw,vw=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;

void main() {
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,mw=vw,pf=WebGLRenderingContext,eh=pf.UNSIGNED_BYTE,or=pf.FLOAT,yw=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],vf=function(s){st(r,s);function r(){return De(this,r),ot(this,r,arguments)}return Ne(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:mw,FRAGMENT_SHADER_SOURCE:pw,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:yw,ATTRIBUTES:[{name:"a_positionStart",size:2,type:or},{name:"a_positionEnd",size:2,type:or},{name:"a_normal",size:2,type:or},{name:"a_color",size:4,type:eh,normalized:!0},{name:"a_id",size:4,type:eh,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:or},{name:"a_normalCoef",size:1,type:or}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,a,u,f,l){var d=l.size||1,v=u.x,w=u.y,y=f.x,x=f.y,S=Nn(l.color),D=y-v,N=x-w,I=D*D+N*N,$=0,P=0;I&&(I=1/Math.sqrt(I),$=-N*I*d,P=D*I*d);var B=this.array;B[a++]=v,B[a++]=w,B[a++]=y,B[a++]=x,B[a++]=$,B[a++]=P,B[a++]=S,B[a++]=i}},{key:"setUniforms",value:function(i,a){var u=a.gl,f=a.uniformLocations,l=f.u_matrix,d=f.u_zoomRatio,v=f.u_correctionRatio,w=f.u_sizeRatio;u.uniformMatrix3fv(l,!1,i.matrix),u.uniform1f(d,i.zoomRatio),u.uniform1f(w,i.sizeRatio),u.uniform1f(v,i.correctionRatio)}}]),r}(lf),ww=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,_w=ww,mf=WebGLRenderingContext,th=mf.UNSIGNED_BYTE,un=mf.FLOAT,bw=function(s){st(r,s);function r(){return De(this,r),ot(this,r,arguments)}return Ne(r,[{key:"getDefinition",value:function(){return V(V({},si(Tn(r.prototype),"getDefinition",this).call(this)),{},{VERTEX_SHADER_SOURCE:_w,ATTRIBUTES:[{name:"a_positionStart",size:2,type:un},{name:"a_positionEnd",size:2,type:un},{name:"a_normal",size:2,type:un},{name:"a_color",size:4,type:th,normalized:!0},{name:"a_id",size:4,type:th,normalized:!0},{name:"a_radius",size:1,type:un}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:un},{name:"a_normalCoef",size:1,type:un},{name:"a_radiusCoef",size:1,type:un}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]})}},{key:"processVisibleItem",value:function(i,a,u,f,l){var d=l.size||1,v=u.x,w=u.y,y=f.x,x=f.y,S=Nn(l.color),D=y-v,N=x-w,I=f.size||1,$=D*D+N*N,P=0,B=0;$&&($=1/Math.sqrt($),P=-N*$*d,B=D*$*d);var W=this.array;W[a++]=v,W[a++]=w,W[a++]=y,W[a++]=x,W[a++]=P,W[a++]=B,W[a++]=S,W[a++]=i,W[a++]=I}}]),r}(vf),Ew=Q0([bw,cw]),xw=Ew,uo=function(s){st(r,s);function r(){var n;return De(this,r),n=ot(this,r),n.rawEmitter=F(n),n}return Ne(r)}(Ph.EventEmitter),Aw=function(r){return r!==null&&typeof r=="object"&&typeof r.addUndirectedEdgeWithKey=="function"&&typeof r.dropNode=="function"&&typeof r.multi=="boolean"};const Sw=fi(Aw);var Cw=function(r){return r},Rw=function(r){return r*r},Tw=function(r){return r*(2-r)},Lw=function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},Dw=function(r){return r*r*r},Nw=function(r){return--r*r*r+1},Gw=function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},yf={linear:Cw,quadraticIn:Rw,quadraticOut:Tw,quadraticInOut:Lw,cubicIn:Dw,cubicOut:Nw,cubicInOut:Gw},wf={easing:"quadraticInOut",duration:150};function w_(s,r,n,i){var a=Object.assign({},wf,n),u=typeof a.easing=="function"?a.easing:yf[a.easing],f=Date.now(),l={};for(var d in r){var v=r[d];l[d]={};for(var w in v)l[d][w]=s.getNodeAttribute(d,w)}var y=null,x=function S(){y=null;var D=(Date.now()-f)/a.duration;if(D>=1){for(var N in r){var I=r[N];for(var $ in I)s.setNodeAttribute(N,$,I[$])}typeof i=="function"&&i();return}D=u(D);for(var P in r){var B=r[P],W=l[P];for(var he in B)s.setNodeAttribute(P,he,B[he]*D+W[he]*(1-D))}y=requestAnimationFrame(S)};return x(),function(){y&&cancelAnimationFrame(y)}}function yt(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function ri(s,r,n){return s[0]=r,s[4]=typeof n=="number"?n:r,s}function nh(s,r){var n=Math.sin(r),i=Math.cos(r);return s[0]=i,s[1]=n,s[3]=-n,s[4]=i,s}function rh(s,r,n){return s[6]=r,s[7]=n,s}function jt(s,r){var n=s[0],i=s[1],a=s[2],u=s[3],f=s[4],l=s[5],d=s[6],v=s[7],w=s[8],y=r[0],x=r[1],S=r[2],D=r[3],N=r[4],I=r[5],$=r[6],P=r[7],B=r[8];return s[0]=y*n+x*u+S*d,s[1]=y*i+x*f+S*v,s[2]=y*a+x*l+S*w,s[3]=D*n+N*u+I*d,s[4]=D*i+N*f+I*v,s[5]=D*a+N*l+I*w,s[6]=$*n+P*u+B*d,s[7]=$*i+P*f+B*v,s[8]=$*a+P*l+B*w,s}function Va(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=s[0],a=s[1],u=s[3],f=s[4],l=s[6],d=s[7],v=r.x,w=r.y;return{x:v*i+w*u+l*n,y:v*a+w*f+d*n}}function Fw(s,r){var n=s.height/s.width,i=r.height/r.width;return n<1&&i>1||n>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/n,n))}function sr(s,r,n,i,a){var u=s.angle,f=s.ratio,l=s.x,d=s.y,v=r.width,w=r.height,y=yt(),x=Math.min(v,w)-2*i,S=Fw(r,n);return a?(jt(y,rh(yt(),l,d)),jt(y,ri(yt(),f)),jt(y,nh(yt(),u)),jt(y,ri(yt(),v/x/2/S,w/x/2/S))):(jt(y,ri(yt(),2*(x/v)*S,2*(x/w)*S)),jt(y,nh(yt(),-u)),jt(y,ri(yt(),1/f)),jt(y,rh(yt(),-l,-d))),y}function Iw(s,r,n){var i=Va(s,{x:Math.cos(r.angle),y:Math.sin(r.angle)},0),a=i.x,u=i.y;return 1/Math.sqrt(Math.pow(a,2)+Math.pow(u,2))/n.width}function kw(s){if(!s.order)return{x:[0,1],y:[0,1]};var r=1/0,n=-1/0,i=1/0,a=-1/0;return s.forEachNode(function(u,f){var l=f.x,d=f.y;l<r&&(r=l),l>n&&(n=l),d<i&&(i=d),d>a&&(a=d)}),{x:[r,n],y:[i,a]}}function Ow(s){if(!Sw(s))throw new Error("Sigma: invalid graph instance.");s.forEachNode(function(r,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(r," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function Pw(s,r,n){var i=document.createElement(s);if(r)for(var a in r)i.style[a]=r[a];if(n)for(var u in n)i.setAttribute(u,n[u]);return i}function ih(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function ah(s,r,n){return n.sort(function(i,a){var u=r(i)||0,f=r(a)||0;return u<f?-1:u>f?1:0})}function oh(s){var r=hi(s.x,2),n=r[0],i=r[1],a=hi(s.y,2),u=a[0],f=a[1],l=Math.max(i-n,f-u),d=(i+n)/2,v=(f+u)/2;(l===0||Math.abs(l)===1/0||isNaN(l))&&(l=1),isNaN(d)&&(d=0),isNaN(v)&&(v=0);var w=function(x){return{x:.5+(x.x-d)/l,y:.5+(x.y-v)/l}};return w.applyTo=function(y){y.x=.5+(y.x-d)/l,y.y=.5+(y.y-v)/l},w.inverse=function(y){return{x:d+l*(y.x-.5),y:v+l*(y.y-.5)}},w.ratio=l,w}function sh(s,r){var n=r.size;if(n!==0){var i=s.length;s.length+=n;var a=0;r.forEach(function(u){s[i+a]=u,a++})}}function Wa(s){s=s||{};for(var r=0,n=arguments.length<=1?0:arguments.length-1;r<n;r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];i&&Object.assign(s,i)}return s}var Mw={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",defaultDrawEdgeLabel:ew,defaultDrawNodeLabel:cf,defaultDrawNodeHover:tw,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},Uw={circle:gi},$w={arrow:xw,line:vf};function Ha(s){if(typeof s.labelDensity!="number"||s.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var r=s.minCameraRatio,n=s.maxCameraRatio;if(typeof r=="number"&&typeof n=="number"&&n<r)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function Bw(s){var r=Wa({},Mw,s);return r.nodeProgramClasses=Wa({},Uw,r.nodeProgramClasses),r.edgeProgramClasses=Wa({},$w,r.edgeProgramClasses),r}var ii=1.5,uh=function(s){st(r,s);function r(){var n;return De(this,r),n=ot(this,r),G(F(n),"x",.5),G(F(n),"y",.5),G(F(n),"angle",0),G(F(n),"ratio",1),G(F(n),"minRatio",null),G(F(n),"maxRatio",null),G(F(n),"nextFrame",null),G(F(n),"previousState",null),G(F(n),"enabled",!0),n.previousState=n.getState(),n}return Ne(r,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var a=i;return typeof this.minRatio=="number"&&(a=Math.max(a,this.minRatio)),typeof this.maxRatio=="number"&&(a=Math.min(a,this.maxRatio)),a}},{key:"validateState",value:function(i){var a={};return typeof i.x=="number"&&(a.x=i.x),typeof i.y=="number"&&(a.y=i.y),typeof i.angle=="number"&&(a.angle=i.angle),typeof i.ratio=="number"&&(a.ratio=this.getBoundedRatio(i.ratio)),a}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var a=this.validateState(i);return typeof a.x=="number"&&(this.x=a.x),typeof a.y=="number"&&(this.y=a.y),typeof a.angle=="number"&&(this.angle=a.angle),typeof a.ratio=="number"&&(this.ratio=a.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i,a,u){var f=this;if(this.enabled){var l=Object.assign({},wf,a),d=this.validateState(i),v=typeof l.easing=="function"?l.easing:yf[l.easing],w=Date.now(),y=this.getState(),x=function S(){var D=(Date.now()-w)/l.duration;if(D>=1){f.nextFrame=null,f.setState(d),f.animationCallback&&(f.animationCallback.call(null),f.animationCallback=void 0);return}var N=v(D),I={};typeof d.x=="number"&&(I.x=y.x+(d.x-y.x)*N),typeof d.y=="number"&&(I.y=y.y+(d.y-y.y)*N),typeof d.angle=="number"&&(I.angle=y.angle+(d.angle-y.angle)*N),typeof d.ratio=="number"&&(I.ratio=y.ratio+(d.ratio-y.ratio)*N),f.setState(I),f.nextFrame=requestAnimationFrame(S)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(x)):x(),this.animationCallback=u}}},{key:"animatedZoom",value:function(i){if(!i)this.animate({ratio:this.ratio/ii});else{if(typeof i=="number")return this.animate({ratio:this.ratio/i});this.animate({ratio:this.ratio/(i.factor||ii)},i)}}},{key:"animatedUnzoom",value:function(i){if(!i)this.animate({ratio:this.ratio*ii});else{if(typeof i=="number")return this.animate({ratio:this.ratio*i});this.animate({ratio:this.ratio*(i.factor||ii)},i)}}},{key:"animatedReset",value:function(i){this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return r.from(this.getState())}}],[{key:"from",value:function(i){var a=new r;return a.setState(i)}}]),r}(uo);function Pt(s,r){var n=r.getBoundingClientRect();return{x:s.clientX-n.left,y:s.clientY-n.top}}function Ot(s,r){var n=V(V({},Pt(s,r)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:s});return n}function zw(s,r){return V(V({},Ot(s,r)),{},{delta:_f(s)})}var Ww=2;function Za(s){for(var r=[],n=0,i=Math.min(s.length,Ww);n<i;n++)r.push(s[n]);return r}function Ka(s,r){return{touches:Za(s.touches).map(function(n){return Pt(n,r)}),original:s}}function _f(s){if(typeof s.deltaY<"u")return s.deltaY*-3/360;if(typeof s.detail<"u")return s.detail/-9;throw new Error("Captor: could not extract delta from event.")}var bf=function(s){st(r,s);function r(n,i){var a;return De(this,r),a=ot(this,r),a.container=n,a.renderer=i,a}return Ne(r)}(uo),Hw=100,Kw=3,Yw=200,hh=3,fh=250,lh=1.7,qw=300,Vw=2.2,Zw=200,Xw=function(s){st(r,s);function r(n,i){var a;return De(this,r),a=ot(this,r,[n,i]),G(F(a),"enabled",!0),G(F(a),"draggedEvents",0),G(F(a),"downStartTime",null),G(F(a),"lastMouseX",null),G(F(a),"lastMouseY",null),G(F(a),"isMouseDown",!1),G(F(a),"isMoving",!1),G(F(a),"movingTimeout",null),G(F(a),"startCameraState",null),G(F(a),"clicks",0),G(F(a),"doubleClickTimeout",null),G(F(a),"currentWheelDirection",0),a.handleClick=a.handleClick.bind(F(a)),a.handleRightClick=a.handleRightClick.bind(F(a)),a.handleDown=a.handleDown.bind(F(a)),a.handleUp=a.handleUp.bind(F(a)),a.handleMove=a.handleMove.bind(F(a)),a.handleWheel=a.handleWheel.bind(F(a)),a.handleLeave=a.handleLeave.bind(F(a)),a.handleEnter=a.handleEnter.bind(F(a)),n.addEventListener("click",a.handleClick,!1),n.addEventListener("contextmenu",a.handleRightClick,!1),n.addEventListener("mousedown",a.handleDown,!1),n.addEventListener("wheel",a.handleWheel,!1),n.addEventListener("mouseleave",a.handleLeave,!1),n.addEventListener("mouseenter",a.handleEnter,!1),document.addEventListener("mousemove",a.handleMove,!1),document.addEventListener("mouseup",a.handleUp,!1),a}return Ne(r,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var a=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){a.clicks=0,a.doubleClickTimeout=null},qw),this.draggedEvents<Kw&&this.emit("click",Ot(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",Ot(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var a=Ot(i,this.container);if(this.emit("doubleClick",a),!a.sigmaDefaultPrevented){var u=this.renderer.getCamera(),f=u.getBoundedRatio(u.getState().ratio/Vw);u.animate(this.renderer.getViewportZoomedState(Pt(i,this.container),f),{easing:"quadraticInOut",duration:Zw})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var a=Pt(i,this.container),u=a.x,f=a.y;this.lastMouseX=u,this.lastMouseY=f,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Ot(i,this.container))}}},{key:"handleUp",value:function(i){var a=this;if(!(!this.enabled||!this.isMouseDown)){var u=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var f=Pt(i,this.container),l=f.x,d=f.y,v=u.getState(),w=u.getPreviousState()||{x:0,y:0};this.isMoving?u.animate({x:v.x+hh*(v.x-w.x),y:v.y+hh*(v.y-w.y)},{duration:Yw,easing:"quadraticOut"}):(this.lastMouseX!==l||this.lastMouseY!==d)&&u.setState({x:v.x,y:v.y}),this.isMoving=!1,setTimeout(function(){var y=a.draggedEvents>0;a.draggedEvents=0,y&&a.renderer.refresh()},0),this.emit("mouseup",Ot(i,this.container))}}},{key:"handleMove",value:function(i){var a=this;if(this.enabled){var u=Ot(i,this.container);if(this.emit("mousemovebody",u),i.target===this.container&&this.emit("mousemove",u),!u.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){a.movingTimeout=null,a.isMoving=!1},Hw);var f=this.renderer.getCamera(),l=Pt(i,this.container),d=l.x,v=l.y,w=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),y=this.renderer.viewportToFramedGraph({x:d,y:v}),x=w.x-y.x,S=w.y-y.y,D=f.getState(),N=D.x+x,I=D.y+S;f.setState({x:N,y:I}),this.lastMouseX=d,this.lastMouseY=v,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",Ot(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",Ot(i,this.container))}},{key:"handleWheel",value:function(i){var a=this;if(this.enabled){i.preventDefault(),i.stopPropagation();var u=_f(i);if(u){var f=zw(i,this.container);if(this.emit("wheel",f),!f.sigmaDefaultPrevented){var l=u>0?1/lh:lh,d=this.renderer.getCamera(),v=d.getBoundedRatio(d.getState().ratio*l),w=u>0?1:-1,y=Date.now();this.currentWheelDirection===w&&this.lastWheelTriggerTime&&y-this.lastWheelTriggerTime<fh/5||(d.animate(this.renderer.getViewportZoomedState(Pt(i,this.container),v),{easing:"quadraticOut",duration:fh},function(){a.currentWheelDirection=0}),this.currentWheelDirection=w,this.lastWheelTriggerTime=y)}}}}}]),r}(bf),jw=200,ch=3,Jw=200,Qw=function(s){st(r,s);function r(n,i){var a;return De(this,r),a=ot(this,r,[n,i]),G(F(a),"enabled",!0),G(F(a),"isMoving",!1),G(F(a),"hasMoved",!1),G(F(a),"touchMode",0),G(F(a),"startTouchesPositions",[]),a.handleStart=a.handleStart.bind(F(a)),a.handleLeave=a.handleLeave.bind(F(a)),a.handleMove=a.handleMove.bind(F(a)),n.addEventListener("touchstart",a.handleStart,!1),n.addEventListener("touchend",a.handleLeave,!1),n.addEventListener("touchcancel",a.handleLeave,!1),n.addEventListener("touchmove",a.handleMove,!1),a}return Ne(r,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchend",this.handleLeave),i.removeEventListener("touchcancel",this.handleLeave),i.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"dispatchRelatedMouseEvent",value:function(i,a,u,f){var l=u||a.touches[0],d=new MouseEvent(i,{clientX:l.clientX,clientY:l.clientY,altKey:a.altKey,ctrlKey:a.ctrlKey});d.isFakeSigmaMouseEvent=!0,(f||this.container).dispatchEvent(d)}},{key:"handleStart",value:function(i){var a=this;if(this.enabled){i.preventDefault(),i.touches.length===1&&this.dispatchRelatedMouseEvent("mousedown",i);var u=Za(i.touches);if(this.touchMode=u.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=u.map(function(S){return Pt(S,a.container)}),this.lastTouches=u,this.lastTouchesPositions=this.startTouchesPositions,this.touchMode===2){var f=hi(this.startTouchesPositions,2),l=f[0],d=l.x,v=l.y,w=f[1],y=w.x,x=w.y;this.startTouchesAngle=Math.atan2(x-v,y-d),this.startTouchesDistance=Math.sqrt(Math.pow(y-d,2)+Math.pow(x-v,2))}this.emit("touchdown",Ka(i,this.container))}}},{key:"handleLeave",value:function(i){if(this.enabled){switch(i.preventDefault(),i.touches.length===0&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",i,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",i,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var a=this.renderer.getCamera(),u=a.getState(),f=a.getPreviousState()||{x:0,y:0};a.animate({x:u.x+ch*(u.x-f.x),y:u.y+ch*(u.y-f.y)},{duration:Jw,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}this.emit("touchup",Ka(i,this.container))}}},{key:"handleMove",value:function(i){var a=this;if(this.enabled){i.preventDefault(),i.touches.length===1&&this.dispatchRelatedMouseEvent("mousemove",i);var u=Za(i.touches),f=u.map(function(_e){return Pt(_e,a.container)});if(this.lastTouches=u,this.lastTouchesPositions=f,this.hasMoved||(this.hasMoved=f.some(function(_e,In){var ft=a.startTouchesPositions[In];return _e.x!==ft.x||_e.y!==ft.y})),!!this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){a.isMoving=!1},jw);var l=this.renderer.getCamera(),d=this.startCameraState;switch(this.touchMode){case 1:{var v=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),w=v.x,y=v.y,x=this.renderer.viewportToFramedGraph(f[0]),S=x.x,D=x.y;l.setState({x:d.x+w-S,y:d.y+y-D});break}case 2:{var N={},I=f[0],$=I.x,P=I.y,B=f[1],W=B.x,he=B.y,$e=Math.atan2(he-P,W-$)-this.startTouchesAngle,de=Math.hypot(he-P,W-$)/this.startTouchesDistance,wt=l.getBoundedRatio(d.ratio/de);N.ratio=wt,N.angle=d.angle+$e;var ke=this.getDimensions(),ut=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),ht=Math.min(ke.width,ke.height),Gn=ht/ke.width,Fn=ht/ke.height,Bt=wt/ht,qe=$-ht/2/Gn,_t=P-ht/2/Fn,Ve=[qe*Math.cos(-N.angle)-_t*Math.sin(-N.angle),_t*Math.cos(-N.angle)+qe*Math.sin(-N.angle)];qe=Ve[0],_t=Ve[1],N.x=ut.x-qe*Bt,N.y=ut.y+_t*Bt,l.setState(N);break}}this.emit("touchmove",Ka(i,this.container))}}}}]),r}(bf);function e_(s){if(Array.isArray(s))return qa(s)}function t_(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function n_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dh(s){return e_(s)||t_(s)||rf(s)||n_()}var gh=function(){function s(r,n){De(this,s),this.key=r,this.size=n}return Ne(s,null,[{key:"compare",value:function(n,i){return n.size>i.size?-1:n.size<i.size||n.key>i.key?1:-1}}]),s}(),ph=function(){function s(){De(this,s),G(this,"width",0),G(this,"height",0),G(this,"cellSize",0),G(this,"columns",0),G(this,"rows",0),G(this,"cells",{})}return Ne(s,[{key:"resizeAndClear",value:function(n,i){this.width=n.width,this.height=n.height,this.cellSize=i,this.columns=Math.ceil(n.width/i),this.rows=Math.ceil(n.height/i),this.cells={}}},{key:"getIndex",value:function(n){var i=Math.floor(n.x/this.cellSize),a=Math.floor(n.y/this.cellSize);return a*this.columns+i}},{key:"add",value:function(n,i,a){var u=new gh(n,i),f=this.getIndex(a),l=this.cells[f];l||(l=[],this.cells[f]=l),l.push(u)}},{key:"organize",value:function(){for(var n in this.cells){var i=this.cells[n];i.sort(gh.compare)}}},{key:"getLabelsToDisplay",value:function(n,i){var a=this.cellSize*this.cellSize,u=a/n/n,f=u*i/a,l=Math.ceil(f),d=[];for(var v in this.cells)for(var w=this.cells[v],y=0;y<Math.min(l,w.length);y++)d.push(w[y].key);return d}}]),s}();function r_(s){var r=s.graph,n=s.hoveredNode,i=s.highlightedNodes,a=s.displayedNodeLabels,u=[];return r.forEachEdge(function(f,l,d,v){(d===n||v===n||i.has(d)||i.has(v)||a.has(d)&&a.has(v))&&u.push(f)}),u}var vh=150,mh=50,Mt=Object.prototype.hasOwnProperty;function i_(s,r,n){if(!Mt.call(n,"x")||!Mt.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(r,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=s.defaultNodeColor),!n.label&&n.label!==""&&(n.label=null),n.label!==void 0&&n.label!==null?n.label=""+n.label:n.label=null,n.size||(n.size=2),Mt.call(n,"hidden")||(n.hidden=!1),Mt.call(n,"highlighted")||(n.highlighted=!1),Mt.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=s.defaultNodeType),n.zIndex||(n.zIndex=0),n}function a_(s,r,n){return n.color||(n.color=s.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),Mt.call(n,"hidden")||(n.hidden=!1),Mt.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||n.type==="")&&(n.type=s.defaultEdgeType),n.zIndex||(n.zIndex=0),n}var o_=function(s){st(r,s);function r(n,i){var a,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(De(this,r),a=ot(this,r),G(F(a),"elements",{}),G(F(a),"canvasContexts",{}),G(F(a),"webGLContexts",{}),G(F(a),"pickingLayers",new Set),G(F(a),"textures",{}),G(F(a),"frameBuffers",{}),G(F(a),"activeListeners",{}),G(F(a),"labelGrid",new ph),G(F(a),"nodeDataCache",{}),G(F(a),"edgeDataCache",{}),G(F(a),"nodeProgramIndex",{}),G(F(a),"edgeProgramIndex",{}),G(F(a),"nodesWithForcedLabels",new Set),G(F(a),"edgesWithForcedLabels",new Set),G(F(a),"nodeExtent",{x:[0,1],y:[0,1]}),G(F(a),"nodeZExtent",[1/0,-1/0]),G(F(a),"edgeZExtent",[1/0,-1/0]),G(F(a),"matrix",yt()),G(F(a),"invMatrix",yt()),G(F(a),"correctionRatio",1),G(F(a),"customBBox",null),G(F(a),"normalizationFunction",oh({x:[0,1],y:[0,1]})),G(F(a),"graphToViewportRatio",1),G(F(a),"itemIDsIndex",{}),G(F(a),"nodeIndices",{}),G(F(a),"edgeIndices",{}),G(F(a),"width",0),G(F(a),"height",0),G(F(a),"pixelRatio",ih()),G(F(a),"pickingDownSizingRatio",2*a.pixelRatio),G(F(a),"displayedNodeLabels",new Set),G(F(a),"displayedEdgeLabels",new Set),G(F(a),"highlightedNodes",new Set),G(F(a),"hoveredNode",null),G(F(a),"hoveredEdge",null),G(F(a),"renderFrame",null),G(F(a),"renderHighlightedNodesFrame",null),G(F(a),"needToProcess",!1),G(F(a),"checkEdgesEventsFrame",null),G(F(a),"nodePrograms",{}),G(F(a),"nodeHoverPrograms",{}),G(F(a),"edgePrograms",{}),a.settings=Bw(u),Ha(a.settings),Ow(n),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");a.graph=n,a.container=i,a.createWebGLContext("edges",{picking:u.enableEdgeEvents}),a.createCanvasContext("edgeLabels"),a.createWebGLContext("nodes",{picking:!0}),a.createCanvasContext("labels"),a.createCanvasContext("hovers"),a.createWebGLContext("hoverNodes"),a.createCanvasContext("mouse"),a.resize();for(var f in a.settings.nodeProgramClasses){var l=a.settings.nodeProgramClasses[f];a.nodePrograms[f]=new l(a.webGLContexts.nodes,a.frameBuffers.nodes,F(a));var d=l;f in a.settings.nodeHoverProgramClasses&&(d=a.settings.nodeHoverProgramClasses[f]),a.nodeHoverPrograms[f]=new d(a.webGLContexts.hoverNodes,null,F(a))}for(var v in a.settings.edgeProgramClasses){var w=a.settings.edgeProgramClasses[v];a.edgePrograms[v]=new w(a.webGLContexts.edges,a.frameBuffers.edges,F(a))}return a.camera=new uh,a.bindCameraHandlers(),a.mouseCaptor=new Xw(a.elements.mouse,F(a)),a.touchCaptor=new Qw(a.elements.mouse,F(a)),a.bindEventHandlers(),a.bindGraphHandlers(),a.handleSettingsUpdate(),a.refresh(),a}return Ne(r,[{key:"createCanvas",value:function(i){var a=Pw("canvas",{position:"absolute"},{class:"sigma-".concat(i)});return this.elements[i]=a,this.container.appendChild(a),a}},{key:"createCanvasContext",value:function(i){var a=this.createCanvas(i),u={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=a.getContext("2d",u),this}},{key:"createWebGLContext",value:function(i,a){var u=this.createCanvas(i);a!=null&&a.hidden&&u.remove();var f=V({preserveDrawingBuffer:!1,antialias:!1},a||{}),l;l=u.getContext("webgl2",f),l||(l=u.getContext("webgl",f)),l||(l=u.getContext("experimental-webgl",f));var d=l;if(this.webGLContexts[i]=d,d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),a!=null&&a.picking){this.pickingLayers.add(i);var v=d.createFramebuffer();if(!v)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=v}return this}},{key:"resetWebGLTexture",value:function(i){var a=this.webGLContexts[i],u=this.frameBuffers[i],f=this.textures[i];f&&a.deleteTexture(f);var l=a.createTexture();return a.bindFramebuffer(a.FRAMEBUFFER,u),a.bindTexture(a.TEXTURE_2D,l),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,l,0),this.textures[i]=l,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var a=i.x,u=i.y,f=Zu(this.webGLContexts.nodes,this.frameBuffers.nodes,a,u,this.pixelRatio,this.pickingDownSizingRatio),l=Vu.apply(void 0,dh(f)),d=this.itemIDsIndex[l];return d&&d.type==="node"?d.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(u){var f={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}},l=i.getNodeAtPosition(u);if(l&&i.hoveredNode!==l&&!i.nodeDataCache[l].hidden){i.hoveredNode&&i.emit("leaveNode",V(V({},f),{},{node:i.hoveredNode})),i.hoveredNode=l,i.emit("enterNode",V(V({},f),{},{node:l})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(u)!==i.hoveredNode){var d=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",V(V({},f),{},{node:d})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var v=i.hoveredNode?null:i.getEdgeAtPoint(f.event.x,f.event.y);v!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",V(V({},f),{},{edge:i.hoveredEdge})),v&&i.emit("enterEdge",V(V({},f),{},{edge:v})),i.hoveredEdge=v)}},this.activeListeners.handleLeave=function(u){var f={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",V(V({},f),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",V(V({},f),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",V({},f))},this.activeListeners.handleEnter=function(u){var f={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}};i.emit("enterStage",V({},f))};var a=function(f){return function(l){var d={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},v=l.original.isFakeSigmaMouseEvent,w=v?i.getNodeAtPosition(l):i.hoveredNode;if(w)return i.emit("".concat(f,"Node"),V(V({},d),{},{node:w}));if(i.settings.enableEdgeEvents){var y=i.getEdgeAtPoint(l.x,l.y);if(y)return i.emit("".concat(f,"Edge"),V(V({},d),{},{edge:y}))}return i.emit("".concat(f,"Stage"),d)}};return this.activeListeners.handleClick=a("click"),this.activeListeners.handleRightClick=a("rightClick"),this.activeListeners.handleDoubleClick=a("doubleClick"),this.activeListeners.handleWheel=a("wheel"),this.activeListeners.handleDown=a("down"),this.activeListeners.handleUp=a("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this}},{key:"bindGraphHandlers",value:function(){var i=this,a=this.graph,u=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(f){var l,d=(l=f.hints)===null||l===void 0?void 0:l.attributes;i.graph.forEachNode(function(w){return i.updateNode(w)});var v=!d||d.some(function(w){return u.has(w)});i.refresh({partialGraph:{nodes:a.nodes()},skipIndexation:!v,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(f){var l,d=(l=f.hints)===null||l===void 0?void 0:l.attributes;i.graph.forEachEdge(function(w){return i.updateEdge(w)});var v=d&&["zIndex","type"].some(function(w){return d==null?void 0:d.includes(w)});i.refresh({partialGraph:{edges:a.edges()},skipIndexation:!v,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(f){var l=f.key;i.addNode(l),i.refresh({partialGraph:{nodes:[l]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(f){var l=f.key;i.refresh({partialGraph:{nodes:[l]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(f){var l=f.key;i.removeNode(l),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(f){var l=f.key;i.addEdge(l),i.refresh({partialGraph:{edges:[l]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(f){var l=f.key;i.refresh({partialGraph:{edges:[l]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(f){var l=f.key;i.removeEdge(l),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},a.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),a.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),a.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),a.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),a.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),a.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),a.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),a.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),a.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),a.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,a){var u=Zu(this.webGLContexts.edges,this.frameBuffers.edges,i,a,this.pixelRatio,this.pickingDownSizingRatio),f=Vu.apply(void 0,dh(u)),l=this.itemIDsIndex[f];return l&&l.type==="edge"?l.id:null}},{key:"process",value:function(){var i=this,a=this.graph,u=this.settings,f=this.getDimensions();this.nodeExtent=kw(this.graph),this.normalizationFunction=oh(this.customBBox||this.nodeExtent);var l=new uh,d=sr(l.getState(),f,this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.labelGrid.resizeAndClear(f,u.labelGridCellSize);for(var v={},w={},y={},x={},S=1,D=a.nodes(),N=0,I=D.length;N<I;N++){var $=D[N],P=this.nodeDataCache[$],B=a.getNodeAttributes($);P.x=B.x,P.y=B.y,this.normalizationFunction.applyTo(P),typeof P.label=="string"&&!P.hidden&&this.labelGrid.add($,P.size,this.framedGraphToViewport(P,{matrix:d})),v[P.type]=(v[P.type]||0)+1}this.labelGrid.organize();for(var W in this.nodePrograms){if(!Mt.call(this.nodePrograms,W))throw new Error('Sigma: could not find a suitable program for node type "'.concat(W,'"!'));this.nodePrograms[W].reallocate(v[W]||0),v[W]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(D=ah(this.nodeZExtent,function(ft){return i.nodeDataCache[ft].zIndex},D));for(var he=0,$e=D.length;he<$e;he++){var de=D[he];w[de]=S,x[w[de]]={type:"node",id:de},S++;var wt=this.nodeDataCache[de];this.addNodeToProgram(de,w[de],v[wt.type]++)}for(var ke={},ut=a.edges(),ht=0,Gn=ut.length;ht<Gn;ht++){var Fn=ut[ht],Bt=this.edgeDataCache[Fn];ke[Bt.type]=(ke[Bt.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(ut=ah(this.edgeZExtent,function(ft){return i.edgeDataCache[ft].zIndex},ut));for(var qe in this.edgePrograms){if(!Mt.call(this.edgePrograms,qe))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(qe,'"!'));this.edgePrograms[qe].reallocate(ke[qe]||0),ke[qe]=0}for(var _t=0,Ve=ut.length;_t<Ve;_t++){var _e=ut[_t];y[_e]=S,x[y[_e]]={type:"edge",id:_e},S++;var In=this.edgeDataCache[_e];this.addEdgeToProgram(_e,y[_e],ke[In.type]++)}return this.itemIDsIndex=x,this.nodeIndices=w,this.edgeIndices=y,this}},{key:"handleSettingsUpdate",value:function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),a=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);sh(a,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var u=this.canvasContexts.labels,f=0,l=a.length;f<l;f++){var d=a[f],v=this.nodeDataCache[d];if(!this.displayedNodeLabels.has(d)&&!v.hidden){var w=this.framedGraphToViewport(v),y=w.x,x=w.y,S=this.scaleSize(v.size);if(!(!v.forceLabel&&S<this.settings.labelRenderedSizeThreshold)&&!(y<-vh||y>this.width+vh||x<-mh||x>this.height+mh)){this.displayedNodeLabels.add(d);var D=this.settings.defaultDrawNodeLabel,N=this.nodePrograms[v.type],I=(N==null?void 0:N.drawLabel)||D;I(u,V(V({key:d},v),{},{size:S,x:y,y:x}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var a=r_({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});sh(a,this.edgesWithForcedLabels);for(var u=new Set,f=0,l=a.length;f<l;f++){var d=a[f],v=this.graph.extremities(d),w=this.nodeDataCache[v[0]],y=this.nodeDataCache[v[1]],x=this.edgeDataCache[d];if(!u.has(d)&&!(x.hidden||w.hidden||y.hidden)){var S=this.settings.defaultDrawEdgeLabel,D=this.edgePrograms[x.type],N=(D==null?void 0:D.drawLabel)||S;N(i,V(V({key:d},x),{},{size:this.scaleSize(x.size)}),V(V(V({key:v[0]},w),this.framedGraphToViewport(w)),{},{size:this.scaleSize(w.size)}),V(V(V({key:v[1]},y),this.framedGraphToViewport(y)),{},{size:this.scaleSize(y.size)}),this.settings),u.add(d)}}return this.displayedEdgeLabels=u,this}},{key:"renderHighlightedNodes",value:function(){var i=this,a=this.canvasContexts.hovers;a.clearRect(0,0,this.width,this.height);var u=function(x){var S=i.nodeDataCache[x],D=i.framedGraphToViewport(S),N=D.x,I=D.y,$=i.scaleSize(S.size),P=i.settings.defaultDrawNodeHover,B=i.nodePrograms[S.type],W=(B==null?void 0:B.drawHover)||P;W(a,V(V({key:x},S),{},{size:$,x:N,y:I}),i.settings)},f=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&f.push(this.hoveredNode),this.highlightedNodes.forEach(function(y){y!==i.hoveredNode&&f.push(y)}),f.forEach(function(y){return u(y)});var l={};f.forEach(function(y){var x=i.nodeDataCache[y].type;l[x]=(l[x]||0)+1});for(var d in this.nodeHoverPrograms)this.nodeHoverPrograms[d].reallocate(l[d]||0),l[d]=0;f.forEach(function(y){var x=i.nodeDataCache[y];i.nodeHoverPrograms[x.type].process(0,l[x.type]++,x)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);for(var v in this.nodeHoverPrograms){var w=this.nodeHoverPrograms[v];w.render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,cameraAngle:this.camera.angle,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio})}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var a=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(I){return i.resetWebGLTexture(I)}),!this.graph.order)return a();var u=this.mouseCaptor,f=this.camera.isAnimated()||u.isMoving||u.draggedEvents||u.currentWheelDirection,l=this.camera.getState(),d=this.getDimensions(),v=this.getGraphDimensions(),w=this.getSetting("stagePadding")||0;this.matrix=sr(l,d,v,w),this.invMatrix=sr(l,d,v,w,!0),this.correctionRatio=Iw(this.matrix,l,d),this.graphToViewportRatio=this.getGraphToViewportRatio();var y={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio};for(var x in this.nodePrograms){var S=this.nodePrograms[x];S.render(y)}if(!this.settings.hideEdgesOnMove||!f)for(var D in this.edgePrograms){var N=this.edgePrograms[D];N.render(y)}return this.settings.hideLabelsOnMove&&f||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),a()}},{key:"addNode",value:function(i){var a=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(a=this.settings.nodeReducer(i,a));var u=i_(this.settings,i,a);this.nodeDataCache[i]=u,this.nodesWithForcedLabels.delete(i),u.forceLabel&&!u.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),u.highlighted&&!u.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(u.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=u.zIndex),u.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=u.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var a=this.nodeDataCache[i];this.normalizationFunction.applyTo(a)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var a=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(a=this.settings.edgeReducer(i,a));var u=a_(this.settings,i,a);this.edgeDataCache[i]=u,this.edgesWithForcedLabels.delete(i),u.forceLabel&&!u.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(u.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=u.zIndex),u.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=u.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new ph,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,a,u){var f=this.nodeDataCache[i],l=this.nodePrograms[f.type];if(!l)throw new Error('Sigma: could not find a suitable program for node type "'.concat(f.type,'"!'));l.process(a,u,f),this.nodeProgramIndex[i]=u}},{key:"addEdgeToProgram",value:function(i,a,u){var f=this.edgeDataCache[i],l=this.edgePrograms[f.type];if(!l)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(f.type,'"!'));var d=this.graph.extremities(i),v=this.nodeDataCache[d[0]],w=this.nodeDataCache[d[1]];l.process(a,u,v,w,f),this.edgeProgramIndex[i]=u}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var a=this.nodeDataCache[i];return a?Object.assign({},a):void 0}},{key:"getEdgeDisplayData",value:function(i){var a=this.edgeDataCache[i];return a?Object.assign({},a):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return V({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,a){return this.settings[i]=a,Ha(this.settings),this.handleSettingsUpdate(),this.refresh(),this}},{key:"updateSetting",value:function(i,a){return this.settings[i]=a(this.settings[i]),Ha(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this}},{key:"resize",value:function(){var i=this.width,a=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=ih(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(i===this.width&&a===this.height)return this;this.emit("resize");for(var u in this.elements){var f=this.elements[u];f.style.width=this.width+"px",f.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var d in this.webGLContexts){this.elements[d].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[d].setAttribute("height",this.height*this.pixelRatio+"px");var v=this.webGLContexts[d];if(v.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(d)){var w=this.textures[d];w&&v.deleteTexture(w)}}return this}},{key:"clear",value:function(){return this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this}},{key:"refresh",value:function(i){var a=this,u=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,f=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,l=!i||!i.partialGraph;if(l)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(W){return a.addNode(W)}),this.graph.forEachEdge(function(W){return a.addEdge(W)});else{for(var d,v,w=((d=i.partialGraph)===null||d===void 0?void 0:d.nodes)||[],y=0,x=(w==null?void 0:w.length)||0;y<x;y++){var S=w[y];if(this.updateNode(S),u){var D=this.nodeProgramIndex[S];if(D===void 0)throw new Error('Sigma: node "'.concat(S,`" can't be repaint`));this.addNodeToProgram(S,this.nodeIndices[S],D)}}for(var N=(i==null||(v=i.partialGraph)===null||v===void 0?void 0:v.edges)||[],I=0,$=N.length;I<$;I++){var P=N[I];if(this.updateEdge(P),u){var B=this.edgeProgramIndex[P];if(B===void 0)throw new Error('Sigma: edge "'.concat(P,`" can't be repaint`));this.addEdgeToProgram(P,this.edgeIndices[P],B)}}}return(l||!u)&&(this.needToProcess=!0),f?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(V(V({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,a){var u=this.camera.getState(),f=u.ratio,l=u.angle,d=u.x,v=u.y,w=a/f,y={x:this.width/2,y:this.height/2},x=this.viewportToFramedGraph(i),S=this.viewportToFramedGraph(y);return{angle:l,x:(x.x-S.x)*(1-w)+d,y:(x.y-S.y)*(1-w)+v,ratio:a}}},{key:"viewRectangle",value:function(){var i=0*this.width/8,a=0*this.height/8,u=this.viewportToFramedGraph({x:0-i,y:0-a}),f=this.viewportToFramedGraph({x:this.width+i,y:0-a}),l=this.viewportToFramedGraph({x:0,y:this.height+a});return{x1:u.x,y1:u.y,x2:f.x,y2:f.y,height:f.y-l.y}}},{key:"framedGraphToViewport",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=!!a.cameraState||!!a.viewportDimensions||!!a.graphDimensions,f=a.matrix?a.matrix:u?sr(a.cameraState||this.camera.getState(),a.viewportDimensions||this.getDimensions(),a.graphDimensions||this.getGraphDimensions(),a.padding||this.getSetting("stagePadding")||0):this.matrix,l=Va(f,i);return{x:(1+l.x)*this.width/2,y:(1-l.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=!!a.cameraState||!!a.viewportDimensions||!a.graphDimensions,f=a.matrix?a.matrix:u?sr(a.cameraState||this.camera.getState(),a.viewportDimensions||this.getDimensions(),a.graphDimensions||this.getGraphDimensions(),a.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,l=Va(f,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),l}},{key:"viewportToGraph",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,a))}},{key:"graphToViewport",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),a)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},a={x:1,y:1},u=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)),f=this.graphToViewport(i),l=this.graphToViewport(a),d=Math.sqrt(Math.pow(f.x-l.x,2)+Math.pow(f.y-l.y,2));return d/u}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i in this.webGLContexts){var a,u=this.webGLContexts[i];(a=u.getExtension("WEBGL_lose_context"))===null||a===void 0||a.loseContext()}for(var f=this.container;f.firstChild;)f.removeChild(f.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var l in this.nodePrograms)this.nodePrograms[l].kill();for(var d in this.nodeHoverPrograms)this.nodeHoverPrograms[d].kill();for(var v in this.edgePrograms)this.edgePrograms[v].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={}}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(a)*(this.getSetting("itemSizesReference")==="positions"?a*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){return V({},this.elements)}}]),r}(uo);const Ef=X.createContext(null),s_=Ef.Provider;function ho(){const s=X.useContext(Ef);if(s==null)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return s}function pi(){return ho().sigma}function u_(){const{sigma:s,container:r}=ho(),[n,i]=X.useState({});return X.useEffect(()=>{if(!s||!n)return;const a={};return Object.keys(n).forEach(u=>{a[u]=n[u],s.setSetting(u,n[u])}),()=>{s&&r&&r.offsetWidth>0&&r.offsetHeight>0&&Object.keys(a).forEach(u=>{s.setSetting(u,a[u])})}},[s,n,r]),i}const yh=["clickNode","rightClickNode","downNode","enterNode","leaveNode","doubleClickNode","wheelNode","clickEdge","rightClickEdge","downEdge","enterEdge","leaveEdge","doubleClickEdge","wheelEdge","clickStage","rightClickStage","downStage","doubleClickStage","wheelStage","beforeRender","afterRender","kill"],wh=["click","rightClick","mouseup","mousedown","mousemove","mousemovebody","doubleClick","wheel"],_h=["touchup","touchdown","touchmove"],bh=["updated"];function h_(){const s=pi(),r=u_(),[n,i]=X.useState({});return X.useEffect(()=>{if(!s||!n)return;const a=n,u=Object.keys(a);return u.forEach(f=>{const l=a[f];yh.find(d=>d===f)&&s.on(f,l),wh.find(d=>d===f)&&s.getMouseCaptor().on(f,l),_h.find(d=>d===f)&&s.getTouchCaptor().on(f,l),bh.find(d=>d===f)&&s.getCamera().on(f,l)}),()=>{s&&u.forEach(f=>{const l=a[f];yh.find(d=>d===f)&&s.off(f,l),wh.find(d=>d===f)&&s.getMouseCaptor().off(f,l),_h.find(d=>d===f)&&s.getTouchCaptor().off(f,l),bh.find(d=>d===f)&&s.getCamera().off(f,l)})}},[s,n,r]),i}function __(){const s=pi();return X.useCallback((r,n=!0)=>{s&&r&&(n&&s.getGraph().order>0&&s.getGraph().clear(),s.getGraph().import(r),s.refresh())},[s])}function xf(s){const r=pi(),n=X.useRef();yy.isEqual(n.current,s)||(n.current=s);const i=X.useCallback(d=>{r.getCamera().animatedZoom(Object.assign(Object.assign({},n.current),d))},[r,n]),a=X.useCallback(d=>{r.getCamera().animatedUnzoom(Object.assign(Object.assign({},n.current),d))},[r,n]),u=X.useCallback(d=>{r.getCamera().animatedReset(Object.assign(Object.assign({},n.current),d))},[r,n]),f=X.useCallback((d,v)=>{r.getCamera().animate(d,Object.assign(Object.assign({},n.current),v))},[r,n]),l=X.useCallback((d,v)=>{const w=r.getNodeDisplayData(d);w?r.getCamera().animate(w,Object.assign(Object.assign({},n.current),v)):console.log(`Node ${d} not found`)},[r,n]);return{zoomIn:i,zoomOut:a,reset:u,goto:f,gotoNode:l}}function f_(s){const r=ho(),[n,i]=X.useState(!1),[a,u]=X.useState(s||r.container),f=()=>i(l=>!l);return X.useEffect(()=>(document.addEventListener("fullscreenchange",f),()=>document.removeEventListener("fullscreenchange",f)),[f]),X.useEffect(()=>{u(s||r.container)},[s,r.container]),{toggle:X.useCallback(()=>{var l;l=a,document.fullscreenElement!==l?l.requestFullscreen():document.exitFullscreen&&document.exitFullscreen()},[a]),isFullScreen:n}}const b_=X.forwardRef(({graph:s,id:r,className:n,style:i,settings:a,children:u},f)=>{const l=X.useRef(null),d=X.useRef(null),v={className:`react-sigma ${n||""}`,id:r,style:i},[w,y]=X.useState(null);X.useEffect(()=>{let D=null;if(d.current!==null){let N=new ue;s&&(N=typeof s=="function"?new s:s),D=new o_(N,d.current,a),w&&D.getCamera().setState(w.getCamera().getState())}return y(D),()=>{D&&D.kill(),y(null)}},[d,s,a]),X.useImperativeHandle(f,()=>w,[w]);const x=X.useMemo(()=>w&&l.current?{sigma:w,container:l.current}:null,[w,l.current]),S=x!==null?pe.createElement(s_,{value:x},u):null;return pe.createElement("div",Object.assign({},v,{ref:l}),pe.createElement("div",{className:"sigma-container",ref:d}),S)}),E_=({id:s,className:r,style:n,children:i,position:a="bottom-left"})=>{const u={className:`react-sigma-controls ${r||""} ${a}`,id:s,style:n};return pe.createElement("div",Object.assign({},u),i)};var Eh;function Xa(){return Xa=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Xa.apply(this,arguments)}var xh,l_=function(s){return X.createElement("svg",Xa({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"plus-solid_svg__svg-inline--fa plus-solid_svg__fa-plus plus-solid_svg__fa-w-14","data-icon":"plus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},s),Eh||(Eh=X.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function ja(){return ja=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},ja.apply(this,arguments)}var Ah,c_=function(s){return X.createElement("svg",ja({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"minus-solid_svg__svg-inline--fa minus-solid_svg__fa-minus minus-solid_svg__fa-w-14","data-icon":"minus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},s),xh||(xh=X.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function Ja(){return Ja=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Ja.apply(this,arguments)}var d_=function(s){return X.createElement("svg",Ja({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"dot-circle-regular_svg__svg-inline--fa dot-circle-regular_svg__fa-dot-circle dot-circle-regular_svg__fa-w-16","data-icon":"dot-circle","data-prefix":"far",viewBox:"0 0 512 512",width:"1em",height:"1em"},s),Ah||(Ah=X.createElement("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80"})))};const x_=({className:s,style:r,animationDuration:n=200,children:i,labels:a={}})=>{const{zoomIn:u,zoomOut:f,reset:l}=xf({duration:n,factor:1.5}),d={style:r,className:`react-sigma-control ${s||""}`};return pe.createElement(pe.Fragment,null,pe.createElement("div",Object.assign({},d),pe.createElement("button",{onClick:()=>u(),title:a.zoomIn||"Zoom In"},i?i[0]:pe.createElement(l_,{style:{width:"1em"}}))),pe.createElement("div",Object.assign({},d),pe.createElement("button",{onClick:()=>f(),title:a.zoomOut||"Zoom Out"},i?i[1]:pe.createElement(c_,{style:{width:"1em"}}))),pe.createElement("div",Object.assign({},d),pe.createElement("button",{onClick:()=>l(),title:a.reset||"See whole graph"},i?i[2]:pe.createElement(d_,{style:{width:"1em"}}))))};var Sh;function Qa(){return Qa=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Qa.apply(this,arguments)}var Ch,g_=function(s){return X.createElement("svg",Qa({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"expand-solid_svg__svg-inline--fa expand-solid_svg__fa-expand expand-solid_svg__fa-w-14","data-icon":"expand","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},s),Sh||(Sh=X.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12M288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12m148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12M160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12"})))};function eo(){return eo=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},eo.apply(this,arguments)}var p_=function(s){return X.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"compress-solid_svg__svg-inline--fa compress-solid_svg__fa-compress compress-solid_svg__fa-w-14","data-icon":"compress","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},s),Ch||(Ch=X.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12m-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24m0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12m192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12"})))};const A_=({id:s,className:r,style:n,container:i,children:a,labels:u={}})=>{const{isFullScreen:f,toggle:l}=f_(i==null?void 0:i.current),d={className:`react-sigma-control ${r||""}`,id:s,style:n};return document.fullscreenEnabled?pe.createElement("div",Object.assign({},d),pe.createElement("button",{onClick:l,title:f?u.exit||"Exit fullscreen":u.enter||"Enter fullscreen"},a&&!f&&a[0],a&&f&&a[1],!a&&!f&&pe.createElement(g_,{style:{width:"1em"}}),!a&&f&&pe.createElement(p_,{style:{width:"1em"}}))):null},S_=({id:s,className:r,style:n,labels:i={}})=>{const a=pi(),u=h_(),{gotoNode:f}=xf(),[l,d]=X.useState(""),[v,w]=X.useState([]),[y,x]=X.useState(null),[S,D]=X.useState("");X.useEffect(()=>{D(`search-${Math.random().toString(36).slice(2)}`)},[]),X.useEffect(()=>{const I=[];!y&&l.length>1&&a.getGraph().forEachNode(($,P)=>{P.label&&P.label.toLowerCase().includes(l.toLowerCase())&&I.push({id:$,label:P.label})}),w(I)},[l]),X.useEffect(()=>{u({clickStage:()=>{x(null),d("")}})},[u]),X.useEffect(()=>{if(y)return a.getGraph().setNodeAttribute(y,"highlighted",!0),f(y),()=>{a.getGraph().setNodeAttribute(y,"highlighted",!1)}},[y]);const N={className:`react-sigma-search ${r||""}`,id:s,style:n};return pe.createElement("div",Object.assign({},N),pe.createElement("label",{htmlFor:S,style:{display:"none"}},i.text||"Search a node"),pe.createElement("input",{id:S,type:"text",placeholder:i.placeholder||"Search...",list:`${S}-datalist`,value:l,onChange:I=>{const $=I.target.value,P=v.find(B=>B.label===$);P?(d(P.label),w([]),x(P.id)):(x(null),d($))}}),pe.createElement("datalist",{id:`${S}-datalist`},v.map(I=>pe.createElement("option",{key:I.id,value:I.label},I.label))))};export{x_ as B,__ as C,lf as E,ue as G,Qh as M,J0 as N,A_ as T,jh as U,xw as a,u_ as b,y_ as c,w_ as d,Ph as e,Nn as f,Aw as i,m_ as j,E_ as k,yy as l,pi as p,S_ as q,b_ as x,h_ as y};
